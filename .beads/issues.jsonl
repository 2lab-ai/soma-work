{"id":"somaw-0ql","title":"Add onSessionLinksDetected callback to StreamCallbacks","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T18:41:33.356402+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.238581+09:00","closed_at":"2026-01-30T18:43:10.549213+09:00","close_reason":"Closed","comments":[{"id":1,"issue_id":"somaw-0ql","author":"Z","text":"Review evidence: commit b287278 - feat(directives): add session_links JSON directive support. onSessionLinksDetected callback in stream-processor.ts, 29 new lines.","created_at":"2026-02-03T02:09:48Z"}]}
{"id":"somaw-0rm","title":"Write tests for onboarding workflow","description":"ì˜¨ë³´ë”© ê´€ë ¨ í…ŒìŠ¤íŠ¸ ì‘ì„±:\n\n1. session-initializer í…ŒìŠ¤íŠ¸: ì‹ ê·œ ìœ ì € ê°ì§€ â†’ workflow='onboarding' ì „í™˜\n2. session-initializer í…ŒìŠ¤íŠ¸: Jira ë§¤í•‘ ìˆëŠ” ìœ ì €ëŠ” ì˜¨ë³´ë”© ê±´ë„ˆëœ€\n3. session-initializer í…ŒìŠ¤íŠ¸: ì´ë¯¸ settingsê°€ ìˆëŠ” ìœ ì €ëŠ” ì˜¨ë³´ë”© ê±´ë„ˆëœ€\n4. user-settings-store í…ŒìŠ¤íŠ¸: ensureUserExists() ë™ì‘ í™•ì¸\n5. PromptBuilder í…ŒìŠ¤íŠ¸: workflow='onboarding' ì‹œ ì˜¬ë°”ë¥¸ í”„ë¡¬í”„íŠ¸ ë¡œë“œ\n\ní…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬: vitest (ê¸°ì¡´ í”„ë¡œì íŠ¸ ì„¤ì •)\në³€ê²½ íŒŒì¼: src/slack/pipeline/session-initializer.test.ts (ì‹ ê·œ ë˜ëŠ” ê¸°ì¡´ í™•ì¥)\n\n## Acceptance Criteria\n- vitest ì‹¤í–‰ ì‹œ ì˜¨ë³´ë”© ê´€ë ¨ í…ŒìŠ¤íŠ¸ê°€ ëª¨ë‘ í†µê³¼í•œë‹¤.\n","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T13:08:19.697768+09:00","created_by":"Z","updated_at":"2026-02-04T01:45:36.721836+09:00","closed_at":"2026-02-04T01:45:36.721836+09:00","close_reason":"tsc clean, vitest 452 passed (+21 new onboarding tests, 6 pre-existing failures), 3 files +518 lines","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-0rm","depends_on_id":"somaw-zbp","type":"blocks","created_at":"2026-02-03T13:08:28.492277+09:00","created_by":"Z"}]}
{"id":"somaw-0rm.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: 21 tests covering session-initializer onboarding detection, user-settings-store ensureUserExists, and PromptBuilder workflow loading","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-04T01:45:31.097787+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T01:45:59.144832+09:00","closed_at":"2026-02-04T01:45:59.144832+09:00","close_reason":"parent task somaw-0rm already closed","dependencies":[{"issue_id":"somaw-0rm.1","depends_on_id":"somaw-0rm","type":"parent-child","created_at":"2026-02-04T01:45:31.098393+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-17s","title":"Update env-paths.ts: SOMA_CONFIG_DIR override","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T17:06:19.26298+09:00","created_by":"Z","updated_at":"2026-02-03T17:08:27.17169+09:00","closed_at":"2026-02-03T17:08:27.17169+09:00","close_reason":"tsc clean, vitest 423 passed (6 pre-existing failures), 4 files changed + 2 new (deploy.yml rewrite, Makefile)","labels":["phase:review"]}
{"id":"somaw-17s.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: SOMA_CONFIG_DIR override ì¶”ê°€, branch fallback ìœ ì§€","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T17:06:47.213429+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.397168+09:00","closed_at":"2026-02-03T21:29:36.397168+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-17s.1","depends_on_id":"somaw-17s","type":"parent-child","created_at":"2026-02-03T17:06:47.215362+09:00","created_by":"Z"}]}
{"id":"somaw-1a9","title":"ë´‡ ìƒíƒœë¥¼ ì„¸ì…˜ ëª©ë¡ + thread ì´ëª¨ì§€ë¡œ í‘œì‹œ","description":"ë´‡ í™œë™ ìƒíƒœ(working/waiting/idle)ë¥¼ ë‘ ê³³ì— í‘œì‹œ: 1) ì„¸ì…˜ ëª©ë¡ì— ìƒíƒœ ì•„ì´ì½˜/í…ìŠ¤íŠ¸ (ğŸ”„ì‘ì—…ì¤‘/â³ëŒ€ê¸°ì¤‘/âœ…ì™„ë£Œ), 2) thread ì›ë³¸ ë©”ì‹œì§€ì— ì´ëª¨ì§€ ë°˜ì˜ (ì…‹ ì¤‘ í•˜ë‚˜ë§Œ í‘œì‹œ). session-manager.ts formatUserSessionsBlocks() ìˆ˜ì •, reaction-manager.tsì— í™œë™ìƒíƒœ ì´ëª¨ì§€ ê´€ë¦¬ ì¶”ê°€.","design":"## êµ¬í˜„ ê³„íš: ë´‡ ìƒíƒœ UI í‘œì‹œ\n\n### ì´ëª¨ì§€ ë§¤í•‘ (ê¸°ì¡´ ReactionManager ì¬ì‚¬ìš©)\n- working: gear (ê¸°ì¡´ thinking_face/gear ê·¸ëŒ€ë¡œ)\n- waiting: raised_hand (ì‹ ê·œ - user_choice ì¶œë ¥ ì‹œ)\n- idle: white_check_mark/x/stop_sign (ê¸°ì¡´ completed/error/cancelled ê·¸ëŒ€ë¡œ)\n\n### í•µì‹¬ ì„¤ê³„: ê¸°ì¡´ ReactionManager.updateReaction() íŒ¨í„´ í™œìš©\n- ì´ë¯¸ ìƒí˜¸ë°°íƒ€ì„± ë³´ì¥ (ì´ì „ ì´ëª¨ì§€ ì œê±° â†’ ìƒˆ ì´ëª¨ì§€ ì¶”ê°€)\n- waiting ì§„ì… ì‹œ updateReaction(sessionKey, 'raised_hand') í˜¸ì¶œ\n- waitingâ†’working ì¬ì§„ì… ì‹œ ê¸°ì¡´ thinking_face ì „í™˜ì´ ìë™ ì²˜ë¦¬\n\n### StreamExecutor ë¶„ê¸° (stream-executor.ts L262)\n- hasUserChoice=true: raised_hand ì´ëª¨ì§€ + activityState='waiting'\n- hasUserChoice=false: white_check_mark ì´ëª¨ì§€ + activityState='idle'\n\n### StatusReporter (status-reporter.ts)\n- StatusTypeì— 'waiting' ì¶”ê°€\n- STATUS_CONFIGì— waiting: {text: 'âœ‹ Waiting...', emoji: 'raised_hand'}\n\n### ì„¸ì…˜ ëª©ë¡ í‘œì‹œ (session-manager.ts)\n- formatActivityState(): workingâ†’âš™ï¸, waitingâ†’âœ‹, idleâ†’ì—†ìŒ\n- formatUserSessionsBlocks(): ì„¸ì…˜ ë²ˆí˜¸ ì˜†ì— í™œë™ ìƒíƒœ ì´ëª¨ì§€ í‘œì‹œ\n- formatAllSessions(): ë™ì¼ íŒ¨í„´ ì ìš©\n\n### SessionInitializer (session-initializer.ts)\n- raised_hand ì´ëª¨ì§€ë„ ì´ˆê¸°í™” ëŒ€ìƒì— ì¶”ê°€ (white_check_markê³¼ ë™ì¼ ì²˜ë¦¬)\n\n### MCP Pending í˜¸í™˜\n- waiting + MCP í˜¸ì¶œ ì‹œ: raised_hand â†’ hourglass â†’ raised_hand (ê¸°ì¡´ preMcpReactions ë¡œì§)\n\n### ë³€ê²½ íŒŒì¼ (4ê°œ)\nstatus-reporter.ts, session-manager.ts, stream-executor.ts, session-initializer.ts","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:23.786998+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.24026+09:00","closed_at":"2026-02-02T19:02:48.994019+09:00","close_reason":"Implemented activity state display: Added 'waiting' to StatusType with raised_hand emoji, stream-executor uses waiting/completed status based on hasUserChoice, session list shows âš™ï¸/âœ‹ emoji prefix for working/waiting states, session-initializer clears raised_hand on new message","dependencies":[{"issue_id":"somaw-1a9","depends_on_id":"somaw-5ox","type":"blocks","created_at":"2026-02-02T18:11:49.421728+09:00","created_by":"Z"}],"comments":[{"id":2,"issue_id":"somaw-1a9","author":"Z","text":"Review evidence: commit 5dab00c - feat: add activity state UI display and link status with emoji indicators. formatActivityEmoji() shows âš™ï¸/âœ‹ prefix in session list. status-reporter.ts adds waiting type with raised_hand emoji.","created_at":"2026-02-03T02:08:54Z"}]}
{"id":"somaw-1xw","title":"Setup wizard: Step 04-06 .env + .system.prompt + MCP","description":"Step 04: ìˆ˜ì§‘ëœ í† í° + BASE_DIRECTORY ë“±ìœ¼ë¡œ .env ì¡°ë¦½. Step 05: repo URL ë¦¬ìŠ¤íŠ¸ ì…ë ¥ë°›ì•„ .system.prompt ìƒì„±. Step 06: MCP ì„œë²„ ì„ íƒ(jira/codex/gemini ë“±) â†’ mcp-servers.json ìƒì„±.","status":"closed","priority":0,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T15:14:52.582842+09:00","created_by":"Z","updated_at":"2026-02-03T15:23:25.870258+09:00","closed_at":"2026-02-03T15:23:25.870258+09:00","close_reason":"vitest 423 passed (6 pre-existing), all bash -n syntax checks pass, --status tested via symlink, 17 new files +1548 lines, bash 3.2 compatible","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-1xw","depends_on_id":"somaw-26d","type":"blocks","created_at":"2026-02-03T15:15:13.025558+09:00","created_by":"Z"}]}
{"id":"somaw-1xw.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: 04-env-config.sh (.env assembly), 05-system-prompt.sh (repo list), 06-mcp-servers.sh (jira/codex/gemini)","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T15:23:18.511722+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.498899+09:00","closed_at":"2026-02-03T21:29:36.498899+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-1xw.1","depends_on_id":"somaw-1xw","type":"parent-child","created_at":"2026-02-03T15:23:18.514244+09:00","created_by":"Z"}]}
{"id":"somaw-26d","title":"Setup wizard: Step 02-03 Slack App + GitHub Integration","description":"Step 02: slack-app-manifest.yamlë¡œ ì•± ìƒì„± ì•ˆë‚´, SLACK_BOT_TOKEN/APP_TOKEN/SIGNING_SECRET ì…ë ¥ ë°›ê¸°. Step 03: GitHub App vs PAT ì„ íƒ, GITHUB_APP_ID/PRIVATE_KEY/INSTALLATION_ID ë˜ëŠ” GITHUB_TOKEN ìˆ˜ì§‘.","status":"closed","priority":0,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T15:14:50.371637+09:00","created_by":"Z","updated_at":"2026-02-03T15:23:25.860141+09:00","closed_at":"2026-02-03T15:23:25.860141+09:00","close_reason":"vitest 423 passed (6 pre-existing), all bash -n syntax checks pass, --status tested via symlink, 17 new files +1548 lines, bash 3.2 compatible","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-26d","depends_on_id":"somaw-w95","type":"blocks","created_at":"2026-02-03T15:15:12.943316+09:00","created_by":"Z"}]}
{"id":"somaw-26d.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: 02-slack-app.sh (manifest guide, token collection), 03-github-integration.sh (App vs PAT)","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T15:23:18.440582+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.512742+09:00","closed_at":"2026-02-03T21:29:36.512742+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-26d.1","depends_on_id":"somaw-26d","type":"parent-child","created_at":"2026-02-03T15:23:18.443712+09:00","created_by":"Z"}]}
{"id":"somaw-2gc","title":"Sleep mode: 24ì‹œê°„ í›„ ì„¸ì…˜ ìë™ì¢…ë£Œ ëŒ€ì‹  Sleep ì „í™˜","description":"ì„¸ì…˜ì´ 24ì‹œê°„ ì§€ë‚˜ë„ ìë™ìœ¼ë¡œ ì¢…ë£Œë˜ì§€ ì•Šê³  Sleep ëª¨ë“œë¡œ ì „í™˜. ìœ ì €ê°€ ë‹¤ì‹œ ë§ì„ ê±¸ë©´ í•´ë‹¹ ì„¸ì…˜ì„ ì´ì–´ì„œ í•  ìˆ˜ ìˆìŒ. session-registry.tsì˜ cleanupInactiveSessions()ê³¼ DEFAULT_SESSION_TIMEOUT ë¡œì§ ìˆ˜ì • í•„ìš”. SessionStateì— SLEEP ìƒíƒœ ì¶”ê°€, ê²½ê³  ëŒ€ì‹  Sleep ì „í™˜ ì•Œë¦¼.","design":"## êµ¬í˜„ ê³„íš: Sleep Mode\n\n### íƒ€ì… ë³€ê²½\n- types.ts: SessionStateì— 'SLEEPING' ì¶”ê°€, ConversationSessionì— sleepStartedAt?: Date ì¶”ê°€\n- session-registry.ts: SerializedSessionì— sleepStartedAt?: string ì¶”ê°€\n\n### ìƒìˆ˜\n- DEFAULT_SESSION_TIMEOUT = 24h (Activeâ†’Sleep)\n- MAX_SLEEP_DURATION = 7d (Sleep ìµœëŒ€ ìœ ì§€)\n\n### í•µì‹¬ ë¡œì§ (session-registry.ts)\n1. cleanupInactiveSessions() 3ë‹¨ê³„ ë¦¬íŒ©í„°ë§:\n   - SLEEPING + 7ì¼ ì´ˆê³¼ â†’ ì‚­ì œ\n   - MAIN/INITIALIZING + 24h ì´ˆê³¼ â†’ SLEEPING ì „í™˜\n   - 24h ì´ë‚´ â†’ ê¸°ì¡´ ê²½ê³  ìœ ì§€\n2. transitionToSleep(): state='SLEEPING', sleepStartedAt ì„¤ì •, onSleep ì½œë°± í˜¸ì¶œ\n3. wakeFromSleep(): state='MAIN', sleepStartedAt ì œê±°, lastActivity ê°±ì‹ \n\n### SessionExpiryCallbacks í™•ì¥\n- onSleep ì½œë°± ì¶”ê°€ (Sleep ì „í™˜ ì•Œë¦¼)\n- onExpiryëŠ” Sleep ë§Œë£Œ ì‹œì—ë§Œ í˜¸ì¶œ\n\n### Persistence\n- saveSessions(): sleepStartedAt ì§ë ¬í™”\n- loadSessions(): SLEEPING ì„¸ì…˜ì€ MAX_SLEEP_DURATION ê¸°ì¤€ ë³µì›\n\n### Session Resume (session-initializer.ts)\n- SLEEPING ì„¸ì…˜ì— ë©”ì‹œì§€ ì˜¤ë©´ wakeFromSleep() í˜¸ì¶œ\n- state='MAIN'ìœ¼ë¡œ ë³µì›ë˜ë¯€ë¡œ dispatch ì¬ì‹¤í–‰ ì•ˆí•¨ (ê¸°ì¡´ sessionId ìœ ì§€)\n\n### UI (session-manager.ts)\n- handleSessionSleep(): Sleep ì „í™˜ Slack ì•Œë¦¼\n- formatUserSessionsBlocks(): ğŸ’¤ Sleep ìƒíƒœ í‘œì‹œ + Sleep ë§Œë£Œ ì¹´ìš´íŠ¸ë‹¤ìš´\n- message-formatter.ts: formatSleepExpiresIn() ì¶”ê°€\n\n### Facade (claude-handler.ts)\n- wakeFromSleep() ìœ„ì„ ë©”ì„œë“œ ì¶”ê°€\n\n### ìƒíƒœ ì „ì´: INITIALIZING â†’ MAIN â†” SLEEPING â†’ DELETED\n\n### ë³€ê²½ íŒŒì¼ (8ê°œ)\ntypes.ts, session-registry.ts, claude-handler.ts, session-initializer.ts, pipeline/types.ts, session-manager.ts, message-formatter.ts, event-router.ts","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:09.080393+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.237544+09:00","closed_at":"2026-02-02T18:47:00.941564+09:00","close_reason":"Implemented: SLEEPING state, 3-stage lifecycle (Activeâ†’Sleepâ†’Delete), wake-from-sleep on message, UI updates in session list","comments":[{"id":3,"issue_id":"somaw-2gc","author":"Z","text":"Review evidence: commit b6e37bd - feat: add sleep mode and fix context emoji duplication. 9 files, +257/-43 lines. Sleep mode with 3-stage cleanup (Activeâ†’Sleep 24hâ†’Delete 7d), wakeFromSleep on message, session list shows sleep state.","created_at":"2026-02-03T02:08:40Z"}]}
{"id":"somaw-30w","title":"Create Makefile with up/down targets","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T17:06:19.49813+09:00","created_by":"Z","updated_at":"2026-02-03T17:08:27.205625+09:00","closed_at":"2026-02-03T17:08:27.205625+09:00","close_reason":"tsc clean, vitest 423 passed (6 pre-existing failures), 4 files changed + 2 new (deploy.yml rewrite, Makefile)"}
{"id":"somaw-3b3","title":"Refactor SessionLinkDirective to JSON format like UserChoice","description":"Change SessionLinkDirectiveHandler from XML to JSON format similar to UserChoiceExtractor pattern. Support both ```json blocks and raw JSON objects.","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T19:26:12.060916+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.238193+09:00","closed_at":"2026-01-30T19:28:18.729867+09:00","close_reason":"Refactored SessionLinkDirectiveHandler from XML to JSON format similar to UserChoiceExtractor. Updated tests and workflow prompts.","comments":[{"id":4,"issue_id":"somaw-3b3","author":"Z","text":"Review evidence: commit b287278 - feat(directives): add session_links JSON directive support. JSON format replacing XML, supports code-fenced json blocks and raw JSON objects.","created_at":"2026-02-03T02:09:51Z"}]}
{"id":"somaw-3fc","title":"Setup wizard: Step 10-11 Runner + Services","description":"Step 10: GitHub Actions self-hosted runner ë‹¤ìš´ë¡œë“œ, ì„¤ì •, LaunchAgent ë“±ë¡. ì´ë¯¸ ì„¤ì¹˜ëœ ê²½ìš° ìƒíƒœ í™•ì¸ë§Œ. Step 11: service.sh main/dev installë¡œ LaunchAgent ë“±ë¡ ë° ì‹œì‘.","status":"closed","priority":0,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T15:14:59.650783+09:00","created_by":"Z","updated_at":"2026-02-03T15:23:25.901485+09:00","closed_at":"2026-02-03T15:23:25.901485+09:00","close_reason":"vitest 423 passed (6 pre-existing), all bash -n syntax checks pass, --status tested via symlink, 17 new files +1548 lines, bash 3.2 compatible","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-3fc","depends_on_id":"somaw-xr2","type":"blocks","created_at":"2026-02-03T15:15:13.264001+09:00","created_by":"Z"}]}
{"id":"somaw-3fc.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: 10-runner.sh (download, configure, LaunchAgent), 11-services.sh (install via service.sh)","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T15:23:18.714822+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.455201+09:00","closed_at":"2026-02-03T21:29:36.455201+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-3fc.1","depends_on_id":"somaw-3fc","type":"parent-child","created_at":"2026-02-03T15:23:18.717186+09:00","created_by":"Z"}]}
{"id":"somaw-3s4","title":"Add CI quality gates + status badge","description":"Add CI workflow to run lint, tests, and build. Add lint script and CI status badge to README files.\\n\\nAcceptance Criteria:\\n- GitHub Actions workflow runs npm ci, lint, test, build on PR/push\\n- npm run lint exists\\n- CI status badge added to README.md and README.ko.md","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","created_at":"2026-02-04T15:41:56.002368+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T15:43:50.795686+09:00","closed_at":"2026-02-04T15:43:50.795686+09:00","close_reason":"CI workflow + lint script + README badges. npm run lint, npm test (463 passed), npm run build OK. commit 7b3b345","labels":["phase:review"]}
{"id":"somaw-3s4.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: CI workflow + lint script + README badges; npm run lint/test/build clean","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-04T15:43:17.27978+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T15:44:49.510335+09:00","closed_at":"2026-02-04T15:44:49.510335+09:00","close_reason":"phase set to review","dependencies":[{"issue_id":"somaw-3s4.1","depends_on_id":"somaw-3s4","type":"parent-child","created_at":"2026-02-04T15:43:17.280371+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-4fq","title":"Add directive module exports","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T18:41:33.73603+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.241622+09:00","closed_at":"2026-01-30T18:42:39.229523+09:00","close_reason":"Closed","comments":[{"id":5,"issue_id":"somaw-4fq","author":"Z","text":"Review evidence: commit b287278 - feat(directives): add session_links JSON directive support. directives/index.ts and slack/index.ts exports added.","created_at":"2026-02-03T02:09:55Z"}]}
{"id":"somaw-4ln","title":"ì„¸ì…˜ new/renew ì‹œ ê¸°ì¡´ ì»¨í…ìŠ¤íŠ¸ ì´ëª¨ì§€ ë¦¬ì…‹ í›„ ìƒˆë¡œ ì¶”ê°€","status":"closed","priority":1,"issue_type":"bug","owner":"z@insightquest.io","created_at":"2026-01-30T20:01:30.800304+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.237785+09:00","closed_at":"2026-01-30T20:03:47.436748+09:00","close_reason":"cleanupWithReaction() ë©”ì„œë“œ ì¶”ê°€, setOriginalMessage()ì—ì„œ ì´ëª¨ì§€ ë³´ì¡´ ë¡œì§ ì œê±°","comments":[{"id":6,"issue_id":"somaw-4ln","author":"Z","text":"Review evidence: commit 30c1dff - feat(slack): distinguish system messages with zap reaction. cleanupWithReaction() added to remove emoji from correct channel/ts, removed emoji preservation in setOriginalMessage() to fix duplication on new/renew.","created_at":"2026-02-03T02:09:09Z"}]}
{"id":"somaw-4ps","title":"Step 4: Add rate-limited assistant API wrappers to SlackApiHelper","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:57.618631+09:00","updated_at":"2026-02-03T11:37:48.243101+09:00","closed_at":"2026-01-30T14:37:49.178152+09:00","close_reason":"Closed","comments":[{"id":7,"issue_id":"somaw-4ps","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. Rate-limited API wrappers in slack-api-helper.ts (+26 lines).","created_at":"2026-02-03T02:09:30Z"}]}
{"id":"somaw-4wc","title":"Update src/slack/index.ts exports","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:37:02.562783+09:00","updated_at":"2026-02-03T11:37:48.242489+09:00","closed_at":"2026-01-30T14:41:25.825449+09:00","close_reason":"Closed","comments":[{"id":8,"issue_id":"somaw-4wc","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. src/slack/index.ts updated with AssistantStatusManager export (+3 lines).","created_at":"2026-02-03T02:09:30Z"}]}
{"id":"somaw-5ox","title":"ë´‡ í™œë™ ìƒíƒœ ì¶”ì  ì¸í”„ë¼ (working/waiting/idle)","description":"ë´‡ì˜ í™œë™ ìƒíƒœë¥¼ 3ê°€ì§€ë¡œ ì¶”ì í•˜ëŠ” ì¸í”„ë¼ êµ¬ì¶•: 1) working (AIê°€ ì‘ë‹µ ìƒì„± ì¤‘), 2) waiting (ìœ ì € ì‘ë‹µ ëŒ€ê¸° - AskUserQuestion/permission), 3) idle (ì‘ë‹µ ì™„ë£Œ). ConversationSessionì— activityState í•„ë“œ ì¶”ê°€. stream-executor.tsì—ì„œ ìƒíƒœ ì „í™˜ ë¡œì§. ì´ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ thread ì´ëª¨ì§€ì™€ ì„¸ì…˜ ëª©ë¡ì—ì„œ í‘œì‹œ.","design":"## êµ¬í˜„ ê³„íš: ë´‡ í™œë™ ìƒíƒœ ì¶”ì  ì¸í”„ë¼\n\n### íƒ€ì… ì •ì˜ (types.ts)\n- ActivityState = 'working' | 'waiting' | 'idle'\n- ConversationSessionì— activityState?: ActivityState, activityStateChangedAt?: number ì¶”ê°€\n\n### SessionRegistry (session-registry.ts)\n1. setActivityState(): ìƒíƒœ ì „í™˜ + ì¤‘ë³µ ì „í™˜ ë°©ì§€, idle ì „í™˜ ì‹œì—ë§Œ persist\n2. getActivityState()/getActivityStateByKey(): ì¡°íšŒ ë©”ì„œë“œ\n3. createSession(): activityState='idle'ë¡œ ì´ˆê¸°í™”\n4. resetSessionContext(): idleë¡œ ë¦¬ì…‹\n5. loadSessions(): ë³µì› ì‹œ ëª¨ë“  ì„¸ì…˜ idle ê°•ì œ\n6. saveSessions()/SerializedSession: activityState ì§ë ¬í™”\n\n### ClaudeHandler Facade\n- setActivityState(), getActivityState() ìœ„ì„ ë©”ì„œë“œ\n\n### ìƒíƒœ ì „í™˜ í¬ì¸íŠ¸\n| ì „í™˜ | ìœ„ì¹˜ | íŠ¸ë¦¬ê±° |\n|------|------|--------|\n| idleâ†’working | stream-executor.ts execute() ì§„ì… | ìŠ¤íŠ¸ë¦¼ ì‹œì‘ |\n| workingâ†’waiting | stream-executor.ts execute() ì™„ë£Œ | hasUserChoice=true |\n| workingâ†’idle | stream-executor.ts execute() ì™„ë£Œ | hasUserChoice=false |\n| workingâ†’idle | stream-executor.ts handleError() | ì—ëŸ¬/ì·¨ì†Œ |\n| waitingâ†’working | choice-action-handler.ts | ìœ ì € ì„ íƒ ìˆ˜ì‹  |\n\n### StreamProcessor (stream-processor.ts)\n- StreamResultì— hasUserChoice?: boolean ì¶”ê°€\n- _hasUserChoice ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¡œ choice ê°ì§€ ì¶”ì \n- handleTextMessage()ì—ì„œ choice/multiChoice ê°ì§€ ì‹œ true ì„¤ì •\n\n### ë³€ê²½ íŒŒì¼ (6ê°œ)\ntypes.ts, session-registry.ts, claude-handler.ts, stream-processor.ts, stream-executor.ts, choice-action-handler.ts","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:20.444762+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.240536+09:00","closed_at":"2026-02-02T18:57:40.860124+09:00","close_reason":"Implemented activity state tracking infrastructure across 6 files: types.ts (ActivityState type + ConversationSession fields), session-registry.ts (setActivityState/getActivityState + persistence), claude-handler.ts (delegation methods), stream-processor.ts (hasUserChoice in StreamResult), stream-executor.ts (state transitions at execute entry/completion/error), choice-action-handler.ts (waitingâ†’working on user choice)","comments":[{"id":9,"issue_id":"somaw-5ox","author":"Z","text":"Review evidence: commit 305e65b - feat: add activity state tracking, link titles, and repo grouping. ActivityState type added to types.ts, setActivityState/getActivityState in session-registry.ts, transitions at stream entry/completion/error/user-choice. 8 files, +379/-88 lines.","created_at":"2026-02-03T02:08:53Z"}]}
{"id":"somaw-5tm","title":"Fix context-handler.test.ts 6 pre-existing test failures","description":"context-handler.test.tsì—ì„œ postSystemMessage mockì´ ëˆ„ë½ë˜ì–´ 6ê°œ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨. deps ê°ì²´ì— slackApi.postSystemMessageê°€ ì •ì˜ë˜ì§€ ì•Šì•„ undefined reading 'postSystemMessage' ì—ëŸ¬ ë°œìƒ.","status":"closed","priority":1,"issue_type":"bug","owner":"icedac@gmail.com","created_at":"2026-02-04T14:39:55.654887+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T14:42:15.939136+09:00","closed_at":"2026-02-04T14:42:15.939136+09:00","close_reason":"tsc clean, vitest 458 passed (0 failures, ì´ì „ 6ê°œ ëª¨ë‘ ìˆ˜ì •), 1 file +24 -11 lines, commit 04a2726","labels":["phase:review"]}
{"id":"somaw-5tm.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: deps.slackApi mock ì¶”ê°€, 6ê°œ assertion ctx.sayâ†’postSystemMessageë¡œ ìˆ˜ì •. vitest 458 passed 0 failed, tsc clean","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-04T14:42:15.85875+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T14:42:15.85875+09:00","dependencies":[{"issue_id":"somaw-5tm.1","depends_on_id":"somaw-5tm","type":"parent-child","created_at":"2026-02-04T14:42:15.860793+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-5yq","title":"Setup wizard: Step 09 GitHub Environments (optional)","description":"(Optional) gh apië¡œ production/development í™˜ê²½ ìƒì„±, ë¸Œëœì¹˜ ì •ì±… ì„¤ì •(mainâ†’production, developâ†’development). ì‹œí¬ë¦¿ ì—…ë¡œë“œëŠ” ì„ íƒì .","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T15:14:58.313209+09:00","created_by":"Z","updated_at":"2026-02-03T15:23:25.891406+09:00","closed_at":"2026-02-03T15:23:25.891406+09:00","close_reason":"vitest 423 passed (6 pre-existing), all bash -n syntax checks pass, --status tested via symlink, 17 new files +1548 lines, bash 3.2 compatible","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-5yq","depends_on_id":"somaw-xr2","type":"blocks","created_at":"2026-02-03T15:15:13.185385+09:00","created_by":"Z"}]}
{"id":"somaw-5yq.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: 09-github-environments.sh (gh api, branch policies)","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T15:23:18.647603+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.469715+09:00","closed_at":"2026-02-03T21:29:36.469715+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-5yq.1","depends_on_id":"somaw-5yq","type":"parent-child","created_at":"2026-02-03T15:23:18.649928+09:00","created_by":"Z"}]}
{"id":"somaw-6m0","title":"í”„ë¡œì íŠ¸ ì´ë¦„ ë³€ê²½: claude-code-slack â†’ soma-work","description":"package.json name, service.sh SERVICE_NAME, Dockerfile, docker-compose.yml, CLAUDE.md, README ë“±ì—ì„œ í”„ë¡œì íŠ¸ ì´ë¦„ì„ soma-workë¡œ ë³€ê²½. repo renameì€ ì‚¬ìš©ìê°€ GitHubì—ì„œ ì§ì ‘ ìˆ˜í–‰.","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T11:36:36.74741+09:00","created_by":"Z","updated_at":"2026-02-03T12:44:03.540015+09:00","closed_at":"2026-02-03T12:44:03.540015+09:00","close_reason":"vitest 423 passed (6 pre-existing failures in context-handler.test.ts, unrelated), 8 files +16/-16 lines, all source references updated, git stash test confirmed failures pre-existing","labels":["phase:review"]}
{"id":"somaw-6m0.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: 8 files renamed, vitest 423 passed (6 pre-existing failures in context-handler.test.ts, unrelated), no new failures","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T12:43:57.765004+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.61774+09:00","closed_at":"2026-02-03T21:29:36.61774+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-6m0.1","depends_on_id":"somaw-6m0","type":"parent-child","created_at":"2026-02-03T12:43:57.766275+09:00","created_by":"Z"}]}
{"id":"somaw-788","title":"Step 2: Create AssistantStatusManager class","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:11.520259+09:00","updated_at":"2026-02-03T11:37:48.24411+09:00","closed_at":"2026-01-30T14:38:07.549225+09:00","close_reason":"Closed","comments":[{"id":10,"issue_id":"somaw-788","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. AssistantStatusManager class (69 lines) with tool-specific status text mapping.","created_at":"2026-02-03T02:09:19Z"}]}
{"id":"somaw-7pl","title":"ì„¸ì…˜ ëª©ë¡: Repositoryë³„ ê·¸ë£¹í•‘","description":"ì„¸ì…˜ ëª©ë¡ì„ repositoryë³„ë¡œ ë¶„ë¦¬í•˜ì—¬ í‘œê¸°. ê°™ì€ repoì˜ ì„¸ì…˜ì„ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì–´ í‘œì‹œ. working directoryë‚˜ GitHub repo URLì—ì„œ repoëª… ì¶”ì¶œ. session-manager.tsì˜ formatUserSessionsBlocks() ìˆ˜ì •.","design":"## êµ¬í˜„ ê³„íš: Repositoryë³„ ê·¸ë£¹í•‘\n\n### Repoëª… ì¶”ì¶œ ì „ëµ (ìš°ì„ ìˆœìœ„)\n1. GitHub PR/Issue URL â†’ github.com/(owner/repo) ì¶”ì¶œ\n2. workingDirectory â†’ ë§ˆì§€ë§‰ ê²½ë¡œ ì»´í¬ë„ŒíŠ¸\n3. Fallback â†’ '_ê¸°íƒ€_'\n\n### session-manager.ts\n1. extractRepoName(session): repoëª… ì¶”ì¶œ í—¬í¼\n2. formatUserSessionsBlocks() ë¦¬íŒ©í„°ë§:\n   - Map\u003crepoName, sessions[]\u003eìœ¼ë¡œ ê·¸ë£¹í•‘\n   - ê·¸ë£¹ë³„ context í—¤ë”: ğŸ“¦ *org/repo* (N)\n   - ê·¸ë£¹ ë‚´ ì„¸ì…˜ì„ section ë¸”ë¡ìœ¼ë¡œ í‘œì‹œ\n   - ê·¸ë£¹ ì •ë ¬: ìµœê·¼ í™œë™ ì„¸ì…˜ ê¸°ì¤€ (Map ì‚½ì… ìˆœì„œ í™œìš©)\n\n### Block Kit êµ¬ì¡°\nheader â†’ [divider â†’ context(ğŸ“¦ repo) â†’ section(ì„¸ì…˜1) â†’ section(ì„¸ì…˜2)] Ã— ê·¸ë£¹ìˆ˜ â†’ divider â†’ actions(ìƒˆë¡œê³ ì¹¨) â†’ context(ë„ì›€ë§)\n\n### Edge Cases\n- workingDirectory/links ì—†ìŒ: '_ê¸°íƒ€_' ê·¸ë£¹\n- ëª¨ë“  ì„¸ì…˜ ê°™ì€ repo: ê·¸ë£¹ 1ê°œë§Œ í‘œì‹œ\n- Jira URL(github ì•„ë‹˜): workingDirectory fallback\n- Slack 50ë¸”ë¡ ì œí•œ: ì„¸ì…˜ 15ê°œ ì´í•˜ë©´ ì•ˆì „ (ì„¸ì…˜ë‹¹ ~3ë¸”ë¡ + ê·¸ë£¹ë‹¹ 2ë¸”ë¡)\n\n### ë³€ê²½ íŒŒì¼ (1ê°œ)\nsession-manager.ts","status":"closed","priority":3,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:39.498487+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.244506+09:00","closed_at":"2026-02-02T19:00:28.979654+09:00","close_reason":"Implemented repository grouping in session list. Added extractRepoName() helper (priority: GitHub URL â†’ workingDirectory â†’ fallback). formatUserSessionsBlocks() now groups sessions by repo with context headers when multiple repos exist.","dependencies":[{"issue_id":"somaw-7pl","depends_on_id":"somaw-r4d","type":"blocks","created_at":"2026-02-02T18:11:55.752164+09:00","created_by":"Z"}],"comments":[{"id":11,"issue_id":"somaw-7pl","author":"Z","text":"Review evidence: commit 305e65b - feat: add activity state tracking, link titles, and repo grouping. extractRepoName() in session-manager.ts groups sessions by repo from GitHub URL or workingDirectory path.","created_at":"2026-02-03T02:08:54Z"}]}
{"id":"somaw-89z","title":"ì„¸ì…˜ ëª©ë¡: Jira ì´ìŠˆ Status + PR ìƒíƒœ í‘œì‹œ","description":"ì„¸ì…˜ ëª©ë¡ì— Jira ì´ìŠˆì˜ í˜„ì¬ Status (To Do, In Progress, Done ë“±)ì™€ PR ìƒíƒœ (Open, Merged, Draft ë“±) í‘œì‹œ. ì´ìŠˆ/PR ì œëª© ì¡°íšŒ ì‹œ í•¨ê»˜ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ íš¨ìœ¨ì . ìƒíƒœë³„ ì•„ì´ì½˜/ìƒ‰ìƒ êµ¬ë¶„.","design":"## êµ¬í˜„ ê³„íš: Jira ì´ìŠˆ Status + PR ìƒíƒœ í‘œì‹œ\n\n### link-metadata-fetcher.ts í™•ì¥\n1. refreshStatusIfStale(link): statusCheckedAt 5ë¶„ ì´ˆê³¼ ì‹œ API ê°±ì‹ \n2. fetchJiraStatus(link): Jira REST API (fields=status) â†’ status.name\n3. fetchGitHubPRStatus(link): GitHub API â†’ state/merged/draft/mergeable_state ì¡°í•©\n   - mergedâ†’'merged', draftâ†’'draft', closedâ†’'closed'\n   - mergeable_state: cleanâ†’'ready', blockedâ†’'blocked', dirtyâ†’'conflicts'\n4. fetchGitHubIssueStatus(link): GitHub API â†’ state\n5. getStatusEmoji(link): ìƒíƒœë³„ ì´ëª¨ì§€ ë§¤í•‘\n   - Jira: To Doâ¬œ, In ProgressğŸ”µ, In ReviewğŸŸ¡, Doneâœ…\n   - PR: openğŸŸ¢, readyâœ…, mergedğŸŸ£, draftâšª, conflictsğŸ”¶\n   - Issue: openğŸŸ¢, closedâœ…\n\n### session-manager.ts formatLinksLine()\n- title + status ë³‘ë ¬ ì¡°íšŒ (Promise.all)\n- ìƒíƒœ ì´ëª¨ì§€ + í…ìŠ¤íŠ¸ í‘œì‹œ: ğŸ« PTN-123: ì œëª© ğŸ”µIn Progress | ğŸ”€ PR #42 âœ…ready\n\n### ì„±ëŠ¥\n- Stale TTL 5ë¶„, ìºì‹œ ì¬ì‚¬ìš©\n- API ì‹¤íŒ¨ ì‹œ ì´ì „ status ìœ ì§€ (graceful)\n\n### ë³€ê²½ íŒŒì¼ (2ê°œ)\nlink-metadata-fetcher.ts, session-manager.ts","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:32.172972+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.239515+09:00","closed_at":"2026-02-02T19:04:02.741017+09:00","close_reason":"Implemented Jira/PR status display: Refactored link-metadata-fetcher to return both title+status from single API call, added status emoji mapping (Jira: â¬œ/ğŸ”µ/ğŸŸ¡/âœ…, PR: ğŸŸ¢/âšª/ğŸŸ£/ğŸ”´), formatLinksLine shows status with emoji next to link","dependencies":[{"issue_id":"somaw-89z","depends_on_id":"somaw-dm9","type":"blocks","created_at":"2026-02-02T18:11:51.403318+09:00","created_by":"Z"}],"comments":[{"id":12,"issue_id":"somaw-89z","author":"Z","text":"Review evidence: commit 5dab00c - feat: add activity state UI display and link status with emoji indicators. link-metadata-fetcher returns title+status from single API call with emoji mapping for Jira (â¬œğŸ”µğŸŸ¡âœ…) and GitHub PR (ğŸŸ¢âšªğŸŸ£ğŸ”´). 5 files, +136/-61 lines.","created_at":"2026-02-03T02:08:54Z"}]}
{"id":"somaw-8jj","title":"Create SessionLinkDirectiveHandler","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T18:41:33.247234+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.238778+09:00","closed_at":"2026-01-30T18:42:39.154492+09:00","close_reason":"Closed","comments":[{"id":13,"issue_id":"somaw-8jj","author":"Z","text":"Review evidence: commit b287278 - feat(directives): add session_links JSON directive support. SessionLinkDirectiveHandler (209 lines) with JSON block and raw JSON detection, provider auto-detection, label extraction.","created_at":"2026-02-03T02:09:46Z"}]}
{"id":"somaw-8ks","title":"service.sh ë¦¬íŒ©í† ë§: ë°°í¬ í™˜ê²½ ëŒ€ì‘","description":"service.shë¥¼ /opt/soma-work ê²½ë¡œ ê¸°ë°˜ìœ¼ë¡œ ì—…ë°ì´íŠ¸. main/dev ì¸ìŠ¤í„´ìŠ¤ë¥¼ êµ¬ë¶„í•˜ëŠ” SERVICE_NAME (ì˜ˆ: com.soma-work.main, com.soma-work.dev). í™˜ê²½ë³„ plist ìƒì„± ì§€ì›.","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T11:36:49.479436+09:00","created_by":"Z","updated_at":"2026-02-03T12:46:39.019816+09:00","closed_at":"2026-02-03T12:46:39.019816+09:00","close_reason":"vitest 423 passed (6 pre-existing), service.sh rewritten with multi-env support, bash -n syntax OK, help output verified, 1 file +331/-201 lines","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-8ks","depends_on_id":"somaw-6m0","type":"blocks","created_at":"2026-02-03T11:36:55.840492+09:00","created_by":"Z"}]}
{"id":"somaw-8ks.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: service.sh refactored: multi-env support (main/dev/local), setup/deploy/status-all commands, generate_plist extraction","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T12:46:32.110749+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.603831+09:00","closed_at":"2026-02-03T21:29:36.603831+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-8ks.1","depends_on_id":"somaw-8ks","type":"parent-child","created_at":"2026-02-03T12:46:32.111813+09:00","created_by":"Z"}]}
{"id":"somaw-8n7","title":"Build verification (npm run build + vitest)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:37:06.125685+09:00","updated_at":"2026-02-03T11:37:48.242025+09:00","closed_at":"2026-01-30T14:42:18.697427+09:00","close_reason":"Closed","comments":[{"id":14,"issue_id":"somaw-8n7","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. Full build: 10 files, +246/-4 lines, tsc clean, tests pass.","created_at":"2026-02-03T02:09:30Z"}]}
{"id":"somaw-8qx","title":"Restructure CLAUDE.md ecosystem: slim core + rules split","description":"## Goal\nCLAUDE.md 451ì¤„ â†’ ~80ì¤„ë¡œ ìŠ¬ë¦¼í™”. ìƒì„¸ ë‚´ìš©ì„ .claude/rules/{build,deploy,issuetracking}.mdë¡œ ë¶„ë¦¬.\n\n## Deliverables\n1. **CLAUDE.md (~80ì¤„)**: project identity, codebase stats, facade table, design decisions, key gotchas, bd ìµœì†Œ ëª…ë ¹ì–´ (3ì¤„)\n2. **.claude/rules/issuetracking.md (~40ì¤„)**: bd lifecycle ì „ì²´ ê·œì¹™, close ê·¼ê±° ì˜ˆì‹œ, phase:review ê·œì¹™\n3. **.claude/rules/build.md (~40ì¤„)**: dev commands, test, project structure, config files\n4. **.claude/rules/deploy.md (~35ì¤„)**: env vars, Docker, LaunchAgent, auto-deploy on push, git push workaround\n5. **AGENTS.md (1ì¤„)**: See CLAUDE.md\n\n## Rules (from Oracle review)\n- ìƒì„¸ íŒŒì¼ ë¦¬ìŠ¤íŒ… (130ì¤„) ì „ë¶€ ì œê±°\n- CLAUDE.mdì— bdëŠ” ìµœì†Œ ëª…ë ¹ì–´ë§Œ (bd ready / bd update / bd close ìˆ˜ì¤€)\n- bd lifecycle ìƒì„¸ ê·œì¹™ì€ issuetracking.mdë¡œ ì´ë™\n- .claude/rules/ íŒŒì¼ì€ Claude Codeê°€ ìë™ ë¡œë“œ\n- auto-deploy on push to dev ì •ë³´ deploy.mdì— ì¶”ê°€\n- AGENTS.mdëŠ” CLAUDE.md ì°¸ì¡° 1ì¤„ë¡œ ì¶•ì†Œ\n\n## Acceptance Criteria\n- CLAUDE.md \u003c 100ì¤„\n- .claude/rules/issuetracking.md ì¡´ì¬, bd lifecycle ì „ì²´ ê·œì¹™ í¬í•¨\n- .claude/rules/build.md ì¡´ì¬, dev/test commands í¬í•¨\n- .claude/rules/deploy.md ì¡´ì¬, env vars + deploy ë°©ë²• í¬í•¨\n- AGENTS.md = 1ì¤„ (See CLAUDE.md)\n- ê¸°ì¡´ CLAUDE.mdì˜ ëª¨ë“  ìœ ìš©í•œ ì •ë³´ê°€ ì–´ë”˜ê°€ì— ë³´ì¡´ë¨","status":"closed","priority":0,"issue_type":"task","owner":"icedac@gmail.com","created_at":"2026-02-04T14:48:11.943944+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T14:52:31.923113+09:00","closed_at":"2026-02-04T14:52:31.923113+09:00","close_reason":"CLAUDE.md 73ì¤„(\u003c100), .claude/rules/{issuetracking,build,deploy}.md ìƒì„±, AGENTS.md 1ì¤„, .gitignore !.claude/rules/ ì¶”ê°€. 6 files changed +193 -467. Oracle ë¦¬ë·° ë°˜ì˜. commit 1adffcf","labels":["phase:review"]}
{"id":"somaw-8qx.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: CLAUDE.md 451â†’73ì¤„, AGENTS.md 40â†’1ì¤„, 3ê°œ rules íŒŒì¼ ìƒì„±, .gitignore ì—…ë°ì´íŠ¸","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-04T14:52:31.829898+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T14:52:31.829898+09:00","dependencies":[{"issue_id":"somaw-8qx.1","depends_on_id":"somaw-8qx","type":"parent-child","created_at":"2026-02-04T14:52:31.830612+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-9ik","title":"GitHub Actions ë°°í¬ ì›Œí¬í”Œë¡œìš° ì‘ì„±","description":"main ë¸Œëœì¹˜ push â†’ /opt/soma-work/main ë°°í¬, develop ë¸Œëœì¹˜ push â†’ /opt/soma-work/dev ë°°í¬. ì›Œí¬í”Œë¡œìš°: git pull â†’ npm ci â†’ npm run build â†’ service restart. self-hosted runnerì—ì„œ ì‹¤í–‰. LaunchDaemonì„ í†µí•œ ì„œë¹„ìŠ¤ ì¬ì‹œì‘.","status":"closed","priority":1,"issue_type":"feature","owner":"z@insightquest.io","created_at":"2026-02-03T11:36:47.33323+09:00","created_by":"Z","updated_at":"2026-02-03T12:59:29.964178+09:00","closed_at":"2026-02-03T12:59:29.964178+09:00","close_reason":"deploy.yml: self-hosted runner, mainâ†’/opt/soma-work/main, developâ†’/opt/soma-work/dev, service.sh deploy cmd (no sudo), runner id:2 status:online, bash -n syntax OK","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-9ik","depends_on_id":"somaw-gfh","type":"blocks","created_at":"2026-02-03T11:36:55.69448+09:00","created_by":"Z"},{"issue_id":"somaw-9ik","depends_on_id":"somaw-b17","type":"blocks","created_at":"2026-02-03T11:36:55.768+09:00","created_by":"Z"}]}
{"id":"somaw-9ik.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: deploy.yml created for main/develop branches, service.sh deploy command verified, runner online","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T12:59:29.897807+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.555536+09:00","closed_at":"2026-02-03T21:29:36.555536+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-9ik.1","depends_on_id":"somaw-9ik","type":"parent-child","created_at":"2026-02-03T12:59:29.898278+09:00","created_by":"Z"}]}
{"id":"somaw-9sh","title":"ì„¸ì…˜ ì´ˆê¸°í™” ì‹œ ìœ ì €ì—ê²Œ ìì„¸í•œ ë¡œê·¸ ì•Œë¦¼","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T20:01:26.227917+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.241234+09:00","closed_at":"2026-01-30T20:04:18.673551+09:00","close_reason":"new-handler.tsì—ì„œ ì„¸ì…˜ ë¦¬ì…‹ ì‹œ ìì„¸í•œ ì´ˆê¸°í™”/ìœ ì§€ í•­ëª© í‘œì‹œ","comments":[{"id":15,"issue_id":"somaw-9sh","author":"Z","text":"Review evidence: commit 30c1dff - feat(slack): distinguish system messages with zap reaction. new-handler.ts shows detailed session reset log listing cleared/preserved items to user.","created_at":"2026-02-03T02:09:10Z"}]}
{"id":"somaw-9v1","title":"ì±„ë„ ì´ë™ ì‹œ ìŠ¤ë ˆë“œ ì¤‘ë³µ ìƒì„± ë° workflow ë©”ì‹œì§€ ë¯¸ì‚­ì œ","description":"## í˜„ìƒ\n- ì˜ëª»ëœ ì±„ë„ì—ì„œ PR ë§í¬ ìš”ì²­ í›„ ì´ë™ í´ë¦­ ì‹œ ëŒ€ìƒ ì±„ë„ì— ìŠ¤ë ˆë“œê°€ 2ê°œ ìƒì„±ë¨.\n- ì›ë³¸ ìŠ¤ë ˆë“œì— ë‚¨ì•„ ìˆë˜ workflow ê²°ì • ë˜ëŠ” dispatch ë©”ì‹œì§€ê°€ ì‚­ì œë˜ì§€ ì•ŠìŒ. í˜„ì¬ëŠ” ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ ì•ˆë‚´ë§Œ ì‚­ì œë¨.\n\n## ì¬í˜„\n1. PR ë§í¬ë¥¼ ì˜ëª»ëœ ì±„ë„ì—ì„œ ë³´ëƒ„\n2. ë¼ìš°íŒ… ì•ˆë‚´ ë©”ì‹œì§€ì—ì„œ ì´ë™ í´ë¦­\n3. ëŒ€ìƒ ì±„ë„ì— ë´‡ì´ ìŠ¤ë ˆë“œ ë£¨íŠ¸ ìƒì„±\n4. SessionInitializerê°€ PR ë§í¬ë¥¼ ê°ì§€í•˜ê³  correct-channel ê²½ë¡œì—ì„œ ë˜ ë‹¤ë¥¸ ë´‡ ìŠ¤ë ˆë“œ ìƒì„±\n5. ê²°ê³¼ì ìœ¼ë¡œ ìŠ¤ë ˆë“œ 2ê°œì™€ ì›ë³¸ ìŠ¤ë ˆë“œì— workflow ê²°ì • ë©”ì‹œì§€ ì”ì¡´\n\n## ê¸°ëŒ€\n- ì´ë™ í›„ ëŒ€ìƒ ì±„ë„ì— ìŠ¤ë ˆë“œ 1ê°œë§Œ ì¡´ì¬\n- ì›ë³¸ ìŠ¤ë ˆë“œì— ë‚¨ì•„ ìˆë˜ workflow ê²°ì • ë˜ëŠ” dispatch ë©”ì‹œì§€ê¹Œì§€ ì •ë¦¬\n\n## ì¶”ì • ì›ì¸\n- ChannelRouteActionHandlerê°€ ëŒ€ìƒ ì±„ë„ì— ìŠ¤ë ˆë“œ ë£¨íŠ¸ë¥¼ ì„ ìƒì„±í•œ ë’¤ synthetic eventë¡œ messageHandler í˜¸ì¶œ\n- SessionInitializerì—ì„œ PR ë§í¬ë¥¼ correct-channelë¡œ íŒë‹¨í•˜ë©´ ìë™ìœ¼ë¡œ ë´‡ ìŠ¤ë ˆë“œë¥¼ ì¶”ê°€ ìƒì„±\n- ì´ë™ ì²˜ë¦¬ ì‹œ ì‚­ì œ ëŒ€ìƒì´ advisory ë©”ì‹œì§€ 1ê°œë¡œ í•œì •ë¨\n\n## ê´€ë ¨ ì½”ë“œ\n- src/slack/actions/channel-route-action-handler.ts\n- src/slack/pipeline/session-initializer.ts\n- src/slack/slack-api-helper.ts","status":"closed","priority":1,"issue_type":"bug","owner":"z@insightquest.io","created_at":"2026-02-04T00:46:53+09:00","created_by":"Z","updated_at":"2026-02-04T01:28:15.704492+09:00","closed_at":"2026-02-04T01:06:49+09:00"}
{"id":"somaw-a4c","title":"Bug: renew ì‹¤íŒ¨ - save_result íŒŒì„œê°€ AI ì¶œë ¥ ë³€í˜•ì— ì·¨ì•½","description":"## ì¦ìƒ\nrenew ëª…ë ¹ ì‹¤í–‰ ì‹œ \"Save did not complete as expected. Renew cancelled.\" ì—ëŸ¬ë¡œ ì‹¤íŒ¨.\n\n## ì›ì¸ ë¶„ì„\nstream-executor.tsì˜ parseSaveResult()ì™€ buildRenewContinuation()ì´ save ìŠ¤í‚¬ì˜ AI ì¶œë ¥ì„ íŒŒì‹±í•  ë•Œ, AIê°€ ìŠ¤í‚¤ë§ˆë¥¼ ì •í™•íˆ ì•ˆ ë”°ë¥´ë©´ ì‹¤íŒ¨í•¨.\n\n### ì‹¤ì œ AI ì¶œë ¥ (ì‹¤íŒ¨ ì¼€ì´ìŠ¤)\n```json\n{\"save_result\": {\"status\": \"saved\", \"save_id\": \"20260203_111140\", \"path\": \"...\", \"title\": \"...\", \"summary\": \"...\"}}\n```\n\n### ê¸°ëŒ€í•˜ëŠ” ìŠ¤í‚¤ë§ˆ\n```json\n{\"save_result\": {\"success\": true, \"id\": \"...\", \"files\": [{\"name\": \"context.md\", \"content\": \"...\"}]}}\n```\n\n### ë¶ˆì¼ì¹˜ 3ê°€ì§€\n1. `success: true` ëŒ€ì‹  `status: \"saved\"` â†’ saveResult.successê°€ undefined â†’ falsy â†’ ì‹¤íŒ¨ ì²˜ë¦¬ (line 561)\n2. `files` ë°°ì—´ ì—†ìŒ â†’ \"no files returned\" ì—ëŸ¬ (line 573)\n3. `id` ëŒ€ì‹  `save_id` ì‚¬ìš©\n\n## ì˜í–¥\n- renew ëª…ë ¹ì´ ì‚¬ì‹¤ìƒ ì‘ë™ ë¶ˆê°€\n- AIê°€ ìŠ¤í‚¬ JSON ìŠ¤í‚¤ë§ˆë¥¼ 100% ì •í™•íˆ ë”°ë¥´ëŠ” ê²ƒì€ ë³´ì¥í•  ìˆ˜ ì—†ìŒ\n\n## ìˆ˜ì • ë°©í–¥\nparseSaveResult()ë¥¼ ê´€ëŒ€í•˜ê²Œ(lenient) ìˆ˜ì •:\n- success íŒë³„: `success === true` OR `status === \"saved\"` OR `status === \"success\"`\n- id ì¶”ì¶œ: `id` OR `save_id`\n- files ë¯¸í¬í•¨ ì‹œ: save_id/pathì—ì„œ íŒŒì¼ ì§ì ‘ ì½ê¸°ë¡œ í´ë°±\n- ë˜ëŠ” saveë¥¼ AI ì˜ì¡´ ì—†ì´ ì½”ë“œë¡œ ì§ì ‘ êµ¬í˜„ (ê·¼ë³¸ í•´ê²°)\n\n## ê´€ë ¨ ì½”ë“œ\n- src/slack/pipeline/stream-executor.ts:540-654 (buildRenewContinuation, parseSaveResult)\n- src/slack/commands/renew-handler.ts (renew ì§„ì…ì )\n- src/local/.commands-body/save.md (ìŠ¤í‚¬ ìŠ¤í‚¤ë§ˆ ì •ì˜)\n\n## Steps to Reproduce\n1. renew ëª…ë ¹ì„ ì‹¤í–‰í•œë‹¤.\n2. save ìŠ¤í‚¬ì´ `status: \"saved\"`/`save_id` í˜•íƒœë¡œ ì‘ë‹µí•˜ë„ë¡ ìœ ë„í•˜ê±°ë‚˜ ì¬í˜„í•œë‹¤.\n3. \"Save did not complete as expected. Renew cancelled.\" ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.\n\n## Acceptance Criteria\n- parseSaveResultê°€ `status: \"saved\"` ë˜ëŠ” `status: \"success\"`ë„ ì„±ê³µìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.\n- idëŠ” `id` ë˜ëŠ” `save_id`ì—ì„œ ì •ìƒ ì¶”ì¶œëœë‹¤.\n- filesê°€ ì—†ìœ¼ë©´ save_id/path ê¸°ë°˜ í´ë°±ìœ¼ë¡œ renewê°€ ì™„ë£Œëœë‹¤.\n","status":"closed","priority":1,"issue_type":"bug","owner":"z@insightquest.io","created_at":"2026-02-03T11:15:51.925248+09:00","created_by":"Z","updated_at":"2026-02-04T01:39:04.583651+09:00","closed_at":"2026-02-04T01:39:04.583651+09:00","close_reason":"tsc clean, vitest 423 passed (6 pre-existing failures in context-handler.test.ts - mock issue), 1 file +77 lines","labels":["phase:review"]}
{"id":"somaw-a4c.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: lenient save_result parsing: success/status/id/save_id normalization + file read fallback","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-04T01:38:59.440161+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T01:45:59.008714+09:00","closed_at":"2026-02-04T01:45:59.008714+09:00","close_reason":"parent task somaw-a4c already closed","dependencies":[{"issue_id":"somaw-a4c.1","depends_on_id":"somaw-a4c","type":"parent-child","created_at":"2026-02-04T01:38:59.440733+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-a8o","title":"Branch-aware config/data path resolution","status":"closed","priority":2,"issue_type":"feature","owner":"z@insightquest.io","created_at":"2026-02-03T16:45:19.222957+09:00","created_by":"Z","updated_at":"2026-02-04T01:41:56.651826+09:00","closed_at":"2026-02-04T01:41:56.651826+09:00","close_reason":"Branch-aware path resolution implemented in env-paths.ts, integrated in 10 files, IS_DEV/DATA_DIR/MCP_CONFIG_FILE/SYSTEM_PROMPT_FILE exports","labels":["phase:review"]}
{"id":"somaw-a8o.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: êµ¬í˜„ ì™„ë£Œ: env-paths.ts ì‹ ê·œ ëª¨ë“ˆ + 11ê°œ íŒŒì¼ ìˆ˜ì •. tsc --noEmit clean, vitest 423 passed (6 failed = pre-existing context-handler.test.ts)","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T16:47:45.974924+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.4112+09:00","closed_at":"2026-02-03T21:29:36.4112+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-a8o.1","depends_on_id":"somaw-a8o","type":"parent-child","created_at":"2026-02-03T16:47:45.975914+09:00","created_by":"Z"}]}
{"id":"somaw-acw","title":"Handle onboarding in PromptBuilder.buildSystemPrompt()","description":"PromptBuilderê°€ workflow='onboarding'ì¼ ë•Œ onboarding.promptë¥¼ ìë™ ë¡œë“œí•˜ë„ë¡ í™•ì¸. í˜„ì¬ loadWorkflowPrompt()ê°€ íŒŒì¼ëª… ê¸°ë°˜ìœ¼ë¡œ ë™ì  ë¡œë“œí•˜ë¯€ë¡œ ë³„ë„ ìˆ˜ì • ë¶ˆí•„ìš”í•  ìˆ˜ ìˆìŒ. í…ŒìŠ¤íŠ¸í•˜ì—¬ í™•ì¸.\n\nì¶”ê°€ë¡œ onboarding ì„¸ì…˜ì—ì„œëŠ” personaë¥¼ ì ìš©í•˜ì§€ ì•Šê±°ë‚˜, ê¸°ë³¸ personaë§Œ ì ìš©í•˜ëŠ” ê²ƒì´ ë‚˜ì„ ìˆ˜ ìˆìŒ (ì•„ì§ ìœ ì €ê°€ personaë¥¼ ì„ íƒí•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ).\n\në³€ê²½ íŒŒì¼: src/prompt-builder.ts (í•„ìš”ì‹œ)\n\n## Acceptance Criteria\n- buildSystemPrompt(userId, 'onboarding')ê°€ onboarding.prompt ë‚´ìš©ì„ ë°˜í™˜í•œë‹¤.\n","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T13:07:59.430382+09:00","created_by":"Z","updated_at":"2026-02-03T21:46:59.243639+09:00","closed_at":"2026-02-03T21:46:59.243639+09:00","close_reason":"Verified via manual test: buildSystemPrompt(userId, 'onboarding') returns 8608 chars with onboarding.prompt content and default persona. No code changes needed - existing loadWorkflowPrompt handles it.","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-acw","depends_on_id":"somaw-oz9","type":"blocks","created_at":"2026-02-03T13:08:28.342464+09:00","created_by":"Z"}]}
{"id":"somaw-acw.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: Verified buildSystemPrompt(userId, 'onboarding') works correctly. Returns 8608 chars including onboarding.prompt + default persona. No code changes needed.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T21:46:53.890951+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T00:51:34.937183+09:00","closed_at":"2026-02-04T00:51:34.937183+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-acw.1","depends_on_id":"somaw-acw","type":"parent-child","created_at":"2026-02-03T21:46:53.891543+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-alb","title":"Fix permission-mcp-server .ts extension hardcode causing production crash","description":"## Bug\n\nProductionì—ì„œ ëª¨ë“  ì‚¬ìš©ì ì¿¼ë¦¬ê°€ 'Claude Code process exited with code 1'ìœ¼ë¡œ ì‹¤íŒ¨í•¨.\n\n## Root Cause\n\n`src/mcp-config-builder.ts:113`ì—ì„œ permission-mcp-serverì˜ íŒŒì¼ ê²½ë¡œë¥¼ `.ts` í™•ì¥ìë¡œ í•˜ë“œì½”ë”©:\n```typescript\nargs: ['tsx', path.join(__dirname, 'permission-mcp-server.ts')],\n```\n\n- Dev mode (`npx tsx src/index.ts`): `__dirname` = `src/` â†’ `permission-mcp-server.ts` ì¡´ì¬ â†’ ì •ìƒ\n- Production (`node dist/index.js`): `__dirname` = `dist/` â†’ `permission-mcp-server.js`ë§Œ ì¡´ì¬ â†’ **íŒŒì¼ ë¯¸ë°œê²¬ â†’ crash**\n\n## Impact\n\n- ëª¨ë“  slackContextê°€ ìˆëŠ” ì¿¼ë¦¬ (= ëª¨ë“  ì‹¤ì‚¬ìš©ì ìš”ì²­) ì‹¤íŒ¨\n- Dispatch (haiku one-shot)ë§Œ ì„±ê³µ (MCP ì„œë²„ ë¯¸ì‚¬ìš©)\n- 2026-02-03 ë°°í¬ ì´í›„ ì§€ì†\n\n## Fix\n\n`__filename` í™•ì¥ì ê¸°ë°˜ìœ¼ë¡œ ë™ì  ê°ì§€:\n```typescript\nconst ext = __filename.endsWith('.ts') ? '.ts' : '.js';\nargs: ['tsx', path.join(__dirname, `permission-mcp-server${ext}`)],\n```\n\n## Verification\n\nì„œë²„ì—ì„œ SDK í…ŒìŠ¤íŠ¸ë¡œ í™•ì¸ ì™„ë£Œ:\n- `.ts` â†’ ERROR: Claude Code process exited with code 1\n- `.js` â†’ SUCCESS\n\n## Files\n\n- `src/mcp-config-builder.ts:113` (1ì¤„ ë³€ê²½)","status":"closed","priority":0,"issue_type":"bug","owner":"icedac@gmail.com","created_at":"2026-02-04T14:23:15.475729+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T14:25:47.214108+09:00","closed_at":"2026-02-04T14:25:47.214108+09:00","close_reason":"tsc clean, vitest 452 passed (0 new failures, 6 pre-existing), ì„œë²„ SDK ì¬í˜„ í…ŒìŠ¤íŠ¸ ê²€ì¦ ì™„ë£Œ (.tsâ†’crash, .jsâ†’success), 1 file +1 -1 line, commit 3bf83f5","labels":["phase:review","production-crash"]}
{"id":"somaw-alb.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: 1íŒŒì¼ 1ì¤„ ìˆ˜ì •. ì„œë²„ SDK í…ŒìŠ¤íŠ¸ë¡œ .tsâ†’ERROR, .jsâ†’SUCCESS í™•ì¸. tsc clean, vitest 452 passed (6 pre-existing failures)","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-04T14:25:42.329256+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T14:25:42.329256+09:00","dependencies":[{"issue_id":"somaw-alb.1","depends_on_id":"somaw-alb","type":"parent-child","created_at":"2026-02-04T14:25:42.331216+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-asx","title":"context ë¬¸ë§¥ì‚¬ìš©ëŸ‰ ë¦¬ì…‹ ì•ˆë˜ê³  0%ê¹Œì§€ ê° ë²„ê·¸ ìˆ˜ì •","status":"closed","priority":1,"issue_type":"bug","owner":"z@insightquest.io","created_at":"2026-01-30T20:01:29.1125+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.237988+09:00","closed_at":"2026-01-30T20:03:47.435962+09:00","close_reason":"cleanupWithReaction() ë©”ì„œë“œ ì¶”ê°€, setOriginalMessage()ì—ì„œ ì´ëª¨ì§€ ë³´ì¡´ ë¡œì§ ì œê±°","comments":[{"id":16,"issue_id":"somaw-asx","author":"Z","text":"Review evidence: commit 30c1dff - feat(slack): distinguish system messages with zap reaction. session.usage cleared on reset in session-registry.ts to fix context percentage not resetting to 0.","created_at":"2026-02-03T02:09:09Z"}]}
{"id":"somaw-ayr","title":"Write tests for AssistantStatusManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:37:04.03802+09:00","updated_at":"2026-02-03T11:37:48.242277+09:00","closed_at":"2026-01-30T14:41:55.547525+09:00","close_reason":"Closed","comments":[{"id":17,"issue_id":"somaw-ayr","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. assistant-status-manager.test.ts (101 lines) testing status mapping and lifecycle.","created_at":"2026-02-03T02:09:30Z"}]}
{"id":"somaw-b05","title":"Step 3d: Add setStatus to session-initializer.ts for dispatch","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:18.62379+09:00","updated_at":"2026-02-03T11:37:48.243299+09:00","closed_at":"2026-01-30T14:40:57.087733+09:00","close_reason":"Closed","comments":[{"id":18,"issue_id":"somaw-b05","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. session-initializer.ts sets status on dispatch workflow start.","created_at":"2026-02-03T02:09:20Z"}]}
{"id":"somaw-b17","title":"ë°°í¬ ë””ë ‰í† ë¦¬ êµ¬ì¡° ì„¤ì •: /opt/soma-work/{main,dev}","description":"/opt/soma-work/mainê³¼ /opt/soma-work/dev ë””ë ‰í† ë¦¬ ìƒì„±. ê°ê° .env, .system.prompt ë³µì‚¬, ./data ì‹¬ë³¼ë¦­ ë§í¬ ë˜ëŠ” ë³µì‚¬. LaunchDaemon plist íŒŒì¼ 2ê°œ ìƒì„± (main/dev ê°ê°).","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T11:36:45.27782+09:00","created_by":"Z","updated_at":"2026-02-03T12:46:39.101332+09:00","closed_at":"2026-02-03T12:46:39.101332+09:00","close_reason":"Directory structure /opt/soma-work/{main,dev} implemented via service.sh setup command (creates dirs, clones repo, npm ci, npm build, checks .env/.system.prompt), deploy.yml references both paths","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-b17","depends_on_id":"somaw-6m0","type":"blocks","created_at":"2026-02-03T11:36:55.620358+09:00","created_by":"Z"}]}
{"id":"somaw-b17.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: Directory structure /opt/soma-work/{main,dev} defined in service.sh setup command, deploy workflow references both paths","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T12:46:32.173624+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.584773+09:00","closed_at":"2026-02-03T21:29:36.584773+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-b17.1","depends_on_id":"somaw-b17","type":"parent-child","created_at":"2026-02-03T12:46:32.175409+09:00","created_by":"Z"}]}
{"id":"somaw-dgp","title":"Write tests for SessionLinkDirectiveHandler","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T18:41:33.829811+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.241429+09:00","closed_at":"2026-01-30T18:44:24.834188+09:00","close_reason":"Closed","comments":[{"id":19,"issue_id":"somaw-dgp","author":"Z","text":"Review evidence: commit b287278 - feat(directives): add session_links JSON directive support. session-link-directive.test.ts (244 lines) covering parsing, provider detection, label extraction.","created_at":"2026-02-03T02:09:53Z"}]}
{"id":"somaw-dm9","title":"ì„¸ì…˜ ëª©ë¡: Jira ì´ìŠˆ/PR ì œëª© í‘œì‹œ","description":"ì„¸ì…˜ ëª©ë¡ì—ì„œ ì—°ê²°ëœ Jira ì´ìŠˆê°€ ìˆìœ¼ë©´ ì´ìŠˆ ì œëª© í‘œì‹œ (ê¸´ ê²½ìš° truncate). ì´ìŠˆ ì—†ê³  PRë§Œ ìˆìœ¼ë©´ PR ì œëª© í‘œì‹œ. session-manager.tsì˜ formatUserSessionsBlocks()ì—ì„œ ì„¸ì…˜ì˜ links ë°ì´í„° í™œìš©í•˜ì—¬ Jira API/GitHub APIë¡œ ì œëª© ì¡°íšŒ í›„ í‘œì‹œ. ìºì‹± ê³ ë ¤.","design":"## êµ¬í˜„ ê³„íš: Jira ì´ìŠˆ/PR ì œëª© í‘œì‹œ\n\n### ë°ì´í„° ëª¨ë¸ (types.ts)\n- SessionLinkì— title?: string ì¶”ê°€\n\n### ì‹ ê·œ íŒŒì¼: link-metadata-fetcher.ts\n- fetchTitleIfMissing(link): title ì—†ìœ¼ë©´ APIë¡œ ì¡°íšŒ\n- fetchJiraTitle(link): Jira REST API (fields=summary)\n- fetchGitHubPRTitle(link): GitHub API /pulls/{number}\n- fetchGitHubIssueTitle(link): GitHub API /issues/{number}\n- truncateTitle(title, maxLen=40): ê¸¸ë©´ truncate\n- In-memory ìºì‹œ (5ë¶„ TTL)\n\n### ì¸ì¦\n- Jira: JIRA_BASE_URL, JIRA_EMAIL, JIRA_API_TOKEN í™˜ê²½ë³€ìˆ˜\n- GitHub: GITHUB_TOKEN í™˜ê²½ë³€ìˆ˜ (ê¸°ì¡´)\n\n### session-manager.ts formatLinksLine()\n- asyncë¡œ ë³€ê²½\n- issueê°€ ìˆìœ¼ë©´ title í‘œì‹œ: ğŸ« PTN-123: ë¡œê·¸ì¸ ë¦¬íŒ©í† ë§\n- issue ì—†ê³  PRë§Œ ìˆìœ¼ë©´ PR title í‘œì‹œ: ğŸ”€ PR #42: feat: OAuth\n\n### í‘œì‹œ ìš°ì„ ìˆœìœ„\n1. Jira ì´ìŠˆ ì œëª© (ìˆìœ¼ë©´)\n2. PR ì œëª© (ì´ìŠˆ ì—†ì„ ë•Œë§Œ)\n\n### ë³€ê²½ íŒŒì¼ (3ê°œ)\ntypes.ts, link-metadata-fetcher.ts (ì‹ ê·œ), session-manager.ts","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:28.917843+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.240015+09:00","closed_at":"2026-02-02T18:59:25.155654+09:00","close_reason":"Implemented Jira/PR title display: Added title field to SessionLink type, created link-metadata-fetcher.ts with GitHub/Jira API integration and 5-min TTL cache, updated formatLinksLine() to async with title fetching. Issue title takes priority over PR title.","comments":[{"id":20,"issue_id":"somaw-dm9","author":"Z","text":"Review evidence: commit 305e65b - feat: add activity state tracking, link titles, and repo grouping. link-metadata-fetcher.ts created (117 lines) with GitHub/Jira API integration, 5-min TTL cache for titles.","created_at":"2026-02-03T02:08:53Z"}]}
{"id":"somaw-dtv","title":"Setup wizard: Step 12 Verification + service.sh Node path fix","description":"Step 12: ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸, runner ì˜¨ë¼ì¸ í™•ì¸, ë¡œê·¸ ì²´í¬. ì¶”ê°€: service.shì˜ í•˜ë“œì½”ë”©ëœ NODE_PATHë¥¼ ë™ì  ê°ì§€(which node)ë¡œ êµì²´.","status":"closed","priority":0,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T15:15:01.282973+09:00","created_by":"Z","updated_at":"2026-02-03T15:23:25.911695+09:00","closed_at":"2026-02-03T15:23:25.911695+09:00","close_reason":"vitest 423 passed (6 pre-existing), all bash -n syntax checks pass, --status tested via symlink, 17 new files +1548 lines, bash 3.2 compatible","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-dtv","depends_on_id":"somaw-3fc","type":"blocks","created_at":"2026-02-03T15:15:13.342139+09:00","created_by":"Z"}]}
{"id":"somaw-dtv.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: 12-verify.sh (health check, Node path fix), service.sh NODE_PATH now uses dynamic which node","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T15:23:18.780598+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.440105+09:00","closed_at":"2026-02-03T21:29:36.440105+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-dtv.1","depends_on_id":"somaw-dtv","type":"parent-child","created_at":"2026-02-03T15:23:18.783034+09:00","created_by":"Z"}]}
{"id":"somaw-e9h","title":"Step 3a: Wire AssistantStatusManager into SlackHandler","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:13.276327+09:00","updated_at":"2026-02-03T11:37:48.243905+09:00","closed_at":"2026-01-30T14:39:04.404979+09:00","close_reason":"Closed","comments":[{"id":21,"issue_id":"somaw-e9h","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. Wired into slack-handler.ts constructor, passed to pipeline components.","created_at":"2026-02-03T02:09:19Z"}]}
{"id":"somaw-fae","title":"Update workflow prompts with response_directive","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T18:41:33.643806+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.241811+09:00","closed_at":"2026-01-30T18:43:46.123785+09:00","close_reason":"Closed","comments":[{"id":22,"issue_id":"somaw-fae","author":"Z","text":"Review evidence: commit b287278 - feat(directives): add session_links JSON directive support. jira-create-pr.prompt and pr-fix-and-update.prompt updated with JSON format. 8 files total, 511 new lines.","created_at":"2026-02-03T02:09:56Z"}]}
{"id":"somaw-fga","title":"Review and debug channel routing feature (ì±„ë„ ì´ë™)","description":"Channel routing feature is currently broken. Need to: 1) Review the entire channel routing flow, 2) Add comprehensive logging for debugging, 3) Identify root cause of failure. Key files: channel-registry.ts, channel-route-action-handler.ts, session-initializer.ts, dispatch-service.ts","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","created_at":"2026-02-04T15:23:04.976319+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T15:28:39.893333+09:00","closed_at":"2026-02-04T15:28:39.893333+09:00","close_reason":"tsc clean, vitest 458 passed (0 new), 4 files +264/-42 lines, commit 88d5212 pushed to dev. Added comprehensive logging to channel-registry.ts (scan, register, checkRepoChannelMatch, parseRepos, rebuildRepoIndex), session-initializer.ts (routing check entry/exit/decisions), channel-route-action-handler.ts (handleMove/handleStop full flow), dispatch-service.ts (link extraction). Self-reviewed.","labels":["phase:review"]}
{"id":"somaw-fga.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: Comprehensive logging added to 4 files: channel-registry.ts, session-initializer.ts, channel-route-action-handler.ts, dispatch-service.ts. tsc clean, vitest 458 passed. Commit 88d5212 pushed to dev.","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-04T15:28:24.322718+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T15:28:24.322718+09:00","dependencies":[{"issue_id":"somaw-fga.1","depends_on_id":"somaw-fga","type":"parent-child","created_at":"2026-02-04T15:28:24.324906+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-gfh","title":"GitHub Actions self-hosted runner ì„¤ì¹˜ ë° ì„¤ì •","description":"Mac Miniì— GitHub Actions self-hosted runner ì„¤ì¹˜. main/dev ë¸Œëœì¹˜ë³„ ë°°í¬ë¥¼ ìœ„í•´ ë¼ë²¨ ì„¤ì •. runnerë¥¼ LaunchDaemonìœ¼ë¡œ ë“±ë¡í•˜ì—¬ ë¶€íŒ… ì‹œ ìë™ ì‹œì‘.","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T11:36:42.316883+09:00","created_by":"Z","updated_at":"2026-02-03T12:47:59.346975+09:00","closed_at":"2026-02-03T12:47:59.346975+09:00","close_reason":"Runner registered on GitHub (id:2, status:online), LaunchAgent auto-start, labels: self-hosted/macOS/ARM64/soma-work, gh api verified","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-gfh","depends_on_id":"somaw-6m0","type":"blocks","created_at":"2026-02-03T11:36:55.545982+09:00","created_by":"Z"}]}
{"id":"somaw-gfh.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: Runner installed at ~/actions-runner, configured as LaunchAgent, labels: self-hosted,macOS,ARM64,soma-work, status: online","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T12:47:54.08906+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.570185+09:00","closed_at":"2026-02-03T21:29:36.570185+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-gfh.1","depends_on_id":"somaw-gfh","type":"parent-child","created_at":"2026-02-03T12:47:54.093641+09:00","created_by":"Z"}]}
{"id":"somaw-gvx","title":"Rewrite deploy.yml: build in runner, rsync to /opt","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T17:06:19.341169+09:00","created_by":"Z","updated_at":"2026-02-03T17:08:27.184678+09:00","closed_at":"2026-02-03T17:08:27.184678+09:00","close_reason":"tsc clean, vitest 423 passed (6 pre-existing failures), 4 files changed + 2 new (deploy.yml rewrite, Makefile)","labels":["phase:review"]}
{"id":"somaw-gvx.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: deploy.yml: checkoutâ†’buildâ†’rsyncâ†’install, concurrency control, dev branch trigger","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T17:07:02.483972+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.38242+09:00","closed_at":"2026-02-03T21:29:36.38242+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-gvx.1","depends_on_id":"somaw-gvx","type":"parent-child","created_at":"2026-02-03T17:07:02.484932+09:00","created_by":"Z"}]}
{"id":"somaw-gxu","title":"Add UserSettingsStore.ensureUserExists() method","description":"UserSettingsStoreì— ensureUserExists(userId: string, slackName?: string) ë©”ì„œë“œ ì¶”ê°€. getUserSettings(userId)ê°€ undefinedì¼ ë•Œ ê¸°ë³¸ ì„¤ì • ë ˆì½”ë“œë¥¼ ìƒì„±í•˜ì—¬ ì €ì¥.\n\nê¸°ë³¸ê°’: defaultDirectory='', bypassPermission=false, persona='default', defaultModel=DEFAULT_MODEL\nslackNameì´ ì œê³µë˜ë©´ í•¨ê»˜ ì €ì¥.\n\nì´ ë©”ì„œë“œëŠ” ì˜¨ë³´ë”© ì™„ë£Œ/ìŠ¤í‚µ ì‹œ í˜¸ì¶œë˜ì–´ 'ì´ë¯¸ ì˜¨ë³´ë”©ë¨' ìƒíƒœë¥¼ ê¸°ë¡.\n\në³€ê²½ íŒŒì¼: src/user-settings-store.ts\n\n## Acceptance Criteria\n- ensureUserExists í˜¸ì¶œ í›„ getUserSettingsê°€ undefinedê°€ ì•„ë‹ˆì–´ì•¼ í•œë‹¤.\n- slackNameì´ ì œê³µë˜ë©´ í•¨ê»˜ ì €ì¥ëœë‹¤.\n","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T13:07:46.562741+09:00","created_by":"Z","updated_at":"2026-02-03T21:27:56.377126+09:00","closed_at":"2026-02-03T21:24:50.982873+09:00","close_reason":"tsc clean, vitest 423 passed (0 new failures), self-reviewed code changes. Modified user-settings-store.ts (+39 lines): ensureUserExists() method added.","labels":["phase:review"]}
{"id":"somaw-gxu.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: Added ensureUserExists(userId, slackName?) method to UserSettingsStore. Creates default settings record if user doesn't exist. tsc clean, vitest 423 passed (0 new failures), 1 file +40 lines.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T21:24:28.435845+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-03T21:29:36.340525+09:00","closed_at":"2026-02-03T21:29:36.340525+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-gxu.1","depends_on_id":"somaw-gxu","type":"parent-child","created_at":"2026-02-03T21:24:28.436558+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-hl0","title":"ì„¸ì…˜ ëª©ë¡: ë¦¬í”„ë ˆì‹œ ë²„íŠ¼ ì¶”ê°€","description":"ì„¸ì…˜ ëª©ë¡ ìƒë‹¨ì— ë¦¬í”„ë ˆì‹œ ë²„íŠ¼ ì¶”ê°€. ëˆ„ë¥´ë©´ ì„¸ì…˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ì¶œë ¥. session-manager.tsì˜ formatUserSessionsBlocks()ì— Slack Block Kit ë²„íŠ¼ ì¶”ê°€, action-handlersì—ì„œ ë¦¬í”„ë ˆì‹œ ì•¡ì…˜ í•¸ë“¤ëŸ¬ êµ¬í˜„.","design":"## êµ¬í˜„ ê³„íš: ë¦¬í”„ë ˆì‹œ ë²„íŠ¼\n\n### session-manager.ts formatUserSessionsBlocks()\n- í•˜ë‹¨ divider ë’¤ì— actions ë¸”ë¡ ì¶”ê°€ (showControls=trueì¼ ë•Œë§Œ)\n- ë²„íŠ¼: {type:'button', text:'ğŸ”„ ìƒˆë¡œê³ ì¹¨', action_id:'refresh_sessions'}\n\n### session-action-handler.ts\n- handleRefreshSessions(body, respond): userId ì¶”ì¶œ â†’ formatUserSessionsBlocks(userId, {showControls:true}) â†’ respond({replace_original:true})\n\n### actions/index.ts\n- app.action('refresh_sessions', ...) ë“±ë¡\n\n### Block Kit êµ¬ì¡°\nheader â†’ divider â†’ sessions... â†’ divider â†’ [actions: ğŸ”„ ìƒˆë¡œê³ ì¹¨] â†’ context\n\n### Edge Cases\n- ëª¨ë“  ì„¸ì…˜ ì¢…ë£Œ í›„ ë¦¬í”„ë ˆì‹œ: ë¹ˆ ëª©ë¡ ë©”ì‹œì§€ í‘œì‹œ\n- ephemeral ë©”ì‹œì§€ 30ë¶„ ë§Œë£Œ: ë§Œë£Œ ì „ì—ë§Œ ë™ì‘\n- public ëª¨ë“œ: showControls=false â†’ ë²„íŠ¼ ë¯¸í‘œì‹œ\n\n### ë³€ê²½ íŒŒì¼ (3ê°œ)\nsession-manager.ts, session-action-handler.ts, actions/index.ts","status":"closed","priority":3,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:25.806247+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.244751+09:00","closed_at":"2026-02-02T18:51:47.559295+09:00","close_reason":"Implemented in commit 616d058","comments":[{"id":23,"issue_id":"somaw-hl0","author":"Z","text":"Review evidence: commit 616d058 - feat: add lifecycle emojis, refresh button, remove workDir. Refresh button added to session list UI in actions/index.ts and session-action-handler.ts.","created_at":"2026-02-03T02:08:40Z"}]}
{"id":"somaw-ib3","title":"ì„¸ì…˜ ëª©ë¡: PR ë¨¸ì§€ ë²„íŠ¼ í‘œì‹œ","description":"PRì´ ë¨¸ì§€ ê°€ëŠ¥í•œ ìƒíƒœ(checks passed, approved, no conflicts)ì´ë©´ ë¨¸ì§€ ë²„íŠ¼ í‘œì‹œ. ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ ì„¸ì…˜ì˜ AIì—ê²Œ PR ë¨¸ì§€ë¥¼ ìš”ì²­. GitHub APIë¡œ mergeable ìƒíƒœ í™•ì¸, action-handlerì—ì„œ ë¨¸ì§€ ì•¡ì…˜ êµ¬í˜„.","design":"## êµ¬í˜„ ê³„íš: PR ë¨¸ì§€ ë²„íŠ¼\n\n### link-metadata-fetcher.ts\n- GitHubPRDetails íƒ€ì…: {state, merged, mergeable, mergeable_state, draft, head, base}\n- fetchGitHubPRDetails(link): GitHub API /pulls/{number} ìƒì„¸ ì •ë³´\n- isPRMergeable(details): open + !draft + !merged + mergeable=true + mergeable_state='clean'\n- prDetailsCache: 5ë¶„ TTL\n\n### session-manager.ts formatUserSessionsBlocks()\n- PRì´ mergeableì¼ ë•Œë§Œ 'ğŸ”€ Merge PR' ë²„íŠ¼ ì¶”ê°€ (style:'primary')\n- Jira transition actions ë¸”ë¡ì— í•©ë¥˜ (5ê°œ ë¯¸ë§Œì´ë©´) ë˜ëŠ” ë³„ë„ actions ë¸”ë¡\n- confirm dialog: sourceâ†’target ë¸Œëœì¹˜ ì •ë³´ í‘œì‹œ\n\n### ì‹ ê·œ: pr-action-handler.ts\n- handleMerge(body, respond):\n  1. valueì—ì„œ sessionKey/prUrl/prLabel/baseBranch/headBranch íŒŒì‹±\n  2. ì„¸ì…˜ ì¡´ì¬ + ì†Œìœ ê¶Œ í™•ì¸\n  3. í•´ë‹¹ ì„¸ì…˜ threadì— ë¨¸ì§€ ìš”ì²­ ë©”ì‹œì§€ ì£¼ì…\n  4. ë©”ì‹œì§€: 'PR ë¨¸ì§€í•´ì£¼ì„¸ìš”. URL, Sourceâ†’Target, squash merge, ë¸Œëœì¹˜ ì‚­ì œ'\n\n### actions/index.ts\n- app.action(/^merge_pr_/, ...) ì •ê·œì‹ ë§¤ì¹­ìœ¼ë¡œ ë“±ë¡\n\n### AI ìœ„ì„ ì„¤ê³„ (Jira ì „í™˜ê³¼ ë™ì¼ íŒ¨í„´)\n- messageHandlerë¡œ ì„¸ì…˜ AIì—ê²Œ ë¨¸ì§€ ìš”ì²­ ì „ë‹¬\n- AIê°€ gh pr merge ë“±ìœ¼ë¡œ ì‹¤í–‰\n\n### ì•ˆì „ì¥ì¹˜\n- confirm dialog í•„ìˆ˜ (ë¨¸ì§€ëŠ” ë˜ëŒë¦¬ê¸° ì–´ë ¤ì›€)\n- mergeable_state!='clean'ì´ë©´ ë²„íŠ¼ ìì²´ ìˆ¨ê¹€\n\n### ë³€ê²½ íŒŒì¼ (4ê°œ)\nlink-metadata-fetcher.ts, session-manager.ts, pr-action-handler.ts (ì‹ ê·œ), actions/index.ts","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:37.15578+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.239013+09:00","closed_at":"2026-02-03T10:31:07.490195+09:00","close_reason":"Implemented Jira transition buttons and PR merge button in session list","dependencies":[{"issue_id":"somaw-ib3","depends_on_id":"somaw-89z","type":"blocks","created_at":"2026-02-02T18:11:53.959706+09:00","created_by":"Z"}],"comments":[{"id":24,"issue_id":"somaw-ib3","author":"Z","text":"Review evidence: commit c9f1c34 - feat: add Jira transition buttons and PR merge button. fetchGitHubPRDetails()+isPRMergeable() in link-metadata-fetcher.ts, pr-action-handler.ts (99 lines), merge button with confirm dialog. 5 files, +491/-2 lines.","created_at":"2026-02-03T02:09:01Z"}]}
{"id":"somaw-in2","title":"Add permission MCP preflight + regression tests","description":"Add a preflight path resolver for permission-mcp-server (.ts/.js) and use it in McpConfigBuilder. Log fallback usage and fail fast with clear error if missing. Add unit tests covering preferred/fallback/missing resolution.\\n\\nAcceptance Criteria:\\n- Permission MCP server path resolves by preferred runtime ext with fallback\\n- Missing file throws with clear error including tried paths\\n- Tests cover preferred, fallback, and missing cases","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","created_at":"2026-02-04T15:41:41.959095+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T15:43:44.073289+09:00","closed_at":"2026-02-04T15:43:44.073289+09:00","close_reason":"Preflight resolver + tests merged. npm run lint (tsc --noEmit), npm test (463 passed), npm run build OK. commit 7b3b345","labels":["phase:review"]}
{"id":"somaw-in2.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: Preflight resolver + regression tests added; npm run lint/test/build clean","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-04T15:43:09.650669+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T15:44:42.713195+09:00","closed_at":"2026-02-04T15:44:42.713195+09:00","close_reason":"phase set to review","dependencies":[{"issue_id":"somaw-in2.1","depends_on_id":"somaw-in2","type":"parent-child","created_at":"2026-02-04T15:43:09.651265+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-ka6","title":"Step 6: Thread title integration via setTitle (bonus)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:37:00.921829+09:00","updated_at":"2026-02-03T11:37:48.242701+09:00","closed_at":"2026-01-30T14:41:11.473008+09:00","close_reason":"Closed","comments":[{"id":25,"issue_id":"somaw-ka6","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. setTitle integration in session-initializer.ts after workflow dispatch.","created_at":"2026-02-03T02:09:30Z"}]}
{"id":"somaw-kkm","title":"Update service.sh: node dist/index.js + new deploy flow","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T17:06:19.419858+09:00","created_by":"Z","updated_at":"2026-02-03T17:08:27.195714+09:00","closed_at":"2026-02-03T17:08:27.195714+09:00","close_reason":"tsc clean, vitest 423 passed (6 pre-existing failures), 4 files changed + 2 new (deploy.yml rewrite, Makefile)","labels":["phase:review"]}
{"id":"somaw-kkm.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: service.sh: node dist/index.js, SOMA_CONFIG_DIR in plist, cmd_setup config-only, cmd_deploy ì œê±°","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T17:07:59.824951+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.367985+09:00","closed_at":"2026-02-03T21:29:36.367985+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-kkm.1","depends_on_id":"somaw-kkm","type":"parent-child","created_at":"2026-02-03T17:07:59.825832+09:00","created_by":"Z"}]}
{"id":"somaw-l5c","title":"ì„¸ì…˜ ì¢…ë£Œ/Sleep ì´ëª¨ì§€: threadì— ìƒíƒœ í‘œì‹œ","description":"ì„¸ì…˜ì´ ì¢…ë£Œ/Sleepë˜ë©´ í•´ë‹¹ threadì˜ ì›ë³¸ ë©”ì‹œì§€ì— ì„¸ì…˜ ì¢…ë£Œ ì´ëª¨ì§€ ì¶”ê°€ (ì˜ˆ: zzz for sleep, octagonal_sign for terminated). ìœ ì €ê°€ ë‹¤ì‹œ ë´‡ì„ ë¶ˆëŸ¬ ëŒ€í™” ì¬ê°œí•˜ë©´ ì¢…ë£Œ ì´ëª¨ì§€ ì œê±° í›„ ì‘ì—… ì§„í–‰. reaction-manager.ts í™•ì¥, session-initializer.tsì—ì„œ ì¬ê°œ ì‹œ ì´ëª¨ì§€ ì œê±° ë¡œì§ ì¶”ê°€.","design":"## êµ¬í˜„ ê³„íš: ì„¸ì…˜ ì¢…ë£Œ/Sleep ì´ëª¨ì§€\n\n### ì´ëª¨ì§€ ì„¤ê³„\n- crescent_moon: ìœ íœ´ ê²½ê³  (12h idle check)\n- zzz: ì„¸ì…˜ ì¢…ë£Œ/Sleep/ë§Œë£Œ\n\n### ReactionManager í™•ì¥ (reaction-manager.ts)\n1. ìƒìˆ˜: SESSION_IDLE_EMOJI='crescent_moon', SESSION_EXPIRED_EMOJI='zzz'\n2. setSessionIdle(sessionKey): ì›ë³¸ ë©”ì‹œì§€ì— crescent_moon ì¶”ê°€\n3. setSessionExpired(sessionKey, channel?, ts?): crescent_moon ì œê±° + zzz ì¶”ê°€ (fallback channel/ts íŒŒë¼ë¯¸í„°)\n4. clearSessionLifecycleEmojis(channel, ts): ëª¨ë“  lifecycle ì´ëª¨ì§€ ì œê±°\n\n### í†µí•© í¬ì¸íŠ¸\n- session-manager.ts handleIdleCheck(): setSessionIdle() í˜¸ì¶œ\n- session-manager.ts handleSessionExpiry()/handleSessionSleep(): setSessionExpired() í˜¸ì¶œ\n- session-action-handler.ts handleTerminateSession()/handleIdleClose()/handleCloseConfirm(): setSessionExpired() í˜¸ì¶œ\n- session-initializer.ts initialize(): clearSessionLifecycleEmojis() í˜¸ì¶œ (ëŒ€í™” ì¬ê°œ ì‹œ)\n- session-action-handler.ts handleIdleKeep(): clearSessionLifecycleEmojis() í˜¸ì¶œ\n\n### ì˜ì¡´ì„± ì „ë‹¬\n- SessionUiManager constructorì— reactionManager ì¶”ê°€\n- ActionHandlerContextì— reactionManager ì¶”ê°€\n- slack-handler.tsì—ì„œ reactionManager ì „ë‹¬\n\n### ì´ëª¨ì§€ ë ˆì´ì–´ (ë…ë¦½ ë™ì‘)\n1. Status: thinking_face/gear/white_check_mark/x/stop_sign (ReactionManager)\n2. Context%: 80p/60p/40p/20p/0p (ContextWindowManager)\n3. Lifecycle: crescent_moon/zzz (ReactionManager - ì‹ ê·œ, ë³„ë„ ê´€ë¦¬)\n\n### ë³€ê²½ íŒŒì¼ (7ê°œ)\nreaction-manager.ts, session-manager.ts, session-action-handler.ts, session-initializer.ts, slack-handler.ts, actions/index.ts, actions/types.ts","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:17.410882+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.240798+09:00","closed_at":"2026-02-02T18:51:47.55796+09:00","close_reason":"Implemented in commit 616d058","dependencies":[{"issue_id":"somaw-l5c","depends_on_id":"somaw-2gc","type":"blocks","created_at":"2026-02-02T18:11:48.103085+09:00","created_by":"Z"}],"comments":[{"id":26,"issue_id":"somaw-l5c","author":"Z","text":"Review evidence: commit 616d058 - feat: add lifecycle emojis, refresh button, remove workDir. ReactionManager extended with lifecycle emoji layer (crescent_moon for idle, zzz for sleep/terminated).","created_at":"2026-02-03T02:08:40Z"}]}
{"id":"somaw-mq5","title":"Add authentication to conversation viewer web server","description":"## Security: Unauthenticated Web Server Exposes All Conversation Data\n\n**Severity:** HIGH | **Category:** auth_bypass / data_exposure | **Confidence:** 8/10\n\n**File:** src/conversation/web-server.ts\n\n### Problem\nConversation viewer Fastify server has zero authentication on all routes. Any client reaching the port can:\n- Enumerate all conversations via /api/conversations\n- Read full content (user messages, AI responses, Slack user IDs, channel IDs)\n- Export conversations as markdown\n\nCONVERSATION_VIEWER_URL config and Slack link posting confirm remote access is intended. Docker maps port 3000 externally by default.\n\n### Exploit Scenario\n1. Operator sets CONVERSATION_VIEWER_URL to public URL\n2. Attacker hits GET /api/conversations to enumerate all conversation IDs\n3. Reads full conversation content including credentials, internal URLs, proprietary code\n\n### Recommendation\n- Add auth middleware (Bearer token via CONVERSATION_VIEWER_TOKEN at minimum)\n- Ideally integrate Slack user identity verification so only participants can view their conversations\n- Consider removing the list endpoint or requiring elevated auth for it\n\n## Steps to Reproduce\n1. Run the conversation viewer with default config (no auth configured).\n2. From any client, call GET /api/conversations.\n3. Fetch a specific conversation via /api/conversations/:id or export markdown.\n\n## Acceptance Criteria\n- ëª¨ë“  /api/* ë¼ìš°íŠ¸ê°€ ì¸ì¦ì„ ìš”êµ¬í•œë‹¤.\n- ì¸ì¦ ì—†ì´ ì ‘ê·¼ ì‹œ 401 ë˜ëŠ” 403ì„ ë°˜í™˜í•œë‹¤.\n- ìœ íš¨í•œ í† í°(ì˜ˆ: CONVERSATION_VIEWER_TOKEN)ìœ¼ë¡œ ì ‘ê·¼ ì‹œ ì •ìƒ ì‘ë‹µí•œë‹¤.\n","status":"closed","priority":1,"issue_type":"bug","owner":"z@insightquest.io","created_at":"2026-02-03T11:38:27.921338+09:00","created_by":"Z","updated_at":"2026-02-04T01:41:24.771241+09:00","closed_at":"2026-02-04T01:41:24.771241+09:00","close_reason":"tsc clean, vitest 431 passed (+8 new auth tests, 6 pre-existing failures), 3 files +241 lines, security issue resolved","labels":["phase:review"]}
{"id":"somaw-mq5.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: Bearer token auth via CONVERSATION_VIEWER_TOKEN, 8 tests, all routes protected except /health","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-04T01:41:20.057206+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T01:45:59.077546+09:00","closed_at":"2026-02-04T01:45:59.077546+09:00","close_reason":"parent task somaw-mq5 already closed","dependencies":[{"issue_id":"somaw-mq5.1","depends_on_id":"somaw-mq5","type":"parent-child","created_at":"2026-02-04T01:41:20.058269+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-oz9","title":"Create onboarding.prompt workflow file","description":"src/prompt/workflows/onboarding.prompt ìƒì„±. Claudeê°€ ëŒ€í™”í˜•ìœ¼ë¡œ ì‹ ê·œ ìœ ì €ë¥¼ ì•ˆë‚´í•˜ëŠ” í”„ë¡¬í”„íŠ¸.\n\nì˜¨ë³´ë”© ë‹¨ê³„:\n1. í™˜ì˜ ì¸ì‚¬ + ë´‡ ì†Œê°œ (ìœ ì € ì²« ë©”ì‹œì§€ ì–¸ì–´ ìë™ê°ì§€í•˜ì—¬ í•´ë‹¹ ì–¸ì–´ë¡œ ì‘ë‹µ)\n2. Jira ê³„ì • ì—°ê²°: \u003ccontext\u003eì— jira-nameì´ ì—†ìœ¼ë©´ Jira í‘œì‹œ ì´ë¦„ ì§ˆë¬¸ â†’ ë§¤í•‘ ì—…ë°ì´íŠ¸\n3. ì„¤ì • í™•ì¸: ê¸°ë³¸ê°’ (model=Sonnet 4.5, persona=default, bypass=off) ì•ˆë‚´í•˜ê³  ë³€ê²½ ì›í•˜ë©´ UIAskUserQuestionìœ¼ë¡œ ì„ íƒ\n4. ì›Œí¬í”Œë¡œìš° íˆ¬ì–´: 7ê°œ ì›Œí¬í”Œë¡œìš° ì„¤ëª… + ê°ê° ì–´ë–¤ ìƒí™©ì—ì„œ ì‚¬ìš©í•˜ëŠ”ì§€ ì˜ˆì‹œ\n5. ë°ëª¨ ì œì•ˆ: ëŒ€í‘œ ì›Œí¬í”Œë¡œìš°(jira-brainstorming ë˜ëŠ” pr-review) ì‹œë„ ìœ ë„\n\nê·œì¹™:\n- {{include:./common.prompt}} í¬í•¨\n- ìŠ¤í‚µ ì˜µì…˜ì€ í•­ìƒ ì œê³µ (ì²« ë©”ì‹œì§€ì—ì„œ ë°”ë¡œ ì§„ì§œ ì‘ì—… ìš”ì²­ì´ë©´ ì„¤ì •ë§Œ ìƒì„±í•˜ê³  ë°”ë¡œ ì²˜ë¦¬)\n- ìœ ì € ì²« ë©”ì‹œì§€ ì–¸ì–´ë¥¼ ê°ì§€í•˜ì—¬ í•´ë‹¹ ì–¸ì–´ë¡œ ì „ì²´ ì˜¨ë³´ë”© ì§„í–‰\n- ì„¤ì • ë³€ê²½ì€ ê¸°ì¡´ ëª…ë ¹ì–´(persona set X, model set X) ì•ˆë‚´ë¡œ ëŒ€ì²´ ê°€ëŠ¥\n\në³€ê²½ íŒŒì¼: src/prompt/workflows/onboarding.prompt (ì‹ ê·œ)\n\n## Acceptance Criteria\n- onboarding.prompt íŒŒì¼ì´ ì¡´ì¬í•œë‹¤.\n- PromptBuilderê°€ loadWorkflowPrompt('onboarding')ìœ¼ë¡œ ë¡œë“œ ê°€ëŠ¥í•˜ë‹¤.\n","status":"closed","priority":0,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T13:07:37.678657+09:00","created_by":"Z","updated_at":"2026-02-03T21:45:23.420947+09:00","closed_at":"2026-02-03T21:45:23.420947+09:00","close_reason":"tsc clean, PromptBuilder.loadWorkflowPrompt('onboarding') returns 4977 chars with common.prompt included. Self-reviewed. 1 new file +113 lines.","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-oz9","depends_on_id":"somaw-zsl","type":"blocks","created_at":"2026-02-03T13:08:28.262652+09:00","created_by":"Z"}]}
{"id":"somaw-oz9.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: Created onboarding.prompt with all 5 onboarding steps, skip detection, language detection, UIAskUserQuestion usage. Verified loadWorkflowPrompt('onboarding') works (4977 chars).","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T21:45:15.181485+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T00:51:34.969443+09:00","closed_at":"2026-02-04T00:51:34.969443+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-oz9.1","depends_on_id":"somaw-oz9","type":"parent-child","created_at":"2026-02-03T21:45:15.18211+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-p6x","title":"Add MCP health monitor + auto-reload + Slack alert","description":"Track MCP tool errors by server, alert in thread when error threshold reached, and auto-reload MCP configuration. Include unit tests for alert/reload behavior.\\n\\nAcceptance Criteria:\\n- MCP error threshold triggers Slack system alert with context\\n- Auto-reload attempts on threshold breach\\n- Tests cover alert triggering and reset on success","status":"closed","priority":1,"issue_type":"task","owner":"icedac@gmail.com","created_at":"2026-02-04T15:41:51.965409+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T15:43:47.316715+09:00","closed_at":"2026-02-04T15:43:47.316715+09:00","close_reason":"MCP health monitor + auto-reload + Slack alert + tests. npm run lint, npm test (463 passed), npm run build OK. commit 7b3b345","labels":["phase:review"]}
{"id":"somaw-p6x.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: MCP health monitor + auto-reload + Slack alert + tests; npm run lint/test/build clean","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-04T15:43:12.832261+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T15:44:45.234367+09:00","closed_at":"2026-02-04T15:44:45.234367+09:00","close_reason":"phase set to review","dependencies":[{"issue_id":"somaw-p6x.1","depends_on_id":"somaw-p6x","type":"parent-child","created_at":"2026-02-04T15:43:12.832839+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-pbn","title":"deploy.yml ì—…ë°ì´íŠ¸: GitHub Environments ì—°ë™","description":"deploy.ymlì— environment: í‚¤ ì¶”ê°€. mainâ†’production, developâ†’development. í™˜ê²½ë³„ ì‹œí¬ë¦¿ ì°¸ì¡° ê°€ëŠ¥í•˜ë„ë¡ êµ¬ì¡° ë³€ê²½.","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T15:15:04.853009+09:00","created_by":"Z","updated_at":"2026-02-03T15:23:54.663995+09:00","closed_at":"2026-02-03T15:23:54.663995+09:00","close_reason":"deploy.yml 1 line added (environment key), vitest 423 passed, branch-based environment selection","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-pbn","depends_on_id":"somaw-5yq","type":"blocks","created_at":"2026-02-03T15:15:13.427436+09:00","created_by":"Z"}]}
{"id":"somaw-pbn.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: deploy.ymlì— environment: í‚¤ ì¶”ê°€ (ternary expression), mainâ†’production, developâ†’development","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T15:23:54.60296+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.426436+09:00","closed_at":"2026-02-03T21:29:36.426436+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-pbn.1","depends_on_id":"somaw-pbn","type":"parent-child","created_at":"2026-02-03T15:23:54.603441+09:00","created_by":"Z"}]}
{"id":"somaw-puj","title":"ëª¨ë¸ ì‘ë‹µê³¼ ë´‡ ì‘ë‹µ ëª…í™•íˆ êµ¬ë¶„","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T20:01:27.886542+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.24104+09:00","closed_at":"2026-01-30T20:11:09.395486+09:00","close_reason":"[Bot] íƒœê·¸ ì¶”ê°€ (new, renew, context, cwd í•¸ë“¤ëŸ¬) + MessageFormatter.botMessage() í—¬í¼ í•¨ìˆ˜ ì¶”ê°€","comments":[{"id":27,"issue_id":"somaw-puj","author":"Z","text":"Review evidence: commit 30c1dff - feat(slack): distinguish system messages with zap reaction. postSystemMessage() helper sends message + adds âš¡ zap reaction to distinguish bot system messages from AI responses. 11 files, +311/-74 lines.","created_at":"2026-02-03T02:09:09Z"}]}
{"id":"somaw-r2l","title":"Wire callback in StreamExecutor","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T18:41:33.548038+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.238392+09:00","closed_at":"2026-01-30T18:43:21.226016+09:00","close_reason":"Closed","comments":[{"id":28,"issue_id":"somaw-r2l","author":"Z","text":"Review evidence: commit b287278 - feat(directives): add session_links JSON directive support. stream-executor.ts wired with onSessionLinksDetected callback, 9 new lines.","created_at":"2026-02-03T02:09:50Z"}]}
{"id":"somaw-r4d","title":"ì„¸ì…˜ ëª©ë¡: ì›Œí‚¹ ë””ë ‰í† ë¦¬ í‘œì‹œ ì‚­ì œ","description":"session-manager.tsì˜ formatUserSessionsBlocks()ì—ì„œ Working Dir í‘œì‹œ í•­ëª© ì œê±°. ê°„ë‹¨í•œ UI ì •ë¦¬ ì‘ì—….","design":"## êµ¬í˜„ ê³„íš: ì›Œí‚¹ ë””ë ‰í† ë¦¬ í‘œì‹œ ì‚­ì œ\n\n### session-manager.ts formatUserSessionsBlocks()\n- L78-80 ì‚­ì œ: workDir ë³€ìˆ˜ ìƒì„± ì½”ë“œ\n- L113 ìˆ˜ì •: 'ğŸ“ ${workDir} |' ë¶€ë¶„ ì œê±°\n  ë³€ê²½ì „: ğŸ¤– ${modelDisplay} | ğŸ“ ${workDir} | ğŸ• ${timeAgo} | â³ ${expiresIn}\n  ë³€ê²½í›„: ğŸ¤– ${modelDisplay} | ğŸ• ${timeAgo} | â³ ${expiresIn}\n\n### session-manager.ts formatAllSessions()\n- L221-223 ì‚­ì œ: workDir ë³€ìˆ˜ ìƒì„± ì½”ë“œ\n- L228 ìˆ˜ì •: 'ğŸ“ `${workDir}` |' ë¶€ë¶„ ì œê±°\n\n### ì£¼ì˜: workingDirectory í•„ë“œ ìì²´ëŠ” ìœ ì§€ (repo ê·¸ë£¹í•‘ì—ì„œ í™œìš©)\n\n### ë³€ê²½ íŒŒì¼ (1ê°œ)\nsession-manager.ts","status":"closed","priority":3,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:12.619007+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.244962+09:00","closed_at":"2026-02-02T18:51:47.55872+09:00","close_reason":"Implemented in commit 616d058","comments":[{"id":29,"issue_id":"somaw-r4d","author":"Z","text":"Review evidence: commit 616d058 - feat: add lifecycle emojis, refresh button, remove workDir. Removed working directory display from formatUserSessionsBlocks and formatAllSessions.","created_at":"2026-02-03T02:08:40Z"}]}
{"id":"somaw-tgi","title":"Step 1: Update Slack App manifests with assistant:write scope","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:09.495528+09:00","updated_at":"2026-02-03T11:37:48.244301+09:00","closed_at":"2026-01-30T14:37:14.455625+09:00","close_reason":"Closed","comments":[{"id":30,"issue_id":"somaw-tgi","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. assistant:write scope added to slack-app-manifest.json and .yaml.","created_at":"2026-02-03T02:09:19Z"}]}
{"id":"somaw-u3x","title":"Step 3c: Add setStatus to tool-event-processor.ts for MCP","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:17.016766+09:00","updated_at":"2026-02-03T11:37:48.243493+09:00","closed_at":"2026-01-30T14:40:27.590089+09:00","close_reason":"Closed","comments":[{"id":31,"issue_id":"somaw-u3x","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. tool-event-processor.ts shows MCP server name in spinner during tool calls.","created_at":"2026-02-03T02:09:20Z"}]}
{"id":"somaw-uvg","title":"Bug: ë¬¸ë§¥% ì´ëª¨ì§€ê°€ ì—¬ëŸ¬ê°œ í‘œì‹œë˜ëŠ” ë²„ê·¸ ìˆ˜ì •","description":"context-window-manager.tsì—ì„œ ë¬¸ë§¥% ì´ëª¨ì§€(80p/60p/40p/20p/0p)ê°€ ì¤‘ë³µ í‘œì‹œë˜ëŠ” ë²„ê·¸. updateContextEmoji()ì—ì„œ ì´ì „ ì´ëª¨ì§€ ì œê±° ë¡œì§ ì ê²€. ë¦¬ì•¡ì…˜ ì œê±° ì‹¤íŒ¨ ì‹œ ì¤‘ë³µ ë°œìƒ ê°€ëŠ¥ì„±. ê²½í•© ì¡°ê±´ì´ë‚˜ ë¹„ë™ê¸° ì²˜ë¦¬ ëˆ„ë½ í™•ì¸ í•„ìš”.","design":"## êµ¬í˜„ ê³„íš: ë¬¸ë§¥% ì´ëª¨ì§€ ì¤‘ë³µ ë²„ê·¸ ìˆ˜ì •\n\n### Root Cause\nsetOriginalMessage()ê°€ ë§¤ ë©”ì‹œì§€ë§ˆë‹¤ í˜¸ì¶œë˜ë©´ì„œ currentEmojië¥¼ nullë¡œ ë¦¬ì…‹í•˜ì§€ë§Œ, Slackì— ë¶™ì–´ìˆëŠ” ê¸°ì¡´ ì´ëª¨ì§€ë¥¼ ì œê±°í•˜ì§€ ì•ŠìŒ.\n\nê²½ë¡œ1: cleanup(5ë¶„ í›„) â†’ state ì‚­ì œ but ì´ëª¨ì§€ ì”ì¡´ â†’ ìƒˆ ë©”ì‹œì§€ â†’ currentEmoji=null â†’ ì´ì „ ì´ëª¨ì§€ ë¯¸ì œê±° â†’ ì¤‘ë³µ\nê²½ë¡œ2: cleanup ì „ ì¬ì§„ì… â†’ state ë®ì–´ì”€ â†’ currentEmoji=null â†’ ë™ì¼ ì¤‘ë³µ\n\n### ìˆ˜ì • (context-window-manager.ts)\n1. setOriginalMessage()ë¥¼ asyncë¡œ ë³€ê²½:\n   - ê°™ì€ tsë©´ state ë³´ì¡´ (ì´ëª¨ì§€ ì •ë³´ ìœ ì§€) â†’ return\n   - ë‹¤ë¥¸ tsë©´ ê¸°ì¡´ ì´ëª¨ì§€ removeReaction í›„ ìƒˆë¡œ ì„¤ì •\n   - ì²« í˜¸ì¶œì´ë©´ currentEmoji: nullë¡œ ì‹œì‘\n\n2. updateContextEmoji()ì— safety ì¥ì¹˜ ì¶”ê°€:\n   - currentEmojiê°€ nullì¼ ë•Œ(cleanup í›„ ì¬ì§„ì…) removeAllContextEmojis() í˜¸ì¶œ\n   - ëª¨ë“  %ì´ëª¨ì§€(80p/60p/40p/20p/0p) ì¤‘ ìƒˆ ì´ëª¨ì§€ ì œì™¸í•˜ê³  ì „ë¶€ ì œê±°\n\n3. removeAllContextEmojis() ì‹ ê·œ private ë©”ì„œë“œ:\n   - EMOJI_THRESHOLDS ìˆœíšŒí•˜ë©° exceptEmoji ì œì™¸ ëª¨ë‘ removeReaction\n\n### session-initializer.ts\n- setOriginalMessage í˜¸ì¶œì„ awaitë¡œ ë³€ê²½\n\n### Edge Cases\n- cleanup í›„ ì¬ì§„ì…: removeAllContextEmojisë¡œ ì•ˆì „ ì •ë¦¬\n- ê°™ì€ ìŠ¤ë ˆë“œ ë¹ ë¥¸ ì—°ì† ë©”ì‹œì§€: ê°™ì€ tsë©´ noop\n- new/renew: cleanupWithReactionì´ ì´ë¯¸ ì²˜ë¦¬\n- Slack API ì‹¤íŒ¨: removeReactionì€ ì—ëŸ¬ ë¬´ì‹œ ì²˜ë¦¬ë¨\n\n### ë³€ê²½ íŒŒì¼ (2ê°œ)\ncontext-window-manager.ts, session-initializer.ts","status":"closed","priority":1,"issue_type":"bug","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:10.826154+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.237314+09:00","closed_at":"2026-02-02T18:43:29.793396+09:00","close_reason":"Fixed: setOriginalMessage now async, preserves state for same ts, removes old emoji for different ts. Added removeAllContextEmojis safety net in updateContextEmoji.","comments":[{"id":32,"issue_id":"somaw-uvg","author":"Z","text":"Review evidence: commit b6e37bd - feat: add sleep mode and fix context emoji duplication. Context emoji fix: setOriginalMessage async, preserves state for same ts, added removeAllContextEmojis safety net.","created_at":"2026-02-03T02:08:40Z"}]}
{"id":"somaw-v2e","title":"ì„¸ì…˜ ëª©ë¡: Jira ì´ìŠˆ ìƒíƒœ ì „í™˜ ë²„íŠ¼","description":"ì´ìŠˆê°€ Todo ìƒíƒœì´ë©´ In-progress ì „í™˜ ë²„íŠ¼ í‘œì‹œ. ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ ì„¸ì…˜ì˜ AIì—ê²Œ ì´ìŠˆ ìƒíƒœë¥¼ ë³€ê²½í•˜ë¼ëŠ” ìš”ì²­ ì „ë‹¬. í˜„ì¬ Jira ì›Œí¬í”Œë¡œìš°ì—ì„œ ê°ˆ ìˆ˜ ìˆëŠ” ëª¨ë“  ì „í™˜ ê°€ëŠ¥í•œ ìƒíƒœë¥¼ í‘œì‹œ. Jira getTransitions API í™œìš©, action-handlerì—ì„œ ì „í™˜ ì•¡ì…˜ êµ¬í˜„.","design":"## êµ¬í˜„ ê³„íš: Jira ì´ìŠˆ ìƒíƒœ ì „í™˜ ë²„íŠ¼\n\n### link-metadata-fetcher.ts\n- JiraTransition íƒ€ì…: {id, name, to: {name, statusCategory}}\n- fetchJiraTransitions(link): Jira REST API /issue/{key}/transitions\n\n### session-manager.ts formatUserSessionsBlocks()\n- Jira issue ìˆëŠ” ì„¸ì…˜ì— actions ë¸”ë¡ ì¶”ê°€\n- transitions.slice(0,4)ë¡œ ìµœëŒ€ 4ê°œ ë²„íŠ¼\n- ë²„íŠ¼ value: JSON {sessionKey, issueKey, transitionId, transitionName}\n- action_id: jira_transition_{id}_{sessionKey_prefix}\n- Done ê³„ì—´ ë²„íŠ¼ì€ style:'primary'\n\n### ì‹ ê·œ: jira-action-handler.ts\n- handleTransition(body, respond):\n  1. valueì—ì„œ sessionKey/issueKey/transitionId/transitionName íŒŒì‹±\n  2. ì„¸ì…˜ ì¡´ì¬ + ì†Œìœ ê¶Œ í™•ì¸\n  3. í•´ë‹¹ ì„¸ì…˜ threadì— ë©”ì‹œì§€ ì£¼ì…: 'Jira ì´ìŠˆ {key} ìƒíƒœë¥¼ {name}ìœ¼ë¡œ ë³€ê²½í•´ì£¼ì„¸ìš”'\n  4. messageHandler íŒ¨í„´ ì‚¬ìš© (ChoiceActionHandlerì™€ ë™ì¼)\n\n### actions/index.ts\n- app.action(/^jira_transition_/, ...) ì •ê·œì‹ ë§¤ì¹­ìœ¼ë¡œ ë“±ë¡\n\n### AI ìœ„ì„ ì„¤ê³„\n- ì§ì ‘ API í˜¸ì¶œ ëŒ€ì‹  ì„¸ì…˜ AIì—ê²Œ ë©”ì‹œì§€ ì£¼ì…\n- AIê°€ MCP(Jira)ë¥¼ í†µí•´ ìƒíƒœ ë³€ê²½ ì‹¤í–‰\n- ì „í›„ ì»¨í…ìŠ¤íŠ¸ë¥¼ í™œìš©í•œ ì§€ëŠ¥ì  ì²˜ë¦¬ ê°€ëŠ¥\n\n### ë³€ê²½ íŒŒì¼ (4ê°œ)\nlink-metadata-fetcher.ts, session-manager.ts, jira-action-handler.ts (ì‹ ê·œ), actions/index.ts","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:35.199911+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.239261+09:00","closed_at":"2026-02-03T10:31:07.489432+09:00","close_reason":"Implemented Jira transition buttons and PR merge button in session list","dependencies":[{"issue_id":"somaw-v2e","depends_on_id":"somaw-89z","type":"blocks","created_at":"2026-02-02T18:11:52.86766+09:00","created_by":"Z"}],"comments":[{"id":33,"issue_id":"somaw-v2e","author":"Z","text":"Review evidence: commit c9f1c34 - feat: add Jira transition buttons and PR merge button. fetchJiraTransitions() in link-metadata-fetcher.ts, jira-action-handler.ts (99 lines), buttons in session-manager.ts buildSessionActionButtons(). 5 files, +491/-2 lines.","created_at":"2026-02-03T02:09:01Z"}]}
{"id":"somaw-vvx","title":"Step 3b: Integrate setStatus into stream-executor.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:15.108218+09:00","updated_at":"2026-02-03T11:37:48.243705+09:00","closed_at":"2026-01-30T14:39:57.894083+09:00","close_reason":"Closed","comments":[{"id":34,"issue_id":"somaw-vvx","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. stream-executor.ts calls setStatus at stream start/tool-use/completion/error lifecycle points.","created_at":"2026-02-03T02:09:19Z"}]}
{"id":"somaw-w8q","title":"Step 5: Implement graceful fallback","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:59.29277+09:00","updated_at":"2026-02-03T11:37:48.2429+09:00","closed_at":"2026-01-30T14:38:07.636148+09:00","close_reason":"Closed","comments":[{"id":35,"issue_id":"somaw-w8q","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. Graceful fallback: auto-disable on first API failure (assistant-status-manager.ts).","created_at":"2026-02-03T02:09:30Z"}]}
{"id":"somaw-w95","title":"Setup wizard: ê³µí†µ ì¸í”„ë¼ (_common.sh + ì—”íŠ¸ë¦¬í¬ì¸íŠ¸)","description":"scripts/setup-wizard.sh ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ + scripts/setup/_common.sh ê³µí†µ í•¨ìˆ˜. state ê´€ë¦¬(load_state/save_state), ì»¬ëŸ¬ ì¶œë ¥, ask_value/ask_confirm í—¬í¼, step ì‹¤í–‰ ë£¨í”„. setup-wizard-macos.sh ì‹¬ë³¼ë¦­ ë§í¬. .setup-stateë¥¼ .gitignoreì— ì¶”ê°€.","status":"closed","priority":0,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T15:14:39.954872+09:00","created_by":"Z","updated_at":"2026-02-03T15:23:25.83881+09:00","closed_at":"2026-02-03T15:23:25.83881+09:00","close_reason":"vitest 423 passed (6 pre-existing), all bash -n syntax checks pass, --status tested via symlink, 17 new files +1548 lines, bash 3.2 compatible","labels":["phase:review"]}
{"id":"somaw-w95.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: 17 files: _common.sh (bash 3.2 compatible state mgmt, UI helpers), setup-wizard.sh (entrypoint with --status/resume), symlink, .gitignore updated","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T15:23:18.304581+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.542008+09:00","closed_at":"2026-02-03T21:29:36.542008+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-w95.1","depends_on_id":"somaw-w95","type":"parent-child","created_at":"2026-02-03T15:23:18.30514+09:00","created_by":"Z"}]}
{"id":"somaw-xr2","title":"Setup wizard: Step 07-08 Deploy dirs + Write configs","description":"Step 07: /opt/soma-work/{main,dev} ìƒì„± (service.sh setup í™œìš©). Step 08: .env, .system.prompt, mcp-servers.jsonì„ ê° ë°°í¬ ë””ë ‰í† ë¦¬ì— ë³µì‚¬. dev í™˜ê²½ì€ mainê³¼ ë™ì¼í•˜ê±°ë‚˜ ë³„ë„ ì„¤ì • ê°€ëŠ¥.","status":"closed","priority":0,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T15:14:54.709119+09:00","created_by":"Z","updated_at":"2026-02-03T15:23:25.880988+09:00","closed_at":"2026-02-03T15:23:25.880988+09:00","close_reason":"vitest 423 passed (6 pre-existing), all bash -n syntax checks pass, --status tested via symlink, 17 new files +1548 lines, bash 3.2 compatible","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-xr2","depends_on_id":"somaw-1xw","type":"blocks","created_at":"2026-02-03T15:15:13.105903+09:00","created_by":"Z"}]}
{"id":"somaw-xr2.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: 07-deploy-dirs.sh (/opt/soma-work setup), 08-write-configs.sh (copy to deploy dirs)","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T15:23:18.581746+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.484041+09:00","closed_at":"2026-02-03T21:29:36.484041+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-xr2.1","depends_on_id":"somaw-xr2","type":"parent-child","created_at":"2026-02-03T15:23:18.583832+09:00","created_by":"Z"}]}
{"id":"somaw-xwk","title":"Add first-time user detection in SessionInitializer","description":"SessionInitializer.initialize()ì—ì„œ isNewSession \u0026\u0026 !userSettingsStore.getUserSettings(user) ì²´í¬ ì¶”ê°€. ì¡°ê±´ ë§Œì¡± ì‹œ dispatchë¥¼ ê±´ë„ˆë›°ê³  transitionToMain(channel, threadTs, 'onboarding', 'Welcome!') í˜¸ì¶œ. DMê³¼ ì±„ë„ ë©˜ì…˜ ëª¨ë‘ ì§€ì›.\n\nì£¼ì˜: InputProcessor.processFiles()ì—ì„œ updateUserJiraInfo()ê°€ ë¨¼ì € ì‹¤í–‰ë˜ë¯€ë¡œ, Jira ë§¤í•‘ì— ìˆëŠ” ìœ ì €ëŠ” ì´ë¯¸ settings ë ˆì½”ë“œê°€ ìƒê²¨ ì˜¨ë³´ë”©ì„ ê±´ë„ˆëœ€ (ì˜ë„ëœ ë™ì‘).\n\në³€ê²½ íŒŒì¼: src/slack/pipeline/session-initializer.ts\n\n## Acceptance Criteria\n- ì‹ ê·œ ìœ ì € ì²« ë©”ì‹œì§€ ì‹œ dispatchê°€ ìŠ¤í‚µë˜ê³  session.workflow='onboarding'ìœ¼ë¡œ ì „í™˜ëœë‹¤.\n- DMê³¼ ì±„ë„ ë©˜ì…˜ ëª¨ë‘ ì§€ì›ëœë‹¤.\n","status":"closed","priority":0,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T13:07:23.38571+09:00","created_by":"Z","updated_at":"2026-02-03T21:46:20.405501+09:00","closed_at":"2026-02-03T21:46:20.405501+09:00","close_reason":"tsc clean, vitest 423 passed (0 new failures), self-reviewed. Modified session-initializer.ts (+15 lines): first-time user detection triggers onboarding workflow.","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-xwk","depends_on_id":"somaw-zsl","type":"blocks","created_at":"2026-02-03T13:08:28.180107+09:00","created_by":"Z"}]}
{"id":"somaw-xwk.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: Added first-time user detection in SessionInitializer.initialize(). Checks !userSettingsStore.getUserSettings(user) for new sessions, triggers onboarding workflow.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T21:46:13.428454+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T00:51:34.954382+09:00","closed_at":"2026-02-04T00:51:34.954382+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-xwk.1","depends_on_id":"somaw-xwk","type":"parent-child","created_at":"2026-02-03T21:46:13.42909+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-zbp","title":"Handle onboarding skip via Continuation mechanism","description":"ì˜¨ë³´ë”© ì„¸ì…˜ì—ì„œ ìœ ì €ê°€ 'ìŠ¤í‚µ' ë˜ëŠ” ì‹¤ì œ ì‘ì—… ìš”ì²­ì„ ë³´ë‚´ë©´:\n1. ensureUserExists()ë¡œ ê¸°ë³¸ ì„¤ì • ë ˆì½”ë“œ ìƒì„±\n2. Continuationì„ ë°˜í™˜í•˜ì—¬ ì„¸ì…˜ ë¦¬ì…‹ + ì›ë˜ ë©”ì‹œì§€ë¡œ ì¬-dispatch\n\nêµ¬í˜„ ë°©ì‹: onboarding.promptì—ì„œ Claudeê°€ ìŠ¤í‚µ ìš”ì²­ì„ ê°ì§€í•˜ë©´ ensureUserExists í˜¸ì¶œ í›„, ìœ ì €ì˜ ì›ë˜ ë©”ì‹œì§€ë¥¼ ê·¸ëŒ€ë¡œ ë‹¤ì‹œ ì²˜ë¦¬. ì´ëŠ” renew íŒ¨í„´ê³¼ ìœ ì‚¬: StreamExecutorì˜ Continuation loop í™œìš©.\n\nì£¼ì˜: ì˜¨ë³´ë”© ì¤‘ ìœ ì €ê°€ Jira ë§í¬ ë“±ì„ ë³´ë‚´ë©´ ì˜¨ë³´ë”©ì„ ìë™ ì™„ë£Œí•˜ê³  í•´ë‹¹ ì›Œí¬í”Œë¡œìš°ë¡œ ì „í™˜í•  ìˆ˜ ìˆì–´ì•¼ í•¨.\n\në³€ê²½ íŒŒì¼: src/slack/pipeline/stream-executor.ts (í•„ìš”ì‹œ), onboarding.prompt\n\n## Acceptance Criteria\n- ìŠ¤í‚µ ì‹œ ensureUserExistsë¡œ ê¸°ë³¸ ì„¤ì • ìƒì„± í›„ ì›ë˜ ë©”ì‹œì§€ê°€ ì¬-dispatchë˜ì–´ ì²˜ë¦¬ëœë‹¤.\n- ì˜¨ë³´ë”© ì¤‘ ì‹¤ì œ ì‘ì—… ìš”ì²­ì´ë‚˜ Jira ë§í¬ëŠ” ì˜¨ë³´ë”©ì„ ì¢…ë£Œí•˜ê³  í•´ë‹¹ ì›Œí¬í”Œë¡œìš°ë¡œ ì „í™˜ëœë‹¤.\n","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T13:08:11.648992+09:00","created_by":"Z","updated_at":"2026-02-04T01:31:29.976618+09:00","closed_at":"2026-02-04T01:31:29.976618+09:00","close_reason":"tsc clean, vitest 423 passed (0 new failures), self-reviewed. Modified stream-executor.ts (+65 lines): buildOnboardingContinuation, parseOnboardingComplete. Updated onboarding.prompt with JSON output format.","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-zbp","depends_on_id":"somaw-acw","type":"blocks","created_at":"2026-02-03T13:08:28.421315+09:00","created_by":"Z"}]}
{"id":"somaw-zbp.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: Added onboarding skip via Continuation mechanism: parseOnboardingComplete() and buildOnboardingContinuation() in stream-executor.ts, updated onboarding.prompt with JSON output format.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-04T01:31:24.505646+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-04T01:45:58.940975+09:00","closed_at":"2026-02-04T01:45:58.940975+09:00","close_reason":"parent task somaw-zbp already closed","dependencies":[{"issue_id":"somaw-zbp.1","depends_on_id":"somaw-zbp","type":"parent-child","created_at":"2026-02-04T01:31:24.506266+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-zsl","title":"Add 'onboarding' WorkflowType and ConversationSession.isOnboarding flag","description":"types.tsì— WorkflowTypeì— 'onboarding' ì¶”ê°€. ConversationSessionì— isOnboarding?: boolean í”Œë˜ê·¸ ì¶”ê°€. DispatchService.VALID_WORKFLOWSì— 'onboarding' ë“±ë¡. SerializedSessionì—ë„ isOnboarding ì¶”ê°€í•˜ì—¬ ì„¸ì…˜ ì˜ì†ì„± ìœ ì§€.\n\në³€ê²½ íŒŒì¼: src/types.ts, src/dispatch-service.ts, src/session-registry.ts\nAcceptance: tsc --noEmit clean, WorkflowTypeì— 'onboarding' í¬í•¨, VALID_WORKFLOWSì— ë“±ë¡ë¨","status":"closed","priority":0,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T13:07:14.474446+09:00","created_by":"Z","updated_at":"2026-02-03T21:24:50.04207+09:00","closed_at":"2026-02-03T21:24:50.04207+09:00","close_reason":"tsc clean, vitest 423 passed (0 new failures), self-reviewed code changes. Modified 3 files: types.ts (+3 lines), dispatch-service.ts (+1 line), session-registry.ts (+4 lines).","labels":["phase:review"]}
{"id":"somaw-zsl.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: Added 'onboarding' to WorkflowType union, added isOnboarding to ConversationSession and SerializedSession, registered in VALID_WORKFLOWS. tsc clean, vitest 423 passed.","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T21:23:57.812648+09:00","created_by":"Zhuge Hyuk","updated_at":"2026-02-03T21:29:36.3541+09:00","closed_at":"2026-02-03T21:29:36.3541+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-zsl.1","depends_on_id":"somaw-zsl","type":"parent-child","created_at":"2026-02-03T21:23:57.813376+09:00","created_by":"Zhuge Hyuk"}]}
{"id":"somaw-zyz","title":"Setup wizard: Step 00-01 Welcome + Prerequisites","description":"Step 00: Fork ì²´í¬(remote URLì´ ì›ë³¸ì´ ì•„ë‹Œì§€ í™•ì¸), ë ˆê±°ì‹œ LaunchDaemon/Agent cleanup(com.dd.claude-slack-bot). Step 01: node/npm/git/gh CLI ì¡´ì¬ í™•ì¸, gh auth status + fork admin ì ‘ê·¼ ê²€ì¦.","status":"closed","priority":0,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T15:14:47.507136+09:00","created_by":"Z","updated_at":"2026-02-03T15:23:25.849466+09:00","closed_at":"2026-02-03T15:23:25.849466+09:00","close_reason":"vitest 423 passed (6 pre-existing), all bash -n syntax checks pass, --status tested via symlink, 17 new files +1548 lines, bash 3.2 compatible","labels":["phase:review"],"dependencies":[{"issue_id":"somaw-zyz","depends_on_id":"somaw-w95","type":"blocks","created_at":"2026-02-03T15:15:12.865749+09:00","created_by":"Z"}]}
{"id":"somaw-zyz.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: 00-welcome.sh (fork check, legacy cleanup), 01-prerequisites.sh (node/npm/git/gh/auth/repo access)","status":"closed","priority":4,"issue_type":"event","created_at":"2026-02-03T15:23:18.375023+09:00","created_by":"Z","updated_at":"2026-02-03T21:29:36.528055+09:00","closed_at":"2026-02-03T21:29:36.528055+09:00","close_reason":"phase already set to review on parent","dependencies":[{"issue_id":"somaw-zyz.1","depends_on_id":"somaw-zyz","type":"parent-child","created_at":"2026-02-03T15:23:18.377579+09:00","created_by":"Z"}]}
