{"id":"somaw-0ql","title":"Add onSessionLinksDetected callback to StreamCallbacks","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T18:41:33.356402+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.238581+09:00","closed_at":"2026-01-30T18:43:10.549213+09:00","close_reason":"Closed","comments":[{"id":30,"issue_id":"somaw-0ql","author":"Z","text":"Review evidence: commit b287278 - feat(directives): add session_links JSON directive support. onSessionLinksDetected callback in stream-processor.ts, 29 new lines.","created_at":"2026-02-03T02:09:48Z"}]}
{"id":"somaw-1a9","title":"ë´‡ ìƒíƒœë¥¼ ì„¸ì…˜ ëª©ë¡ + thread ì´ëª¨ì§€ë¡œ í‘œì‹œ","description":"ë´‡ í™œë™ ìƒíƒœ(working/waiting/idle)ë¥¼ ë‘ ê³³ì— í‘œì‹œ: 1) ì„¸ì…˜ ëª©ë¡ì— ìƒíƒœ ì•„ì´ì½˜/í…ìŠ¤íŠ¸ (ğŸ”„ì‘ì—…ì¤‘/â³ëŒ€ê¸°ì¤‘/âœ…ì™„ë£Œ), 2) thread ì›ë³¸ ë©”ì‹œì§€ì— ì´ëª¨ì§€ ë°˜ì˜ (ì…‹ ì¤‘ í•˜ë‚˜ë§Œ í‘œì‹œ). session-manager.ts formatUserSessionsBlocks() ìˆ˜ì •, reaction-manager.tsì— í™œë™ìƒíƒœ ì´ëª¨ì§€ ê´€ë¦¬ ì¶”ê°€.","design":"## êµ¬í˜„ ê³„íš: ë´‡ ìƒíƒœ UI í‘œì‹œ\n\n### ì´ëª¨ì§€ ë§¤í•‘ (ê¸°ì¡´ ReactionManager ì¬ì‚¬ìš©)\n- working: gear (ê¸°ì¡´ thinking_face/gear ê·¸ëŒ€ë¡œ)\n- waiting: raised_hand (ì‹ ê·œ - user_choice ì¶œë ¥ ì‹œ)\n- idle: white_check_mark/x/stop_sign (ê¸°ì¡´ completed/error/cancelled ê·¸ëŒ€ë¡œ)\n\n### í•µì‹¬ ì„¤ê³„: ê¸°ì¡´ ReactionManager.updateReaction() íŒ¨í„´ í™œìš©\n- ì´ë¯¸ ìƒí˜¸ë°°íƒ€ì„± ë³´ì¥ (ì´ì „ ì´ëª¨ì§€ ì œê±° â†’ ìƒˆ ì´ëª¨ì§€ ì¶”ê°€)\n- waiting ì§„ì… ì‹œ updateReaction(sessionKey, 'raised_hand') í˜¸ì¶œ\n- waitingâ†’working ì¬ì§„ì… ì‹œ ê¸°ì¡´ thinking_face ì „í™˜ì´ ìë™ ì²˜ë¦¬\n\n### StreamExecutor ë¶„ê¸° (stream-executor.ts L262)\n- hasUserChoice=true: raised_hand ì´ëª¨ì§€ + activityState='waiting'\n- hasUserChoice=false: white_check_mark ì´ëª¨ì§€ + activityState='idle'\n\n### StatusReporter (status-reporter.ts)\n- StatusTypeì— 'waiting' ì¶”ê°€\n- STATUS_CONFIGì— waiting: {text: 'âœ‹ Waiting...', emoji: 'raised_hand'}\n\n### ì„¸ì…˜ ëª©ë¡ í‘œì‹œ (session-manager.ts)\n- formatActivityState(): workingâ†’âš™ï¸, waitingâ†’âœ‹, idleâ†’ì—†ìŒ\n- formatUserSessionsBlocks(): ì„¸ì…˜ ë²ˆí˜¸ ì˜†ì— í™œë™ ìƒíƒœ ì´ëª¨ì§€ í‘œì‹œ\n- formatAllSessions(): ë™ì¼ íŒ¨í„´ ì ìš©\n\n### SessionInitializer (session-initializer.ts)\n- raised_hand ì´ëª¨ì§€ë„ ì´ˆê¸°í™” ëŒ€ìƒì— ì¶”ê°€ (white_check_markê³¼ ë™ì¼ ì²˜ë¦¬)\n\n### MCP Pending í˜¸í™˜\n- waiting + MCP í˜¸ì¶œ ì‹œ: raised_hand â†’ hourglass â†’ raised_hand (ê¸°ì¡´ preMcpReactions ë¡œì§)\n\n### ë³€ê²½ íŒŒì¼ (4ê°œ)\nstatus-reporter.ts, session-manager.ts, stream-executor.ts, session-initializer.ts","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:23.786998+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.24026+09:00","closed_at":"2026-02-02T19:02:48.994019+09:00","close_reason":"Implemented activity state display: Added 'waiting' to StatusType with raised_hand emoji, stream-executor uses waiting/completed status based on hasUserChoice, session list shows âš™ï¸/âœ‹ emoji prefix for working/waiting states, session-initializer clears raised_hand on new message","dependencies":[{"issue_id":"somaw-1a9","depends_on_id":"somaw-5ox","type":"blocks","created_at":"2026-02-02T18:11:49.421728+09:00","created_by":"Z"}],"comments":[{"id":9,"issue_id":"somaw-1a9","author":"Z","text":"Review evidence: commit 5dab00c - feat: add activity state UI display and link status with emoji indicators. formatActivityEmoji() shows âš™ï¸/âœ‹ prefix in session list. status-reporter.ts adds waiting type with raised_hand emoji.","created_at":"2026-02-03T02:08:54Z"}]}
{"id":"somaw-2gc","title":"Sleep mode: 24ì‹œê°„ í›„ ì„¸ì…˜ ìë™ì¢…ë£Œ ëŒ€ì‹  Sleep ì „í™˜","description":"ì„¸ì…˜ì´ 24ì‹œê°„ ì§€ë‚˜ë„ ìë™ìœ¼ë¡œ ì¢…ë£Œë˜ì§€ ì•Šê³  Sleep ëª¨ë“œë¡œ ì „í™˜. ìœ ì €ê°€ ë‹¤ì‹œ ë§ì„ ê±¸ë©´ í•´ë‹¹ ì„¸ì…˜ì„ ì´ì–´ì„œ í•  ìˆ˜ ìˆìŒ. session-registry.tsì˜ cleanupInactiveSessions()ê³¼ DEFAULT_SESSION_TIMEOUT ë¡œì§ ìˆ˜ì • í•„ìš”. SessionStateì— SLEEP ìƒíƒœ ì¶”ê°€, ê²½ê³  ëŒ€ì‹  Sleep ì „í™˜ ì•Œë¦¼.","design":"## êµ¬í˜„ ê³„íš: Sleep Mode\n\n### íƒ€ì… ë³€ê²½\n- types.ts: SessionStateì— 'SLEEPING' ì¶”ê°€, ConversationSessionì— sleepStartedAt?: Date ì¶”ê°€\n- session-registry.ts: SerializedSessionì— sleepStartedAt?: string ì¶”ê°€\n\n### ìƒìˆ˜\n- DEFAULT_SESSION_TIMEOUT = 24h (Activeâ†’Sleep)\n- MAX_SLEEP_DURATION = 7d (Sleep ìµœëŒ€ ìœ ì§€)\n\n### í•µì‹¬ ë¡œì§ (session-registry.ts)\n1. cleanupInactiveSessions() 3ë‹¨ê³„ ë¦¬íŒ©í„°ë§:\n   - SLEEPING + 7ì¼ ì´ˆê³¼ â†’ ì‚­ì œ\n   - MAIN/INITIALIZING + 24h ì´ˆê³¼ â†’ SLEEPING ì „í™˜\n   - 24h ì´ë‚´ â†’ ê¸°ì¡´ ê²½ê³  ìœ ì§€\n2. transitionToSleep(): state='SLEEPING', sleepStartedAt ì„¤ì •, onSleep ì½œë°± í˜¸ì¶œ\n3. wakeFromSleep(): state='MAIN', sleepStartedAt ì œê±°, lastActivity ê°±ì‹ \n\n### SessionExpiryCallbacks í™•ì¥\n- onSleep ì½œë°± ì¶”ê°€ (Sleep ì „í™˜ ì•Œë¦¼)\n- onExpiryëŠ” Sleep ë§Œë£Œ ì‹œì—ë§Œ í˜¸ì¶œ\n\n### Persistence\n- saveSessions(): sleepStartedAt ì§ë ¬í™”\n- loadSessions(): SLEEPING ì„¸ì…˜ì€ MAX_SLEEP_DURATION ê¸°ì¤€ ë³µì›\n\n### Session Resume (session-initializer.ts)\n- SLEEPING ì„¸ì…˜ì— ë©”ì‹œì§€ ì˜¤ë©´ wakeFromSleep() í˜¸ì¶œ\n- state='MAIN'ìœ¼ë¡œ ë³µì›ë˜ë¯€ë¡œ dispatch ì¬ì‹¤í–‰ ì•ˆí•¨ (ê¸°ì¡´ sessionId ìœ ì§€)\n\n### UI (session-manager.ts)\n- handleSessionSleep(): Sleep ì „í™˜ Slack ì•Œë¦¼\n- formatUserSessionsBlocks(): ğŸ’¤ Sleep ìƒíƒœ í‘œì‹œ + Sleep ë§Œë£Œ ì¹´ìš´íŠ¸ë‹¤ìš´\n- message-formatter.ts: formatSleepExpiresIn() ì¶”ê°€\n\n### Facade (claude-handler.ts)\n- wakeFromSleep() ìœ„ì„ ë©”ì„œë“œ ì¶”ê°€\n\n### ìƒíƒœ ì „ì´: INITIALIZING â†’ MAIN â†” SLEEPING â†’ DELETED\n\n### ë³€ê²½ íŒŒì¼ (8ê°œ)\ntypes.ts, session-registry.ts, claude-handler.ts, session-initializer.ts, pipeline/types.ts, session-manager.ts, message-formatter.ts, event-router.ts","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:09.080393+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.237544+09:00","closed_at":"2026-02-02T18:47:00.941564+09:00","close_reason":"Implemented: SLEEPING state, 3-stage lifecycle (Activeâ†’Sleepâ†’Delete), wake-from-sleep on message, UI updates in session list","comments":[{"id":1,"issue_id":"somaw-2gc","author":"Z","text":"Review evidence: commit b6e37bd - feat: add sleep mode and fix context emoji duplication. 9 files, +257/-43 lines. Sleep mode with 3-stage cleanup (Activeâ†’Sleep 24hâ†’Delete 7d), wakeFromSleep on message, session list shows sleep state.","created_at":"2026-02-03T02:08:40Z"}]}
{"id":"somaw-3b3","title":"Refactor SessionLinkDirective to JSON format like UserChoice","description":"Change SessionLinkDirectiveHandler from XML to JSON format similar to UserChoiceExtractor pattern. Support both ```json blocks and raw JSON objects.","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T19:26:12.060916+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.238193+09:00","closed_at":"2026-01-30T19:28:18.729867+09:00","close_reason":"Refactored SessionLinkDirectiveHandler from XML to JSON format similar to UserChoiceExtractor. Updated tests and workflow prompts.","comments":[{"id":32,"issue_id":"somaw-3b3","author":"Z","text":"Review evidence: commit b287278 - feat(directives): add session_links JSON directive support. JSON format replacing XML, supports code-fenced json blocks and raw JSON objects.","created_at":"2026-02-03T02:09:51Z"}]}
{"id":"somaw-4fq","title":"Add directive module exports","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T18:41:33.73603+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.241622+09:00","closed_at":"2026-01-30T18:42:39.229523+09:00","close_reason":"Closed","comments":[{"id":34,"issue_id":"somaw-4fq","author":"Z","text":"Review evidence: commit b287278 - feat(directives): add session_links JSON directive support. directives/index.ts and slack/index.ts exports added.","created_at":"2026-02-03T02:09:55Z"}]}
{"id":"somaw-4ln","title":"ì„¸ì…˜ new/renew ì‹œ ê¸°ì¡´ ì»¨í…ìŠ¤íŠ¸ ì´ëª¨ì§€ ë¦¬ì…‹ í›„ ìƒˆë¡œ ì¶”ê°€","status":"closed","priority":1,"issue_type":"bug","owner":"z@insightquest.io","created_at":"2026-01-30T20:01:30.800304+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.237785+09:00","closed_at":"2026-01-30T20:03:47.436748+09:00","close_reason":"cleanupWithReaction() ë©”ì„œë“œ ì¶”ê°€, setOriginalMessage()ì—ì„œ ì´ëª¨ì§€ ë³´ì¡´ ë¡œì§ ì œê±°","comments":[{"id":14,"issue_id":"somaw-4ln","author":"Z","text":"Review evidence: commit 30c1dff - feat(slack): distinguish system messages with zap reaction. cleanupWithReaction() added to remove emoji from correct channel/ts, removed emoji preservation in setOriginalMessage() to fix duplication on new/renew.","created_at":"2026-02-03T02:09:09Z"}]}
{"id":"somaw-4ps","title":"Step 4: Add rate-limited assistant API wrappers to SlackApiHelper","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:57.618631+09:00","updated_at":"2026-02-03T11:37:48.243101+09:00","closed_at":"2026-01-30T14:37:49.178152+09:00","close_reason":"Closed","comments":[{"id":23,"issue_id":"somaw-4ps","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. Rate-limited API wrappers in slack-api-helper.ts (+26 lines).","created_at":"2026-02-03T02:09:30Z"}]}
{"id":"somaw-4wc","title":"Update src/slack/index.ts exports","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:37:02.562783+09:00","updated_at":"2026-02-03T11:37:48.242489+09:00","closed_at":"2026-01-30T14:41:25.825449+09:00","close_reason":"Closed","comments":[{"id":26,"issue_id":"somaw-4wc","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. src/slack/index.ts updated with AssistantStatusManager export (+3 lines).","created_at":"2026-02-03T02:09:30Z"}]}
{"id":"somaw-5ox","title":"ë´‡ í™œë™ ìƒíƒœ ì¶”ì  ì¸í”„ë¼ (working/waiting/idle)","description":"ë´‡ì˜ í™œë™ ìƒíƒœë¥¼ 3ê°€ì§€ë¡œ ì¶”ì í•˜ëŠ” ì¸í”„ë¼ êµ¬ì¶•: 1) working (AIê°€ ì‘ë‹µ ìƒì„± ì¤‘), 2) waiting (ìœ ì € ì‘ë‹µ ëŒ€ê¸° - AskUserQuestion/permission), 3) idle (ì‘ë‹µ ì™„ë£Œ). ConversationSessionì— activityState í•„ë“œ ì¶”ê°€. stream-executor.tsì—ì„œ ìƒíƒœ ì „í™˜ ë¡œì§. ì´ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ thread ì´ëª¨ì§€ì™€ ì„¸ì…˜ ëª©ë¡ì—ì„œ í‘œì‹œ.","design":"## êµ¬í˜„ ê³„íš: ë´‡ í™œë™ ìƒíƒœ ì¶”ì  ì¸í”„ë¼\n\n### íƒ€ì… ì •ì˜ (types.ts)\n- ActivityState = 'working' | 'waiting' | 'idle'\n- ConversationSessionì— activityState?: ActivityState, activityStateChangedAt?: number ì¶”ê°€\n\n### SessionRegistry (session-registry.ts)\n1. setActivityState(): ìƒíƒœ ì „í™˜ + ì¤‘ë³µ ì „í™˜ ë°©ì§€, idle ì „í™˜ ì‹œì—ë§Œ persist\n2. getActivityState()/getActivityStateByKey(): ì¡°íšŒ ë©”ì„œë“œ\n3. createSession(): activityState='idle'ë¡œ ì´ˆê¸°í™”\n4. resetSessionContext(): idleë¡œ ë¦¬ì…‹\n5. loadSessions(): ë³µì› ì‹œ ëª¨ë“  ì„¸ì…˜ idle ê°•ì œ\n6. saveSessions()/SerializedSession: activityState ì§ë ¬í™”\n\n### ClaudeHandler Facade\n- setActivityState(), getActivityState() ìœ„ì„ ë©”ì„œë“œ\n\n### ìƒíƒœ ì „í™˜ í¬ì¸íŠ¸\n| ì „í™˜ | ìœ„ì¹˜ | íŠ¸ë¦¬ê±° |\n|------|------|--------|\n| idleâ†’working | stream-executor.ts execute() ì§„ì… | ìŠ¤íŠ¸ë¦¼ ì‹œì‘ |\n| workingâ†’waiting | stream-executor.ts execute() ì™„ë£Œ | hasUserChoice=true |\n| workingâ†’idle | stream-executor.ts execute() ì™„ë£Œ | hasUserChoice=false |\n| workingâ†’idle | stream-executor.ts handleError() | ì—ëŸ¬/ì·¨ì†Œ |\n| waitingâ†’working | choice-action-handler.ts | ìœ ì € ì„ íƒ ìˆ˜ì‹  |\n\n### StreamProcessor (stream-processor.ts)\n- StreamResultì— hasUserChoice?: boolean ì¶”ê°€\n- _hasUserChoice ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¡œ choice ê°ì§€ ì¶”ì \n- handleTextMessage()ì—ì„œ choice/multiChoice ê°ì§€ ì‹œ true ì„¤ì •\n\n### ë³€ê²½ íŒŒì¼ (6ê°œ)\ntypes.ts, session-registry.ts, claude-handler.ts, stream-processor.ts, stream-executor.ts, choice-action-handler.ts","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:20.444762+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.240536+09:00","closed_at":"2026-02-02T18:57:40.860124+09:00","close_reason":"Implemented activity state tracking infrastructure across 6 files: types.ts (ActivityState type + ConversationSession fields), session-registry.ts (setActivityState/getActivityState + persistence), claude-handler.ts (delegation methods), stream-processor.ts (hasUserChoice in StreamResult), stream-executor.ts (state transitions at execute entry/completion/error), choice-action-handler.ts (waitingâ†’working on user choice)","comments":[{"id":6,"issue_id":"somaw-5ox","author":"Z","text":"Review evidence: commit 305e65b - feat: add activity state tracking, link titles, and repo grouping. ActivityState type added to types.ts, setActivityState/getActivityState in session-registry.ts, transitions at stream entry/completion/error/user-choice. 8 files, +379/-88 lines.","created_at":"2026-02-03T02:08:53Z"}]}
{"id":"somaw-6m0","title":"í”„ë¡œì íŠ¸ ì´ë¦„ ë³€ê²½: claude-code-slack â†’ soma-work","description":"package.json name, service.sh SERVICE_NAME, Dockerfile, docker-compose.yml, CLAUDE.md, README ë“±ì—ì„œ í”„ë¡œì íŠ¸ ì´ë¦„ì„ soma-workë¡œ ë³€ê²½. repo renameì€ ì‚¬ìš©ìê°€ GitHubì—ì„œ ì§ì ‘ ìˆ˜í–‰.","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T11:36:36.74741+09:00","created_by":"Z","updated_at":"2026-02-03T12:44:03.540015+09:00","closed_at":"2026-02-03T12:44:03.540015+09:00","close_reason":"vitest 423 passed (6 pre-existing failures in context-handler.test.ts, unrelated), 8 files +16/-16 lines, all source references updated, git stash test confirmed failures pre-existing","labels":["phase:review"]}
{"id":"somaw-6m0.1","title":"State change: phase â†’ review","description":"Set phase to review\n\nReason: 8 files renamed, vitest 423 passed (6 pre-existing failures in context-handler.test.ts, unrelated), no new failures","status":"open","priority":4,"issue_type":"event","created_at":"2026-02-03T12:43:57.765004+09:00","created_by":"Z","updated_at":"2026-02-03T12:43:57.765004+09:00","dependencies":[{"issue_id":"somaw-6m0.1","depends_on_id":"somaw-6m0","type":"parent-child","created_at":"2026-02-03T12:43:57.766275+09:00","created_by":"Z"}]}
{"id":"somaw-788","title":"Step 2: Create AssistantStatusManager class","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:11.520259+09:00","updated_at":"2026-02-03T11:37:48.24411+09:00","closed_at":"2026-01-30T14:38:07.549225+09:00","close_reason":"Closed","comments":[{"id":18,"issue_id":"somaw-788","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. AssistantStatusManager class (69 lines) with tool-specific status text mapping.","created_at":"2026-02-03T02:09:19Z"}]}
{"id":"somaw-7pl","title":"ì„¸ì…˜ ëª©ë¡: Repositoryë³„ ê·¸ë£¹í•‘","description":"ì„¸ì…˜ ëª©ë¡ì„ repositoryë³„ë¡œ ë¶„ë¦¬í•˜ì—¬ í‘œê¸°. ê°™ì€ repoì˜ ì„¸ì…˜ì„ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì–´ í‘œì‹œ. working directoryë‚˜ GitHub repo URLì—ì„œ repoëª… ì¶”ì¶œ. session-manager.tsì˜ formatUserSessionsBlocks() ìˆ˜ì •.","design":"## êµ¬í˜„ ê³„íš: Repositoryë³„ ê·¸ë£¹í•‘\n\n### Repoëª… ì¶”ì¶œ ì „ëµ (ìš°ì„ ìˆœìœ„)\n1. GitHub PR/Issue URL â†’ github.com/(owner/repo) ì¶”ì¶œ\n2. workingDirectory â†’ ë§ˆì§€ë§‰ ê²½ë¡œ ì»´í¬ë„ŒíŠ¸\n3. Fallback â†’ '_ê¸°íƒ€_'\n\n### session-manager.ts\n1. extractRepoName(session): repoëª… ì¶”ì¶œ í—¬í¼\n2. formatUserSessionsBlocks() ë¦¬íŒ©í„°ë§:\n   - Map\u003crepoName, sessions[]\u003eìœ¼ë¡œ ê·¸ë£¹í•‘\n   - ê·¸ë£¹ë³„ context í—¤ë”: ğŸ“¦ *org/repo* (N)\n   - ê·¸ë£¹ ë‚´ ì„¸ì…˜ì„ section ë¸”ë¡ìœ¼ë¡œ í‘œì‹œ\n   - ê·¸ë£¹ ì •ë ¬: ìµœê·¼ í™œë™ ì„¸ì…˜ ê¸°ì¤€ (Map ì‚½ì… ìˆœì„œ í™œìš©)\n\n### Block Kit êµ¬ì¡°\nheader â†’ [divider â†’ context(ğŸ“¦ repo) â†’ section(ì„¸ì…˜1) â†’ section(ì„¸ì…˜2)] Ã— ê·¸ë£¹ìˆ˜ â†’ divider â†’ actions(ìƒˆë¡œê³ ì¹¨) â†’ context(ë„ì›€ë§)\n\n### Edge Cases\n- workingDirectory/links ì—†ìŒ: '_ê¸°íƒ€_' ê·¸ë£¹\n- ëª¨ë“  ì„¸ì…˜ ê°™ì€ repo: ê·¸ë£¹ 1ê°œë§Œ í‘œì‹œ\n- Jira URL(github ì•„ë‹˜): workingDirectory fallback\n- Slack 50ë¸”ë¡ ì œí•œ: ì„¸ì…˜ 15ê°œ ì´í•˜ë©´ ì•ˆì „ (ì„¸ì…˜ë‹¹ ~3ë¸”ë¡ + ê·¸ë£¹ë‹¹ 2ë¸”ë¡)\n\n### ë³€ê²½ íŒŒì¼ (1ê°œ)\nsession-manager.ts","status":"closed","priority":3,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:39.498487+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.244506+09:00","closed_at":"2026-02-02T19:00:28.979654+09:00","close_reason":"Implemented repository grouping in session list. Added extractRepoName() helper (priority: GitHub URL â†’ workingDirectory â†’ fallback). formatUserSessionsBlocks() now groups sessions by repo with context headers when multiple repos exist.","dependencies":[{"issue_id":"somaw-7pl","depends_on_id":"somaw-r4d","type":"blocks","created_at":"2026-02-02T18:11:55.752164+09:00","created_by":"Z"}],"comments":[{"id":8,"issue_id":"somaw-7pl","author":"Z","text":"Review evidence: commit 305e65b - feat: add activity state tracking, link titles, and repo grouping. extractRepoName() in session-manager.ts groups sessions by repo from GitHub URL or workingDirectory path.","created_at":"2026-02-03T02:08:54Z"}]}
{"id":"somaw-89z","title":"ì„¸ì…˜ ëª©ë¡: Jira ì´ìŠˆ Status + PR ìƒíƒœ í‘œì‹œ","description":"ì„¸ì…˜ ëª©ë¡ì— Jira ì´ìŠˆì˜ í˜„ì¬ Status (To Do, In Progress, Done ë“±)ì™€ PR ìƒíƒœ (Open, Merged, Draft ë“±) í‘œì‹œ. ì´ìŠˆ/PR ì œëª© ì¡°íšŒ ì‹œ í•¨ê»˜ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ íš¨ìœ¨ì . ìƒíƒœë³„ ì•„ì´ì½˜/ìƒ‰ìƒ êµ¬ë¶„.","design":"## êµ¬í˜„ ê³„íš: Jira ì´ìŠˆ Status + PR ìƒíƒœ í‘œì‹œ\n\n### link-metadata-fetcher.ts í™•ì¥\n1. refreshStatusIfStale(link): statusCheckedAt 5ë¶„ ì´ˆê³¼ ì‹œ API ê°±ì‹ \n2. fetchJiraStatus(link): Jira REST API (fields=status) â†’ status.name\n3. fetchGitHubPRStatus(link): GitHub API â†’ state/merged/draft/mergeable_state ì¡°í•©\n   - mergedâ†’'merged', draftâ†’'draft', closedâ†’'closed'\n   - mergeable_state: cleanâ†’'ready', blockedâ†’'blocked', dirtyâ†’'conflicts'\n4. fetchGitHubIssueStatus(link): GitHub API â†’ state\n5. getStatusEmoji(link): ìƒíƒœë³„ ì´ëª¨ì§€ ë§¤í•‘\n   - Jira: To Doâ¬œ, In ProgressğŸ”µ, In ReviewğŸŸ¡, Doneâœ…\n   - PR: openğŸŸ¢, readyâœ…, mergedğŸŸ£, draftâšª, conflictsğŸ”¶\n   - Issue: openğŸŸ¢, closedâœ…\n\n### session-manager.ts formatLinksLine()\n- title + status ë³‘ë ¬ ì¡°íšŒ (Promise.all)\n- ìƒíƒœ ì´ëª¨ì§€ + í…ìŠ¤íŠ¸ í‘œì‹œ: ğŸ« PTN-123: ì œëª© ğŸ”µIn Progress | ğŸ”€ PR #42 âœ…ready\n\n### ì„±ëŠ¥\n- Stale TTL 5ë¶„, ìºì‹œ ì¬ì‚¬ìš©\n- API ì‹¤íŒ¨ ì‹œ ì´ì „ status ìœ ì§€ (graceful)\n\n### ë³€ê²½ íŒŒì¼ (2ê°œ)\nlink-metadata-fetcher.ts, session-manager.ts","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:32.172972+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.239515+09:00","closed_at":"2026-02-02T19:04:02.741017+09:00","close_reason":"Implemented Jira/PR status display: Refactored link-metadata-fetcher to return both title+status from single API call, added status emoji mapping (Jira: â¬œ/ğŸ”µ/ğŸŸ¡/âœ…, PR: ğŸŸ¢/âšª/ğŸŸ£/ğŸ”´), formatLinksLine shows status with emoji next to link","dependencies":[{"issue_id":"somaw-89z","depends_on_id":"somaw-dm9","type":"blocks","created_at":"2026-02-02T18:11:51.403318+09:00","created_by":"Z"}],"comments":[{"id":10,"issue_id":"somaw-89z","author":"Z","text":"Review evidence: commit 5dab00c - feat: add activity state UI display and link status with emoji indicators. link-metadata-fetcher returns title+status from single API call with emoji mapping for Jira (â¬œğŸ”µğŸŸ¡âœ…) and GitHub PR (ğŸŸ¢âšªğŸŸ£ğŸ”´). 5 files, +136/-61 lines.","created_at":"2026-02-03T02:08:54Z"}]}
{"id":"somaw-8jj","title":"Create SessionLinkDirectiveHandler","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T18:41:33.247234+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.238778+09:00","closed_at":"2026-01-30T18:42:39.154492+09:00","close_reason":"Closed","comments":[{"id":29,"issue_id":"somaw-8jj","author":"Z","text":"Review evidence: commit b287278 - feat(directives): add session_links JSON directive support. SessionLinkDirectiveHandler (209 lines) with JSON block and raw JSON detection, provider auto-detection, label extraction.","created_at":"2026-02-03T02:09:46Z"}]}
{"id":"somaw-8ks","title":"service.sh ë¦¬íŒ©í† ë§: ë°°í¬ í™˜ê²½ ëŒ€ì‘","description":"service.shë¥¼ /opt/soma-work ê²½ë¡œ ê¸°ë°˜ìœ¼ë¡œ ì—…ë°ì´íŠ¸. main/dev ì¸ìŠ¤í„´ìŠ¤ë¥¼ êµ¬ë¶„í•˜ëŠ” SERVICE_NAME (ì˜ˆ: com.soma-work.main, com.soma-work.dev). í™˜ê²½ë³„ plist ìƒì„± ì§€ì›.","status":"in_progress","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T11:36:49.479436+09:00","created_by":"Z","updated_at":"2026-02-03T12:44:36.893741+09:00","dependencies":[{"issue_id":"somaw-8ks","depends_on_id":"somaw-6m0","type":"blocks","created_at":"2026-02-03T11:36:55.840492+09:00","created_by":"Z"}]}
{"id":"somaw-8n7","title":"Build verification (npm run build + vitest)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:37:06.125685+09:00","updated_at":"2026-02-03T11:37:48.242025+09:00","closed_at":"2026-01-30T14:42:18.697427+09:00","close_reason":"Closed","comments":[{"id":28,"issue_id":"somaw-8n7","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. Full build: 10 files, +246/-4 lines, tsc clean, tests pass.","created_at":"2026-02-03T02:09:30Z"}]}
{"id":"somaw-9ik","title":"GitHub Actions ë°°í¬ ì›Œí¬í”Œë¡œìš° ì‘ì„±","description":"main ë¸Œëœì¹˜ push â†’ /opt/soma-work/main ë°°í¬, develop ë¸Œëœì¹˜ push â†’ /opt/soma-work/dev ë°°í¬. ì›Œí¬í”Œë¡œìš°: git pull â†’ npm ci â†’ npm run build â†’ service restart. self-hosted runnerì—ì„œ ì‹¤í–‰. LaunchDaemonì„ í†µí•œ ì„œë¹„ìŠ¤ ì¬ì‹œì‘.","status":"open","priority":1,"issue_type":"feature","owner":"z@insightquest.io","created_at":"2026-02-03T11:36:47.33323+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.236161+09:00","dependencies":[{"issue_id":"somaw-9ik","depends_on_id":"somaw-gfh","type":"blocks","created_at":"2026-02-03T11:36:55.69448+09:00","created_by":"Z"},{"issue_id":"somaw-9ik","depends_on_id":"somaw-b17","type":"blocks","created_at":"2026-02-03T11:36:55.768+09:00","created_by":"Z"}]}
{"id":"somaw-9sh","title":"ì„¸ì…˜ ì´ˆê¸°í™” ì‹œ ìœ ì €ì—ê²Œ ìì„¸í•œ ë¡œê·¸ ì•Œë¦¼","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T20:01:26.227917+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.241234+09:00","closed_at":"2026-01-30T20:04:18.673551+09:00","close_reason":"new-handler.tsì—ì„œ ì„¸ì…˜ ë¦¬ì…‹ ì‹œ ìì„¸í•œ ì´ˆê¸°í™”/ìœ ì§€ í•­ëª© í‘œì‹œ","comments":[{"id":16,"issue_id":"somaw-9sh","author":"Z","text":"Review evidence: commit 30c1dff - feat(slack): distinguish system messages with zap reaction. new-handler.ts shows detailed session reset log listing cleared/preserved items to user.","created_at":"2026-02-03T02:09:10Z"}]}
{"id":"somaw-a4c","title":"Bug: renew ì‹¤íŒ¨ - save_result íŒŒì„œê°€ AI ì¶œë ¥ ë³€í˜•ì— ì·¨ì•½","description":"## ì¦ìƒ\nrenew ëª…ë ¹ ì‹¤í–‰ ì‹œ \"Save did not complete as expected. Renew cancelled.\" ì—ëŸ¬ë¡œ ì‹¤íŒ¨.\n\n## ì›ì¸ ë¶„ì„\nstream-executor.tsì˜ parseSaveResult()ì™€ buildRenewContinuation()ì´ save ìŠ¤í‚¬ì˜ AI ì¶œë ¥ì„ íŒŒì‹±í•  ë•Œ, AIê°€ ìŠ¤í‚¤ë§ˆë¥¼ ì •í™•íˆ ì•ˆ ë”°ë¥´ë©´ ì‹¤íŒ¨í•¨.\n\n### ì‹¤ì œ AI ì¶œë ¥ (ì‹¤íŒ¨ ì¼€ì´ìŠ¤)\n```json\n{\"save_result\": {\"status\": \"saved\", \"save_id\": \"20260203_111140\", \"path\": \"...\", \"title\": \"...\", \"summary\": \"...\"}}\n```\n\n### ê¸°ëŒ€í•˜ëŠ” ìŠ¤í‚¤ë§ˆ\n```json\n{\"save_result\": {\"success\": true, \"id\": \"...\", \"files\": [{\"name\": \"context.md\", \"content\": \"...\"}]}}\n```\n\n### ë¶ˆì¼ì¹˜ 3ê°€ì§€\n1. `success: true` ëŒ€ì‹  `status: \"saved\"` â†’ saveResult.successê°€ undefined â†’ falsy â†’ ì‹¤íŒ¨ ì²˜ë¦¬ (line 561)\n2. `files` ë°°ì—´ ì—†ìŒ â†’ \"no files returned\" ì—ëŸ¬ (line 573)\n3. `id` ëŒ€ì‹  `save_id` ì‚¬ìš©\n\n## ì˜í–¥\n- renew ëª…ë ¹ì´ ì‚¬ì‹¤ìƒ ì‘ë™ ë¶ˆê°€\n- AIê°€ ìŠ¤í‚¬ JSON ìŠ¤í‚¤ë§ˆë¥¼ 100% ì •í™•íˆ ë”°ë¥´ëŠ” ê²ƒì€ ë³´ì¥í•  ìˆ˜ ì—†ìŒ\n\n## ìˆ˜ì • ë°©í–¥\nparseSaveResult()ë¥¼ ê´€ëŒ€í•˜ê²Œ(lenient) ìˆ˜ì •:\n- success íŒë³„: `success === true` OR `status === \"saved\"` OR `status === \"success\"` \n- id ì¶”ì¶œ: `id` OR `save_id`\n- files ë¯¸í¬í•¨ ì‹œ: save_id/pathì—ì„œ íŒŒì¼ ì§ì ‘ ì½ê¸°ë¡œ í´ë°±\n- ë˜ëŠ” saveë¥¼ AI ì˜ì¡´ ì—†ì´ ì½”ë“œë¡œ ì§ì ‘ êµ¬í˜„ (ê·¼ë³¸ í•´ê²°)\n\n## ê´€ë ¨ ì½”ë“œ\n- src/slack/pipeline/stream-executor.ts:540-654 (buildRenewContinuation, parseSaveResult)\n- src/slack/commands/renew-handler.ts (renew ì§„ì…ì )\n- src/local/.commands-body/save.md (ìŠ¤í‚¬ ìŠ¤í‚¤ë§ˆ ì •ì˜)","status":"open","priority":1,"issue_type":"bug","owner":"z@insightquest.io","created_at":"2026-02-03T11:15:51.925248+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.237106+09:00"}
{"id":"somaw-asx","title":"context ë¬¸ë§¥ì‚¬ìš©ëŸ‰ ë¦¬ì…‹ ì•ˆë˜ê³  0%ê¹Œì§€ ê° ë²„ê·¸ ìˆ˜ì •","status":"closed","priority":1,"issue_type":"bug","owner":"z@insightquest.io","created_at":"2026-01-30T20:01:29.1125+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.237988+09:00","closed_at":"2026-01-30T20:03:47.435962+09:00","close_reason":"cleanupWithReaction() ë©”ì„œë“œ ì¶”ê°€, setOriginalMessage()ì—ì„œ ì´ëª¨ì§€ ë³´ì¡´ ë¡œì§ ì œê±°","comments":[{"id":15,"issue_id":"somaw-asx","author":"Z","text":"Review evidence: commit 30c1dff - feat(slack): distinguish system messages with zap reaction. session.usage cleared on reset in session-registry.ts to fix context percentage not resetting to 0.","created_at":"2026-02-03T02:09:09Z"}]}
{"id":"somaw-ayr","title":"Write tests for AssistantStatusManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:37:04.03802+09:00","updated_at":"2026-02-03T11:37:48.242277+09:00","closed_at":"2026-01-30T14:41:55.547525+09:00","close_reason":"Closed","comments":[{"id":27,"issue_id":"somaw-ayr","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. assistant-status-manager.test.ts (101 lines) testing status mapping and lifecycle.","created_at":"2026-02-03T02:09:30Z"}]}
{"id":"somaw-b05","title":"Step 3d: Add setStatus to session-initializer.ts for dispatch","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:18.62379+09:00","updated_at":"2026-02-03T11:37:48.243299+09:00","closed_at":"2026-01-30T14:40:57.087733+09:00","close_reason":"Closed","comments":[{"id":22,"issue_id":"somaw-b05","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. session-initializer.ts sets status on dispatch workflow start.","created_at":"2026-02-03T02:09:20Z"}]}
{"id":"somaw-b17","title":"ë°°í¬ ë””ë ‰í† ë¦¬ êµ¬ì¡° ì„¤ì •: /opt/soma-work/{main,dev}","description":"/opt/soma-work/mainê³¼ /opt/soma-work/dev ë””ë ‰í† ë¦¬ ìƒì„±. ê°ê° .env, .system.prompt ë³µì‚¬, ./data ì‹¬ë³¼ë¦­ ë§í¬ ë˜ëŠ” ë³µì‚¬. LaunchDaemon plist íŒŒì¼ 2ê°œ ìƒì„± (main/dev ê°ê°).","status":"in_progress","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T11:36:45.27782+09:00","created_by":"Z","updated_at":"2026-02-03T12:44:36.953217+09:00","dependencies":[{"issue_id":"somaw-b17","depends_on_id":"somaw-6m0","type":"blocks","created_at":"2026-02-03T11:36:55.620358+09:00","created_by":"Z"}]}
{"id":"somaw-dgp","title":"Write tests for SessionLinkDirectiveHandler","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T18:41:33.829811+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.241429+09:00","closed_at":"2026-01-30T18:44:24.834188+09:00","close_reason":"Closed","comments":[{"id":33,"issue_id":"somaw-dgp","author":"Z","text":"Review evidence: commit b287278 - feat(directives): add session_links JSON directive support. session-link-directive.test.ts (244 lines) covering parsing, provider detection, label extraction.","created_at":"2026-02-03T02:09:53Z"}]}
{"id":"somaw-dm9","title":"ì„¸ì…˜ ëª©ë¡: Jira ì´ìŠˆ/PR ì œëª© í‘œì‹œ","description":"ì„¸ì…˜ ëª©ë¡ì—ì„œ ì—°ê²°ëœ Jira ì´ìŠˆê°€ ìˆìœ¼ë©´ ì´ìŠˆ ì œëª© í‘œì‹œ (ê¸´ ê²½ìš° truncate). ì´ìŠˆ ì—†ê³  PRë§Œ ìˆìœ¼ë©´ PR ì œëª© í‘œì‹œ. session-manager.tsì˜ formatUserSessionsBlocks()ì—ì„œ ì„¸ì…˜ì˜ links ë°ì´í„° í™œìš©í•˜ì—¬ Jira API/GitHub APIë¡œ ì œëª© ì¡°íšŒ í›„ í‘œì‹œ. ìºì‹± ê³ ë ¤.","design":"## êµ¬í˜„ ê³„íš: Jira ì´ìŠˆ/PR ì œëª© í‘œì‹œ\n\n### ë°ì´í„° ëª¨ë¸ (types.ts)\n- SessionLinkì— title?: string ì¶”ê°€\n\n### ì‹ ê·œ íŒŒì¼: link-metadata-fetcher.ts\n- fetchTitleIfMissing(link): title ì—†ìœ¼ë©´ APIë¡œ ì¡°íšŒ\n- fetchJiraTitle(link): Jira REST API (fields=summary)\n- fetchGitHubPRTitle(link): GitHub API /pulls/{number}\n- fetchGitHubIssueTitle(link): GitHub API /issues/{number}\n- truncateTitle(title, maxLen=40): ê¸¸ë©´ truncate\n- In-memory ìºì‹œ (5ë¶„ TTL)\n\n### ì¸ì¦\n- Jira: JIRA_BASE_URL, JIRA_EMAIL, JIRA_API_TOKEN í™˜ê²½ë³€ìˆ˜\n- GitHub: GITHUB_TOKEN í™˜ê²½ë³€ìˆ˜ (ê¸°ì¡´)\n\n### session-manager.ts formatLinksLine()\n- asyncë¡œ ë³€ê²½\n- issueê°€ ìˆìœ¼ë©´ title í‘œì‹œ: ğŸ« PTN-123: ë¡œê·¸ì¸ ë¦¬íŒ©í† ë§\n- issue ì—†ê³  PRë§Œ ìˆìœ¼ë©´ PR title í‘œì‹œ: ğŸ”€ PR #42: feat: OAuth\n\n### í‘œì‹œ ìš°ì„ ìˆœìœ„\n1. Jira ì´ìŠˆ ì œëª© (ìˆìœ¼ë©´)\n2. PR ì œëª© (ì´ìŠˆ ì—†ì„ ë•Œë§Œ)\n\n### ë³€ê²½ íŒŒì¼ (3ê°œ)\ntypes.ts, link-metadata-fetcher.ts (ì‹ ê·œ), session-manager.ts","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:28.917843+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.240015+09:00","closed_at":"2026-02-02T18:59:25.155654+09:00","close_reason":"Implemented Jira/PR title display: Added title field to SessionLink type, created link-metadata-fetcher.ts with GitHub/Jira API integration and 5-min TTL cache, updated formatLinksLine() to async with title fetching. Issue title takes priority over PR title.","comments":[{"id":7,"issue_id":"somaw-dm9","author":"Z","text":"Review evidence: commit 305e65b - feat: add activity state tracking, link titles, and repo grouping. link-metadata-fetcher.ts created (117 lines) with GitHub/Jira API integration, 5-min TTL cache for titles.","created_at":"2026-02-03T02:08:53Z"}]}
{"id":"somaw-e9h","title":"Step 3a: Wire AssistantStatusManager into SlackHandler","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:13.276327+09:00","updated_at":"2026-02-03T11:37:48.243905+09:00","closed_at":"2026-01-30T14:39:04.404979+09:00","close_reason":"Closed","comments":[{"id":19,"issue_id":"somaw-e9h","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. Wired into slack-handler.ts constructor, passed to pipeline components.","created_at":"2026-02-03T02:09:19Z"}]}
{"id":"somaw-fae","title":"Update workflow prompts with response_directive","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T18:41:33.643806+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.241811+09:00","closed_at":"2026-01-30T18:43:46.123785+09:00","close_reason":"Closed","comments":[{"id":35,"issue_id":"somaw-fae","author":"Z","text":"Review evidence: commit b287278 - feat(directives): add session_links JSON directive support. jira-create-pr.prompt and pr-fix-and-update.prompt updated with JSON format. 8 files total, 511 new lines.","created_at":"2026-02-03T02:09:56Z"}]}
{"id":"somaw-gfh","title":"GitHub Actions self-hosted runner ì„¤ì¹˜ ë° ì„¤ì •","description":"Mac Miniì— GitHub Actions self-hosted runner ì„¤ì¹˜. main/dev ë¸Œëœì¹˜ë³„ ë°°í¬ë¥¼ ìœ„í•´ ë¼ë²¨ ì„¤ì •. runnerë¥¼ LaunchDaemonìœ¼ë¡œ ë“±ë¡í•˜ì—¬ ë¶€íŒ… ì‹œ ìë™ ì‹œì‘.","status":"open","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-03T11:36:42.316883+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.236629+09:00","dependencies":[{"issue_id":"somaw-gfh","depends_on_id":"somaw-6m0","type":"blocks","created_at":"2026-02-03T11:36:55.545982+09:00","created_by":"Z"}]}
{"id":"somaw-hl0","title":"ì„¸ì…˜ ëª©ë¡: ë¦¬í”„ë ˆì‹œ ë²„íŠ¼ ì¶”ê°€","description":"ì„¸ì…˜ ëª©ë¡ ìƒë‹¨ì— ë¦¬í”„ë ˆì‹œ ë²„íŠ¼ ì¶”ê°€. ëˆ„ë¥´ë©´ ì„¸ì…˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ì¶œë ¥. session-manager.tsì˜ formatUserSessionsBlocks()ì— Slack Block Kit ë²„íŠ¼ ì¶”ê°€, action-handlersì—ì„œ ë¦¬í”„ë ˆì‹œ ì•¡ì…˜ í•¸ë“¤ëŸ¬ êµ¬í˜„.","design":"## êµ¬í˜„ ê³„íš: ë¦¬í”„ë ˆì‹œ ë²„íŠ¼\n\n### session-manager.ts formatUserSessionsBlocks()\n- í•˜ë‹¨ divider ë’¤ì— actions ë¸”ë¡ ì¶”ê°€ (showControls=trueì¼ ë•Œë§Œ)\n- ë²„íŠ¼: {type:'button', text:'ğŸ”„ ìƒˆë¡œê³ ì¹¨', action_id:'refresh_sessions'}\n\n### session-action-handler.ts\n- handleRefreshSessions(body, respond): userId ì¶”ì¶œ â†’ formatUserSessionsBlocks(userId, {showControls:true}) â†’ respond({replace_original:true})\n\n### actions/index.ts\n- app.action('refresh_sessions', ...) ë“±ë¡\n\n### Block Kit êµ¬ì¡°\nheader â†’ divider â†’ sessions... â†’ divider â†’ [actions: ğŸ”„ ìƒˆë¡œê³ ì¹¨] â†’ context\n\n### Edge Cases\n- ëª¨ë“  ì„¸ì…˜ ì¢…ë£Œ í›„ ë¦¬í”„ë ˆì‹œ: ë¹ˆ ëª©ë¡ ë©”ì‹œì§€ í‘œì‹œ\n- ephemeral ë©”ì‹œì§€ 30ë¶„ ë§Œë£Œ: ë§Œë£Œ ì „ì—ë§Œ ë™ì‘\n- public ëª¨ë“œ: showControls=false â†’ ë²„íŠ¼ ë¯¸í‘œì‹œ\n\n### ë³€ê²½ íŒŒì¼ (3ê°œ)\nsession-manager.ts, session-action-handler.ts, actions/index.ts","status":"closed","priority":3,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:25.806247+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.244751+09:00","closed_at":"2026-02-02T18:51:47.559295+09:00","close_reason":"Implemented in commit 616d058","comments":[{"id":4,"issue_id":"somaw-hl0","author":"Z","text":"Review evidence: commit 616d058 - feat: add lifecycle emojis, refresh button, remove workDir. Refresh button added to session list UI in actions/index.ts and session-action-handler.ts.","created_at":"2026-02-03T02:08:40Z"}]}
{"id":"somaw-ib3","title":"ì„¸ì…˜ ëª©ë¡: PR ë¨¸ì§€ ë²„íŠ¼ í‘œì‹œ","description":"PRì´ ë¨¸ì§€ ê°€ëŠ¥í•œ ìƒíƒœ(checks passed, approved, no conflicts)ì´ë©´ ë¨¸ì§€ ë²„íŠ¼ í‘œì‹œ. ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ ì„¸ì…˜ì˜ AIì—ê²Œ PR ë¨¸ì§€ë¥¼ ìš”ì²­. GitHub APIë¡œ mergeable ìƒíƒœ í™•ì¸, action-handlerì—ì„œ ë¨¸ì§€ ì•¡ì…˜ êµ¬í˜„.","design":"## êµ¬í˜„ ê³„íš: PR ë¨¸ì§€ ë²„íŠ¼\n\n### link-metadata-fetcher.ts\n- GitHubPRDetails íƒ€ì…: {state, merged, mergeable, mergeable_state, draft, head, base}\n- fetchGitHubPRDetails(link): GitHub API /pulls/{number} ìƒì„¸ ì •ë³´\n- isPRMergeable(details): open + !draft + !merged + mergeable=true + mergeable_state='clean'\n- prDetailsCache: 5ë¶„ TTL\n\n### session-manager.ts formatUserSessionsBlocks()\n- PRì´ mergeableì¼ ë•Œë§Œ 'ğŸ”€ Merge PR' ë²„íŠ¼ ì¶”ê°€ (style:'primary')\n- Jira transition actions ë¸”ë¡ì— í•©ë¥˜ (5ê°œ ë¯¸ë§Œì´ë©´) ë˜ëŠ” ë³„ë„ actions ë¸”ë¡\n- confirm dialog: sourceâ†’target ë¸Œëœì¹˜ ì •ë³´ í‘œì‹œ\n\n### ì‹ ê·œ: pr-action-handler.ts\n- handleMerge(body, respond):\n  1. valueì—ì„œ sessionKey/prUrl/prLabel/baseBranch/headBranch íŒŒì‹±\n  2. ì„¸ì…˜ ì¡´ì¬ + ì†Œìœ ê¶Œ í™•ì¸\n  3. í•´ë‹¹ ì„¸ì…˜ threadì— ë¨¸ì§€ ìš”ì²­ ë©”ì‹œì§€ ì£¼ì…\n  4. ë©”ì‹œì§€: 'PR ë¨¸ì§€í•´ì£¼ì„¸ìš”. URL, Sourceâ†’Target, squash merge, ë¸Œëœì¹˜ ì‚­ì œ'\n\n### actions/index.ts\n- app.action(/^merge_pr_/, ...) ì •ê·œì‹ ë§¤ì¹­ìœ¼ë¡œ ë“±ë¡\n\n### AI ìœ„ì„ ì„¤ê³„ (Jira ì „í™˜ê³¼ ë™ì¼ íŒ¨í„´)\n- messageHandlerë¡œ ì„¸ì…˜ AIì—ê²Œ ë¨¸ì§€ ìš”ì²­ ì „ë‹¬\n- AIê°€ gh pr merge ë“±ìœ¼ë¡œ ì‹¤í–‰\n\n### ì•ˆì „ì¥ì¹˜\n- confirm dialog í•„ìˆ˜ (ë¨¸ì§€ëŠ” ë˜ëŒë¦¬ê¸° ì–´ë ¤ì›€)\n- mergeable_state!='clean'ì´ë©´ ë²„íŠ¼ ìì²´ ìˆ¨ê¹€\n\n### ë³€ê²½ íŒŒì¼ (4ê°œ)\nlink-metadata-fetcher.ts, session-manager.ts, pr-action-handler.ts (ì‹ ê·œ), actions/index.ts","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:37.15578+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.239013+09:00","closed_at":"2026-02-03T10:31:07.490195+09:00","close_reason":"Implemented Jira transition buttons and PR merge button in session list","dependencies":[{"issue_id":"somaw-ib3","depends_on_id":"somaw-89z","type":"blocks","created_at":"2026-02-02T18:11:53.959706+09:00","created_by":"Z"}],"comments":[{"id":12,"issue_id":"somaw-ib3","author":"Z","text":"Review evidence: commit c9f1c34 - feat: add Jira transition buttons and PR merge button. fetchGitHubPRDetails()+isPRMergeable() in link-metadata-fetcher.ts, pr-action-handler.ts (99 lines), merge button with confirm dialog. 5 files, +491/-2 lines.","created_at":"2026-02-03T02:09:01Z"}]}
{"id":"somaw-ka6","title":"Step 6: Thread title integration via setTitle (bonus)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:37:00.921829+09:00","updated_at":"2026-02-03T11:37:48.242701+09:00","closed_at":"2026-01-30T14:41:11.473008+09:00","close_reason":"Closed","comments":[{"id":25,"issue_id":"somaw-ka6","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. setTitle integration in session-initializer.ts after workflow dispatch.","created_at":"2026-02-03T02:09:30Z"}]}
{"id":"somaw-l5c","title":"ì„¸ì…˜ ì¢…ë£Œ/Sleep ì´ëª¨ì§€: threadì— ìƒíƒœ í‘œì‹œ","description":"ì„¸ì…˜ì´ ì¢…ë£Œ/Sleepë˜ë©´ í•´ë‹¹ threadì˜ ì›ë³¸ ë©”ì‹œì§€ì— ì„¸ì…˜ ì¢…ë£Œ ì´ëª¨ì§€ ì¶”ê°€ (ì˜ˆ: zzz for sleep, octagonal_sign for terminated). ìœ ì €ê°€ ë‹¤ì‹œ ë´‡ì„ ë¶ˆëŸ¬ ëŒ€í™” ì¬ê°œí•˜ë©´ ì¢…ë£Œ ì´ëª¨ì§€ ì œê±° í›„ ì‘ì—… ì§„í–‰. reaction-manager.ts í™•ì¥, session-initializer.tsì—ì„œ ì¬ê°œ ì‹œ ì´ëª¨ì§€ ì œê±° ë¡œì§ ì¶”ê°€.","design":"## êµ¬í˜„ ê³„íš: ì„¸ì…˜ ì¢…ë£Œ/Sleep ì´ëª¨ì§€\n\n### ì´ëª¨ì§€ ì„¤ê³„\n- crescent_moon: ìœ íœ´ ê²½ê³  (12h idle check)\n- zzz: ì„¸ì…˜ ì¢…ë£Œ/Sleep/ë§Œë£Œ\n\n### ReactionManager í™•ì¥ (reaction-manager.ts)\n1. ìƒìˆ˜: SESSION_IDLE_EMOJI='crescent_moon', SESSION_EXPIRED_EMOJI='zzz'\n2. setSessionIdle(sessionKey): ì›ë³¸ ë©”ì‹œì§€ì— crescent_moon ì¶”ê°€\n3. setSessionExpired(sessionKey, channel?, ts?): crescent_moon ì œê±° + zzz ì¶”ê°€ (fallback channel/ts íŒŒë¼ë¯¸í„°)\n4. clearSessionLifecycleEmojis(channel, ts): ëª¨ë“  lifecycle ì´ëª¨ì§€ ì œê±°\n\n### í†µí•© í¬ì¸íŠ¸\n- session-manager.ts handleIdleCheck(): setSessionIdle() í˜¸ì¶œ\n- session-manager.ts handleSessionExpiry()/handleSessionSleep(): setSessionExpired() í˜¸ì¶œ\n- session-action-handler.ts handleTerminateSession()/handleIdleClose()/handleCloseConfirm(): setSessionExpired() í˜¸ì¶œ\n- session-initializer.ts initialize(): clearSessionLifecycleEmojis() í˜¸ì¶œ (ëŒ€í™” ì¬ê°œ ì‹œ)\n- session-action-handler.ts handleIdleKeep(): clearSessionLifecycleEmojis() í˜¸ì¶œ\n\n### ì˜ì¡´ì„± ì „ë‹¬\n- SessionUiManager constructorì— reactionManager ì¶”ê°€\n- ActionHandlerContextì— reactionManager ì¶”ê°€\n- slack-handler.tsì—ì„œ reactionManager ì „ë‹¬\n\n### ì´ëª¨ì§€ ë ˆì´ì–´ (ë…ë¦½ ë™ì‘)\n1. Status: thinking_face/gear/white_check_mark/x/stop_sign (ReactionManager)\n2. Context%: 80p/60p/40p/20p/0p (ContextWindowManager)\n3. Lifecycle: crescent_moon/zzz (ReactionManager - ì‹ ê·œ, ë³„ë„ ê´€ë¦¬)\n\n### ë³€ê²½ íŒŒì¼ (7ê°œ)\nreaction-manager.ts, session-manager.ts, session-action-handler.ts, session-initializer.ts, slack-handler.ts, actions/index.ts, actions/types.ts","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:17.410882+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.240798+09:00","closed_at":"2026-02-02T18:51:47.55796+09:00","close_reason":"Implemented in commit 616d058","dependencies":[{"issue_id":"somaw-l5c","depends_on_id":"somaw-2gc","type":"blocks","created_at":"2026-02-02T18:11:48.103085+09:00","created_by":"Z"}],"comments":[{"id":3,"issue_id":"somaw-l5c","author":"Z","text":"Review evidence: commit 616d058 - feat: add lifecycle emojis, refresh button, remove workDir. ReactionManager extended with lifecycle emoji layer (crescent_moon for idle, zzz for sleep/terminated).","created_at":"2026-02-03T02:08:40Z"}]}
{"id":"somaw-mq5","title":"Add authentication to conversation viewer web server","description":"## Security: Unauthenticated Web Server Exposes All Conversation Data\n\n**Severity:** HIGH | **Category:** auth_bypass / data_exposure | **Confidence:** 8/10\n\n**File:** src/conversation/web-server.ts\n\n### Problem\nConversation viewer Fastify server has zero authentication on all routes. Any client reaching the port can:\n- Enumerate all conversations via /api/conversations\n- Read full content (user messages, AI responses, Slack user IDs, channel IDs)\n- Export conversations as markdown\n\nCONVERSATION_VIEWER_URL config and Slack link posting confirm remote access is intended. Docker maps port 3000 externally by default.\n\n### Exploit Scenario\n1. Operator sets CONVERSATION_VIEWER_URL to public URL\n2. Attacker hits GET /api/conversations to enumerate all conversation IDs\n3. Reads full conversation content including credentials, internal URLs, proprietary code\n\n### Recommendation\n- Add auth middleware (Bearer token via CONVERSATION_VIEWER_TOKEN at minimum)\n- Ideally integrate Slack user identity verification so only participants can view their conversations\n- Consider removing the list endpoint or requiring elevated auth for it","status":"open","priority":1,"issue_type":"bug","owner":"z@insightquest.io","created_at":"2026-02-03T11:38:27.921338+09:00","created_by":"Z","updated_at":"2026-02-03T11:38:27.921338+09:00"}
{"id":"somaw-puj","title":"ëª¨ë¸ ì‘ë‹µê³¼ ë´‡ ì‘ë‹µ ëª…í™•íˆ êµ¬ë¶„","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T20:01:27.886542+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.24104+09:00","closed_at":"2026-01-30T20:11:09.395486+09:00","close_reason":"[Bot] íƒœê·¸ ì¶”ê°€ (new, renew, context, cwd í•¸ë“¤ëŸ¬) + MessageFormatter.botMessage() í—¬í¼ í•¨ìˆ˜ ì¶”ê°€","comments":[{"id":13,"issue_id":"somaw-puj","author":"Z","text":"Review evidence: commit 30c1dff - feat(slack): distinguish system messages with zap reaction. postSystemMessage() helper sends message + adds âš¡ zap reaction to distinguish bot system messages from AI responses. 11 files, +311/-74 lines.","created_at":"2026-02-03T02:09:09Z"}]}
{"id":"somaw-r2l","title":"Wire callback in StreamExecutor","status":"closed","priority":1,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-01-30T18:41:33.548038+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.238392+09:00","closed_at":"2026-01-30T18:43:21.226016+09:00","close_reason":"Closed","comments":[{"id":31,"issue_id":"somaw-r2l","author":"Z","text":"Review evidence: commit b287278 - feat(directives): add session_links JSON directive support. stream-executor.ts wired with onSessionLinksDetected callback, 9 new lines.","created_at":"2026-02-03T02:09:50Z"}]}
{"id":"somaw-r4d","title":"ì„¸ì…˜ ëª©ë¡: ì›Œí‚¹ ë””ë ‰í† ë¦¬ í‘œì‹œ ì‚­ì œ","description":"session-manager.tsì˜ formatUserSessionsBlocks()ì—ì„œ Working Dir í‘œì‹œ í•­ëª© ì œê±°. ê°„ë‹¨í•œ UI ì •ë¦¬ ì‘ì—….","design":"## êµ¬í˜„ ê³„íš: ì›Œí‚¹ ë””ë ‰í† ë¦¬ í‘œì‹œ ì‚­ì œ\n\n### session-manager.ts formatUserSessionsBlocks()\n- L78-80 ì‚­ì œ: workDir ë³€ìˆ˜ ìƒì„± ì½”ë“œ\n- L113 ìˆ˜ì •: 'ğŸ“ ${workDir} |' ë¶€ë¶„ ì œê±°\n  ë³€ê²½ì „: ğŸ¤– ${modelDisplay} | ğŸ“ ${workDir} | ğŸ• ${timeAgo} | â³ ${expiresIn}\n  ë³€ê²½í›„: ğŸ¤– ${modelDisplay} | ğŸ• ${timeAgo} | â³ ${expiresIn}\n\n### session-manager.ts formatAllSessions()\n- L221-223 ì‚­ì œ: workDir ë³€ìˆ˜ ìƒì„± ì½”ë“œ\n- L228 ìˆ˜ì •: 'ğŸ“ `${workDir}` |' ë¶€ë¶„ ì œê±°\n\n### ì£¼ì˜: workingDirectory í•„ë“œ ìì²´ëŠ” ìœ ì§€ (repo ê·¸ë£¹í•‘ì—ì„œ í™œìš©)\n\n### ë³€ê²½ íŒŒì¼ (1ê°œ)\nsession-manager.ts","status":"closed","priority":3,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:12.619007+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.244962+09:00","closed_at":"2026-02-02T18:51:47.55872+09:00","close_reason":"Implemented in commit 616d058","comments":[{"id":5,"issue_id":"somaw-r4d","author":"Z","text":"Review evidence: commit 616d058 - feat: add lifecycle emojis, refresh button, remove workDir. Removed working directory display from formatUserSessionsBlocks and formatAllSessions.","created_at":"2026-02-03T02:08:40Z"}]}
{"id":"somaw-tgi","title":"Step 1: Update Slack App manifests with assistant:write scope","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:09.495528+09:00","updated_at":"2026-02-03T11:37:48.244301+09:00","closed_at":"2026-01-30T14:37:14.455625+09:00","close_reason":"Closed","comments":[{"id":17,"issue_id":"somaw-tgi","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. assistant:write scope added to slack-app-manifest.json and .yaml.","created_at":"2026-02-03T02:09:19Z"}]}
{"id":"somaw-u3x","title":"Step 3c: Add setStatus to tool-event-processor.ts for MCP","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:17.016766+09:00","updated_at":"2026-02-03T11:37:48.243493+09:00","closed_at":"2026-01-30T14:40:27.590089+09:00","close_reason":"Closed","comments":[{"id":21,"issue_id":"somaw-u3x","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. tool-event-processor.ts shows MCP server name in spinner during tool calls.","created_at":"2026-02-03T02:09:20Z"}]}
{"id":"somaw-uvg","title":"Bug: ë¬¸ë§¥% ì´ëª¨ì§€ê°€ ì—¬ëŸ¬ê°œ í‘œì‹œë˜ëŠ” ë²„ê·¸ ìˆ˜ì •","description":"context-window-manager.tsì—ì„œ ë¬¸ë§¥% ì´ëª¨ì§€(80p/60p/40p/20p/0p)ê°€ ì¤‘ë³µ í‘œì‹œë˜ëŠ” ë²„ê·¸. updateContextEmoji()ì—ì„œ ì´ì „ ì´ëª¨ì§€ ì œê±° ë¡œì§ ì ê²€. ë¦¬ì•¡ì…˜ ì œê±° ì‹¤íŒ¨ ì‹œ ì¤‘ë³µ ë°œìƒ ê°€ëŠ¥ì„±. ê²½í•© ì¡°ê±´ì´ë‚˜ ë¹„ë™ê¸° ì²˜ë¦¬ ëˆ„ë½ í™•ì¸ í•„ìš”.","design":"## êµ¬í˜„ ê³„íš: ë¬¸ë§¥% ì´ëª¨ì§€ ì¤‘ë³µ ë²„ê·¸ ìˆ˜ì •\n\n### Root Cause\nsetOriginalMessage()ê°€ ë§¤ ë©”ì‹œì§€ë§ˆë‹¤ í˜¸ì¶œë˜ë©´ì„œ currentEmojië¥¼ nullë¡œ ë¦¬ì…‹í•˜ì§€ë§Œ, Slackì— ë¶™ì–´ìˆëŠ” ê¸°ì¡´ ì´ëª¨ì§€ë¥¼ ì œê±°í•˜ì§€ ì•ŠìŒ.\n\nê²½ë¡œ1: cleanup(5ë¶„ í›„) â†’ state ì‚­ì œ but ì´ëª¨ì§€ ì”ì¡´ â†’ ìƒˆ ë©”ì‹œì§€ â†’ currentEmoji=null â†’ ì´ì „ ì´ëª¨ì§€ ë¯¸ì œê±° â†’ ì¤‘ë³µ\nê²½ë¡œ2: cleanup ì „ ì¬ì§„ì… â†’ state ë®ì–´ì”€ â†’ currentEmoji=null â†’ ë™ì¼ ì¤‘ë³µ\n\n### ìˆ˜ì • (context-window-manager.ts)\n1. setOriginalMessage()ë¥¼ asyncë¡œ ë³€ê²½:\n   - ê°™ì€ tsë©´ state ë³´ì¡´ (ì´ëª¨ì§€ ì •ë³´ ìœ ì§€) â†’ return\n   - ë‹¤ë¥¸ tsë©´ ê¸°ì¡´ ì´ëª¨ì§€ removeReaction í›„ ìƒˆë¡œ ì„¤ì •\n   - ì²« í˜¸ì¶œì´ë©´ currentEmoji: nullë¡œ ì‹œì‘\n\n2. updateContextEmoji()ì— safety ì¥ì¹˜ ì¶”ê°€:\n   - currentEmojiê°€ nullì¼ ë•Œ(cleanup í›„ ì¬ì§„ì…) removeAllContextEmojis() í˜¸ì¶œ\n   - ëª¨ë“  %ì´ëª¨ì§€(80p/60p/40p/20p/0p) ì¤‘ ìƒˆ ì´ëª¨ì§€ ì œì™¸í•˜ê³  ì „ë¶€ ì œê±°\n\n3. removeAllContextEmojis() ì‹ ê·œ private ë©”ì„œë“œ:\n   - EMOJI_THRESHOLDS ìˆœíšŒí•˜ë©° exceptEmoji ì œì™¸ ëª¨ë‘ removeReaction\n\n### session-initializer.ts\n- setOriginalMessage í˜¸ì¶œì„ awaitë¡œ ë³€ê²½\n\n### Edge Cases\n- cleanup í›„ ì¬ì§„ì…: removeAllContextEmojisë¡œ ì•ˆì „ ì •ë¦¬\n- ê°™ì€ ìŠ¤ë ˆë“œ ë¹ ë¥¸ ì—°ì† ë©”ì‹œì§€: ê°™ì€ tsë©´ noop\n- new/renew: cleanupWithReactionì´ ì´ë¯¸ ì²˜ë¦¬\n- Slack API ì‹¤íŒ¨: removeReactionì€ ì—ëŸ¬ ë¬´ì‹œ ì²˜ë¦¬ë¨\n\n### ë³€ê²½ íŒŒì¼ (2ê°œ)\ncontext-window-manager.ts, session-initializer.ts","status":"closed","priority":1,"issue_type":"bug","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:10.826154+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.237314+09:00","closed_at":"2026-02-02T18:43:29.793396+09:00","close_reason":"Fixed: setOriginalMessage now async, preserves state for same ts, removes old emoji for different ts. Added removeAllContextEmojis safety net in updateContextEmoji.","comments":[{"id":2,"issue_id":"somaw-uvg","author":"Z","text":"Review evidence: commit b6e37bd - feat: add sleep mode and fix context emoji duplication. Context emoji fix: setOriginalMessage async, preserves state for same ts, added removeAllContextEmojis safety net.","created_at":"2026-02-03T02:08:40Z"}]}
{"id":"somaw-v2e","title":"ì„¸ì…˜ ëª©ë¡: Jira ì´ìŠˆ ìƒíƒœ ì „í™˜ ë²„íŠ¼","description":"ì´ìŠˆê°€ Todo ìƒíƒœì´ë©´ In-progress ì „í™˜ ë²„íŠ¼ í‘œì‹œ. ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ ì„¸ì…˜ì˜ AIì—ê²Œ ì´ìŠˆ ìƒíƒœë¥¼ ë³€ê²½í•˜ë¼ëŠ” ìš”ì²­ ì „ë‹¬. í˜„ì¬ Jira ì›Œí¬í”Œë¡œìš°ì—ì„œ ê°ˆ ìˆ˜ ìˆëŠ” ëª¨ë“  ì „í™˜ ê°€ëŠ¥í•œ ìƒíƒœë¥¼ í‘œì‹œ. Jira getTransitions API í™œìš©, action-handlerì—ì„œ ì „í™˜ ì•¡ì…˜ êµ¬í˜„.","design":"## êµ¬í˜„ ê³„íš: Jira ì´ìŠˆ ìƒíƒœ ì „í™˜ ë²„íŠ¼\n\n### link-metadata-fetcher.ts\n- JiraTransition íƒ€ì…: {id, name, to: {name, statusCategory}}\n- fetchJiraTransitions(link): Jira REST API /issue/{key}/transitions\n\n### session-manager.ts formatUserSessionsBlocks()\n- Jira issue ìˆëŠ” ì„¸ì…˜ì— actions ë¸”ë¡ ì¶”ê°€\n- transitions.slice(0,4)ë¡œ ìµœëŒ€ 4ê°œ ë²„íŠ¼\n- ë²„íŠ¼ value: JSON {sessionKey, issueKey, transitionId, transitionName}\n- action_id: jira_transition_{id}_{sessionKey_prefix}\n- Done ê³„ì—´ ë²„íŠ¼ì€ style:'primary'\n\n### ì‹ ê·œ: jira-action-handler.ts\n- handleTransition(body, respond):\n  1. valueì—ì„œ sessionKey/issueKey/transitionId/transitionName íŒŒì‹±\n  2. ì„¸ì…˜ ì¡´ì¬ + ì†Œìœ ê¶Œ í™•ì¸\n  3. í•´ë‹¹ ì„¸ì…˜ threadì— ë©”ì‹œì§€ ì£¼ì…: 'Jira ì´ìŠˆ {key} ìƒíƒœë¥¼ {name}ìœ¼ë¡œ ë³€ê²½í•´ì£¼ì„¸ìš”'\n  4. messageHandler íŒ¨í„´ ì‚¬ìš© (ChoiceActionHandlerì™€ ë™ì¼)\n\n### actions/index.ts\n- app.action(/^jira_transition_/, ...) ì •ê·œì‹ ë§¤ì¹­ìœ¼ë¡œ ë“±ë¡\n\n### AI ìœ„ì„ ì„¤ê³„\n- ì§ì ‘ API í˜¸ì¶œ ëŒ€ì‹  ì„¸ì…˜ AIì—ê²Œ ë©”ì‹œì§€ ì£¼ì…\n- AIê°€ MCP(Jira)ë¥¼ í†µí•´ ìƒíƒœ ë³€ê²½ ì‹¤í–‰\n- ì „í›„ ì»¨í…ìŠ¤íŠ¸ë¥¼ í™œìš©í•œ ì§€ëŠ¥ì  ì²˜ë¦¬ ê°€ëŠ¥\n\n### ë³€ê²½ íŒŒì¼ (4ê°œ)\nlink-metadata-fetcher.ts, session-manager.ts, jira-action-handler.ts (ì‹ ê·œ), actions/index.ts","status":"closed","priority":2,"issue_type":"task","owner":"z@insightquest.io","created_at":"2026-02-02T18:11:35.199911+09:00","created_by":"Z","updated_at":"2026-02-03T11:37:48.239261+09:00","closed_at":"2026-02-03T10:31:07.489432+09:00","close_reason":"Implemented Jira transition buttons and PR merge button in session list","dependencies":[{"issue_id":"somaw-v2e","depends_on_id":"somaw-89z","type":"blocks","created_at":"2026-02-02T18:11:52.86766+09:00","created_by":"Z"}],"comments":[{"id":11,"issue_id":"somaw-v2e","author":"Z","text":"Review evidence: commit c9f1c34 - feat: add Jira transition buttons and PR merge button. fetchJiraTransitions() in link-metadata-fetcher.ts, jira-action-handler.ts (99 lines), buttons in session-manager.ts buildSessionActionButtons(). 5 files, +491/-2 lines.","created_at":"2026-02-03T02:09:01Z"}]}
{"id":"somaw-vvx","title":"Step 3b: Integrate setStatus into stream-executor.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:15.108218+09:00","updated_at":"2026-02-03T11:37:48.243705+09:00","closed_at":"2026-01-30T14:39:57.894083+09:00","close_reason":"Closed","comments":[{"id":20,"issue_id":"somaw-vvx","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. stream-executor.ts calls setStatus at stream start/tool-use/completion/error lifecycle points.","created_at":"2026-02-03T02:09:19Z"}]}
{"id":"somaw-w8q","title":"Step 5: Implement graceful fallback","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:36:59.29277+09:00","updated_at":"2026-02-03T11:37:48.2429+09:00","closed_at":"2026-01-30T14:38:07.636148+09:00","close_reason":"Closed","comments":[{"id":24,"issue_id":"somaw-w8q","author":"Z","text":"Review evidence: commit c8848ed - feat(slack): add native AI spinner via assistant.threads.setStatus. Graceful fallback: auto-disable on first API failure (assistant-status-manager.ts).","created_at":"2026-02-03T02:09:30Z"}]}
