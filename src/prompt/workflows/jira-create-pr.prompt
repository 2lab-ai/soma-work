{{include:./common.prompt}}

# Jira Create PR Workflow

ì´ ì„¸ì…˜ì€ **Jira ì´ìŠˆ ê¸°ë°˜ PR ìƒì„±** ì „ìš©ì´ë‹¤. Implementation Specì„ ê¸°ë°˜ìœ¼ë¡œ `Red -> Green -> Refactor` phaseë¥¼ ìˆœì°¨ ì‹¤í–‰í•œë‹¤.

## ì „ì œ ì¡°ê±´
- Jira ì´ìŠˆì— **ìŠ¹ì¸ëœ Implementation Spec**ì´ ìˆì–´ì•¼ í•¨
- Specì´ ì—†ìœ¼ë©´ `jira-planning` ì›Œí¬í”Œë¡œìš°ë¥¼ ë¨¼ì € ì§„í–‰í•˜ë¼ê³  ì•ˆë‚´

## ìë™ ìˆ˜í–‰ ì‚¬í•­
1. Jira ì´ìŠˆì—ì„œ Implementation Spec í™•ì¸
2. ê´€ë ¨ repo clone
3. ì´ìŠˆ í‚¤ë¡œ ìƒˆ ë¸Œëœì¹˜ ìƒì„±
4. Red phase ì§„í–‰ (ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸ + ìµœì†Œ ë¼ˆëŒ€)
5. Green phase ì§„í–‰ ì—¬ë¶€ë¥¼ `user_choice`ë¡œ í™•ì¸
6. Green ì§„í–‰ ì‹œ êµ¬í˜„ ì™„ë£Œ ë° í…ŒìŠ¤íŠ¸ í†µê³¼
7. Refactor ì§„í–‰ ì—¬ë¶€ë¥¼ `user_choice`ë¡œ í™•ì¸
8. Refactor ì§„í–‰ ì‹œ ì½”ë“œ ì •ë¦¬ + PR ë§ˆë¬´ë¦¬

## ë¸Œëœì¹˜ ë„¤ì´ë°
```
feature/[ISSUE-KEY]-short-description
ì˜ˆ: feature/PTN-123-add-user-auth
```

## Phase ì •ì˜

### Red phase (ìŠ¤ìºí´ë“œ)
- ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ì‘ì„±í•œë‹¤.
- ìµœì†Œ êµ¬í˜„ ë¼ˆëŒ€ë¥¼ ì¶”ê°€í•˜ë˜ í…ŒìŠ¤íŠ¸ëŠ” ì•„ì§ ì‹¤íŒ¨ ìƒíƒœë¡œ ë‘”ë‹¤.
- PRì€ `WIP` ë˜ëŠ” `Draft` ìƒíƒœë¡œ ì˜¬ë¦°ë‹¤.
- ìì—°ìŠ¤ëŸ¬ìš´ ì¤‘ë‹¨ ì§€ì : "PR ë¼ˆëŒ€ ìƒì„± ì™„ë£Œ"

### Green phase (êµ¬í˜„ ì™„ë£Œ)
- Redì—ì„œ ë§Œë“  ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸ë¥¼ ëª¨ë‘ í†µê³¼ì‹œí‚¤ëŠ” ìµœì†Œ êµ¬í˜„ì„ ì™„ì„±í•œë‹¤.
- `test`, `build`ë¥¼ ì‹¤í–‰í•´ íšŒê·€ ì—†ì´ í†µê³¼ë¥¼ í™•ì¸í•œë‹¤.
- ìì—°ìŠ¤ëŸ¬ìš´ ì¤‘ë‹¨ ì§€ì : "ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ, ë¦¬íŒ©í„°ë§ ì „"

### Refactor phase (ì •ë¦¬/ì¶œì‹œ ì¤€ë¹„)
- ì¤‘ë³µ ì œê±°, ë„¤ì´ë° ê°œì„ , êµ¬ì¡° ì •ë¦¬, í…ŒìŠ¤íŠ¸ ê°€ë…ì„± ê°œì„ ì„ ìˆ˜í–‰í•œë‹¤.
- PR ë³¸ë¬¸/ì²´í¬ë¦¬ìŠ¤íŠ¸/ë³€ê²½ ìš”ì•½ì„ ìµœì¢… ìƒíƒœë¡œ ê°±ì‹ í•œë‹¤.
- ìì—°ìŠ¤ëŸ¬ìš´ ì¤‘ë‹¨ ì§€ì : "ë¦¬ë·° ìš”ì²­ ê°€ëŠ¥í•œ ìƒíƒœ"

## ì‘ì—… í”„ë¡œì„¸ìŠ¤

### 1. Spec í™•ì¸
- Jira ì´ìŠˆ ì¡°íšŒ
- Implementation Spec ì¡´ì¬ ì—¬ë¶€ í™•ì¸
- Specì´ ì—†ìœ¼ë©´: "Implementation Specì´ ì—†ìŠµë‹ˆë‹¤. `/plan` ë˜ëŠ” jira-planning ì›Œí¬í”Œë¡œìš°ë¡œ ë¨¼ì € Specì„ ì‘ì„±í•´ì£¼ì„¸ìš”."

### 2. ë¸Œëœì¹˜ ìƒì„±
```bash
git checkout -b feature/[ISSUE-KEY]-description
```

### 3. Red phase ì‹¤í–‰
- ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„± (Red)
- ìµœì†Œ êµ¬í˜„ ë¼ˆëŒ€ ì‘ì„± (í…ŒìŠ¤íŠ¸ëŠ” ì‹¤íŒ¨ ìƒíƒœ ìœ ì§€)

```bash
git add .
git commit -m "feat([scope]): [ISSUE-KEY] scaffold implementation

- Add failing tests for [feature]
- Add implementation skeleton
- WIP: actual implementation needed"
git push -u origin feature/[ISSUE-KEY]-description
```

### 4. PR ìƒì„± (Red ê²°ê³¼ ë°˜ì˜)
`gh pr create` ë˜ëŠ” `mcp__github__create_pull_request` ì‚¬ìš©. ê¸°ë³¸ ìƒíƒœëŠ” `Draft`ë¥¼ ê¶Œì¥í•œë‹¤.

PR ìƒì„± ì§í›„ ì„¸ì…˜ ë§í¬ë¥¼ ìë™ ì—…ë°ì´íŠ¸í•œë‹¤ (ìœ ì €ì—ê²Œ í‘œì‹œë˜ì§€ ì•ŠìŒ):
```json
{
  "type": "session_links",
  "jira": "Jira ì´ìŠˆ URL",
  "pr": "ìƒì„±ëœ PR URL"
}
```

Red phase ì™„ë£Œ í›„, ìœ ì €ì—ê²Œ Green ì§„í–‰ ì—¬ë¶€ë¥¼ í™•ì¸í•œë‹¤:
```json
{
  "type": "user_choice",
  "question": "Red phase(PR ë¼ˆëŒ€)ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. Green phaseë¡œ êµ¬í˜„ì„ ê³„ì†í• ê¹Œìš”?",
  "options": [
    {"id": "1", "label": "Green ì§„í–‰", "description": "ì‹¤ì œ ë¡œì§ êµ¬í˜„ í›„ í…ŒìŠ¤íŠ¸ í†µê³¼ê¹Œì§€ ì§„í–‰"},
    {"id": "2", "label": "ì—¬ê¸°ì„œ ì¤‘ë‹¨", "description": "í˜„ì¬ Draft PR ìƒíƒœë¡œ ì¢…ë£Œ"}
  ]
}
```

### 5. Green phase ì‹¤í–‰ (ìœ ì €ê°€ Green ì§„í–‰ ì„ íƒ ì‹œ)
- ì‹¤ì œ ë¡œì§ êµ¬í˜„
- ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸
- ë¹Œë“œ/í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
npm test
npm run build
git add .
git commit -m "feat([scope]): [ISSUE-KEY] implement green phase"
git push
```

Green phase ì™„ë£Œ í›„ Refactor ì§„í–‰ ì—¬ë¶€ë¥¼ í™•ì¸í•œë‹¤:
```json
{
  "type": "user_choice",
  "question": "Green phaseê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. Refactor phaseê¹Œì§€ ì§„í–‰í• ê¹Œìš”?",
  "options": [
    {"id": "1", "label": "Refactor ì§„í–‰", "description": "êµ¬ì¡° ì •ë¦¬/ê°€ë…ì„± ê°œì„  í›„ PR ì™„ì„±"},
    {"id": "2", "label": "ì—¬ê¸°ì„œ ì¤‘ë‹¨", "description": "êµ¬í˜„ ì™„ë£Œ ìƒíƒœë¡œ ì¢…ë£Œ"}
  ]
}
```

### 6. Refactor phase ì‹¤í–‰ (ìœ ì €ê°€ Refactor ì§„í–‰ ì„ íƒ ì‹œ)
- ì½”ë“œ ë‹¨ìˆœí™”/ì¤‘ë³µ ì œê±°/ë„¤ì´ë° ê°œì„ 
- í…ŒìŠ¤íŠ¸ ì¬ì‹¤í–‰
- PR ë³¸ë¬¸ ìƒíƒœë¥¼ `WIP`ì—ì„œ ì™„ë£Œ ìƒíƒœë¡œ ê°±ì‹ 

```bash
npm test
npm run build
git add .
git commit -m "refactor([scope]): [ISSUE-KEY] cleanup after green phase"
git push
```

## PR ë³¸ë¬¸ ìƒíƒœ ê°€ì´ë“œ

### Redê¹Œì§€ë§Œ ì™„ë£Œëœ ê²½ìš°
- Status: `WIP (Red complete, Green pending)`

### Green ì™„ë£Œëœ ê²½ìš°
- Status: `Implementation complete (Refactor optional)`

### Refactor ì™„ë£Œëœ ê²½ìš°
- Status: `Ready for review`

## ğŸ”„ ë‹¤ìŒ ë‹¨ê³„ ì•ˆë‚´

phase ì§„í–‰ì´ ì¢…ë£Œë˜ë©´, ìœ ì €ì—ê²Œ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ì•ˆë‚´:
- **PR ë¦¬ë·° ìš”ì²­**: "ë¦¬ë·°ë¥¼ ë°›ìœ¼ë ¤ë©´ ìƒˆ ì„¸ì…˜ì—ì„œ PR ë§í¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”."
- **ë¬¸ì„œ ì‘ì„±**: "API ë³€ê²½ì´ í¬í•¨ëœ ê²½ìš°, Confluence ë¬¸ì„œë¥¼ ì‘ì„±í•˜ë ¤ë©´ ìƒˆ ì„¸ì…˜ì—ì„œ Confluence ë§í¬ + PR ë§í¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”."
- PR ë§í¬ëŠ” `session_links` JSON directiveë¡œ ìë™ ì—°ê²°ë¨
